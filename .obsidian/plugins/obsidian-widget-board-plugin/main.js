/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var lb=Object.create;var Zn=Object.defineProperty;var cb=Object.getOwnPropertyDescriptor;var db=Object.getOwnPropertyNames;var hb=Object.getPrototypeOf,ub=Object.prototype.hasOwnProperty;var fb=(e,t,i)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var tr=(e,t)=>()=>(e&&(t=e(e=0)),t);var Lc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rc=(e,t)=>{for(var i in t)Zn(e,i,{get:t[i],enumerable:!0})},Fc=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of db(t))!ub.call(e,s)&&s!==i&&Zn(e,s,{get:()=>t[s],enumerable:!(n=cb(t,s))||n.enumerable});return e};var er=(e,t,i)=>(i=e!=null?lb(hb(e)):{},Fc(t||!e||!e.__esModule?Zn(i,"default",{value:e,enumerable:!0}):i,e)),gb=e=>Fc(Zn({},"__esModule",{value:!0}),e);var R=(e,t,i)=>(fb(e,typeof t!="symbol"?t+"":t,i),i);var Go=Lc((jo,ln)=>{(function(e,t){typeof jo=="object"&&typeof ln!="undefined"?ln.exports=t():typeof define=="function"&&define.amd?define(t):e.moment=t()})(jo,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(l){e=l}function n(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function s(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function r(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function o(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;var h;for(h in l)if(r(l,h))return!1;return!0}function a(l){return l===void 0}function c(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function d(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function u(l,h){var m=[],b,x=l.length;for(b=0;b<x;++b)m.push(h(l[b],b));return m}function f(l,h){for(var m in h)r(h,m)&&(l[m]=h[m]);return r(h,"toString")&&(l.toString=h.toString),r(h,"valueOf")&&(l.valueOf=h.valueOf),l}function g(l,h,m,b){return uc(l,h,m,b,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(l){return l._pf==null&&(l._pf=p()),l._pf}var w;Array.prototype.some?w=Array.prototype.some:w=function(l){var h=Object(this),m=h.length>>>0,b;for(b=0;b<m;b++)if(b in h&&l.call(this,h[b],b,h))return!0;return!1};function v(l){if(l._isValid==null){var h=y(l),m=w.call(h.parsedDateParts,function(x){return x!=null}),b=!isNaN(l._d.getTime())&&h.overflow<0&&!h.empty&&!h.invalidEra&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&m);if(l._strict&&(b=b&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=b;else return b}return l._isValid}function _(l){var h=g(NaN);return l!=null?f(y(h),l):y(h).userInvalidated=!0,h}var S=t.momentProperties=[],M=!1;function D(l,h){var m,b,x,E=S.length;if(a(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),a(h._i)||(l._i=h._i),a(h._f)||(l._f=h._f),a(h._l)||(l._l=h._l),a(h._strict)||(l._strict=h._strict),a(h._tzm)||(l._tzm=h._tzm),a(h._isUTC)||(l._isUTC=h._isUTC),a(h._offset)||(l._offset=h._offset),a(h._pf)||(l._pf=y(h)),a(h._locale)||(l._locale=h._locale),E>0)for(m=0;m<E;m++)b=S[m],x=h[b],a(x)||(l[b]=x);return l}function T(l){D(this,l),this._d=new Date(l._d!=null?l._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),M===!1&&(M=!0,t.updateOffset(this),M=!1)}function C(l){return l instanceof T||l!=null&&l._isAMomentObject!=null}function A(l){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+l)}function I(l,h){var m=!0;return f(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,l),m){var b=[],x,E,k,Y=arguments.length;for(E=0;E<Y;E++){if(x="",typeof arguments[E]=="object"){x+=`
[`+E+"] ";for(k in arguments[0])r(arguments[0],k)&&(x+=k+": "+arguments[0][k]+", ");x=x.slice(0,-2)}else x=arguments[E];b.push(x)}A(l+`
Arguments: `+Array.prototype.slice.call(b).join("")+`
`+new Error().stack),m=!1}return h.apply(this,arguments)},h)}var O={};function L(l,h){t.deprecationHandler!=null&&t.deprecationHandler(l,h),O[l]||(A(h),O[l]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function F(l){return typeof Function!="undefined"&&l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function V(l){var h,m;for(m in l)r(l,m)&&(h=l[m],F(h)?this[m]=h:this["_"+m]=h);this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function J(l,h){var m=f({},l),b;for(b in h)r(h,b)&&(s(l[b])&&s(h[b])?(m[b]={},f(m[b],l[b]),f(m[b],h[b])):h[b]!=null?m[b]=h[b]:delete m[b]);for(b in l)r(l,b)&&!r(h,b)&&s(l[b])&&(m[b]=f({},m[b]));return m}function X(l){l!=null&&this.set(l)}var U;Object.keys?U=Object.keys:U=function(l){var h,m=[];for(h in l)r(l,h)&&m.push(h);return m};var Z={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ft(l,h,m){var b=this._calendar[l]||this._calendar.sameElse;return F(b)?b.call(h,m):b}function at(l,h,m){var b=""+Math.abs(l),x=h-b.length,E=l>=0;return(E?m?"+":"":"-")+Math.pow(10,Math.max(0,x)).toString().substr(1)+b}var bt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ie={},zt={};function N(l,h,m,b){var x=b;typeof b=="string"&&(x=function(){return this[b]()}),l&&(zt[l]=x),h&&(zt[h[0]]=function(){return at(x.apply(this,arguments),h[1],h[2])}),m&&(zt[m]=function(){return this.localeData().ordinal(x.apply(this,arguments),l)})}function oe(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function Pe(l){var h=l.match(bt),m,b;for(m=0,b=h.length;m<b;m++)zt[h[m]]?h[m]=zt[h[m]]:h[m]=oe(h[m]);return function(x){var E="",k;for(k=0;k<b;k++)E+=F(h[k])?h[k].call(x,l):h[k];return E}}function z(l,h){return l.isValid()?(h=Ft(h,l.localeData()),Ie[h]=Ie[h]||Pe(h),Ie[h](l)):l.localeData().invalidDate()}function Ft(l,h){var m=5;function b(x){return h.longDateFormat(x)||x}for(Rt.lastIndex=0;m>=0&&Rt.test(l);)l=l.replace(Rt,b),Rt.lastIndex=0,m-=1;return l}var Ct={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function te(l){var h=this._longDateFormat[l],m=this._longDateFormat[l.toUpperCase()];return h||!m?h:(this._longDateFormat[l]=m.match(bt).map(function(b){return b==="MMMM"||b==="MM"||b==="DD"||b==="dddd"?b.slice(1):b}).join(""),this._longDateFormat[l])}var Et="Invalid date";function ae(){return this._invalidDate}var Yn="%d",Os=/\d{1,2}/;function vo(l){return this._ordinal.replace("%d",l)}var _g={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Sg(l,h,m,b){var x=this._relativeTime[m];return F(x)?x(l,h,m,b):x.replace(/%d/i,l)}function Eg(l,h){var m=this._relativeTime[l>0?"future":"past"];return F(m)?m(h):m.replace(/%s/i,h)}var Vn={};function Bt(l,h){var m=l.toLowerCase();Vn[m]=Vn[m+"s"]=Vn[h]=l}function le(l){return typeof l=="string"?Vn[l]||Vn[l.toLowerCase()]:void 0}function xo(l){var h={},m,b;for(b in l)r(l,b)&&(m=le(b),m&&(h[m]=l[b]));return h}var $l={};function Wt(l,h){$l[l]=h}function Mg(l){var h=[],m;for(m in l)r(l,m)&&h.push({unit:m,priority:$l[m]});return h.sort(function(b,x){return b.priority-x.priority}),h}function Ls(l){return l%4===0&&l%100!==0||l%400===0}function ce(l){return l<0?Math.ceil(l)||0:Math.floor(l)}function G(l){var h=+l,m=0;return h!==0&&isFinite(h)&&(m=ce(h)),m}function tn(l,h){return function(m){return m!=null?(jl(this,l,m),t.updateOffset(this,h),this):Rs(this,l)}}function Rs(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function jl(l,h,m){l.isValid()&&!isNaN(m)&&(h==="FullYear"&&Ls(l.year())&&l.month()===1&&l.date()===29?(m=G(m),l._d["set"+(l._isUTC?"UTC":"")+h](m,l.month(),Vs(m,l.month()))):l._d["set"+(l._isUTC?"UTC":"")+h](m))}function Tg(l){return l=le(l),F(this[l])?this[l]():this}function Dg(l,h){if(typeof l=="object"){l=xo(l);var m=Mg(l),b,x=m.length;for(b=0;b<x;b++)this[m[b].unit](l[m[b].unit])}else if(l=le(l),F(this[l]))return this[l](h);return this}var Gl=/\d/,ee=/\d\d/,ql=/\d{3}/,_o=/\d{4}/,Fs=/[+-]?\d{6}/,gt=/\d\d?/,Kl=/\d\d\d\d?/,Xl=/\d\d\d\d\d\d?/,Bs=/\d{1,3}/,So=/\d{1,4}/,Ws=/[+-]?\d{1,6}/,en=/\d+/,Ns=/[+-]?\d+/,kg=/Z|[+-]\d\d:?\d\d/gi,Hs=/Z|[+-]\d\d(?::?\d\d)?/gi,Cg=/[+-]?\d+(\.\d{1,3})?/,zn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ys;Ys={};function W(l,h,m){Ys[l]=F(h)?h:function(b,x){return b&&m?m:h}}function Ag(l,h){return r(Ys,l)?Ys[l](h._strict,h._locale):new RegExp(Ig(l))}function Ig(l){return ie(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,m,b,x,E){return m||b||x||E}))}function ie(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Eo={};function nt(l,h){var m,b=h,x;for(typeof l=="string"&&(l=[l]),c(h)&&(b=function(E,k){k[h]=G(E)}),x=l.length,m=0;m<x;m++)Eo[l[m]]=b}function Un(l,h){nt(l,function(m,b,x,E){x._w=x._w||{},h(m,x._w,x,E)})}function Pg(l,h,m){h!=null&&r(Eo,l)&&Eo[l](h,m._a,m,l)}var Nt=0,Oe=1,we=2,Mt=3,ue=4,Le=5,Si=6,Og=7,Lg=8;function Rg(l,h){return(l%h+h)%h}var xt;Array.prototype.indexOf?xt=Array.prototype.indexOf:xt=function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1};function Vs(l,h){if(isNaN(l)||isNaN(h))return NaN;var m=Rg(h,12);return l+=(h-m)/12,m===1?Ls(l)?29:28:31-m%7%2}N("M",["MM",2],"Mo",function(){return this.month()+1}),N("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),N("MMMM",0,0,function(l){return this.localeData().months(this,l)}),Bt("month","M"),Wt("month",8),W("M",gt),W("MM",gt,ee),W("MMM",function(l,h){return h.monthsShortRegex(l)}),W("MMMM",function(l,h){return h.monthsRegex(l)}),nt(["M","MM"],function(l,h){h[Oe]=G(l)-1}),nt(["MMM","MMMM"],function(l,h,m,b){var x=m._locale.monthsParse(l,b,m._strict);x!=null?h[Oe]=x:y(m).invalidMonth=l});var Fg="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Zl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Jl=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Bg=zn,Wg=zn;function Ng(l,h){return l?n(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Jl).test(h)?"format":"standalone"][l.month()]:n(this._months)?this._months:this._months.standalone}function Hg(l,h){return l?n(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Jl.test(h)?"format":"standalone"][l.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Yg(l,h,m){var b,x,E,k=l.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],b=0;b<12;++b)E=g([2e3,b]),this._shortMonthsParse[b]=this.monthsShort(E,"").toLocaleLowerCase(),this._longMonthsParse[b]=this.months(E,"").toLocaleLowerCase();return m?h==="MMM"?(x=xt.call(this._shortMonthsParse,k),x!==-1?x:null):(x=xt.call(this._longMonthsParse,k),x!==-1?x:null):h==="MMM"?(x=xt.call(this._shortMonthsParse,k),x!==-1?x:(x=xt.call(this._longMonthsParse,k),x!==-1?x:null)):(x=xt.call(this._longMonthsParse,k),x!==-1?x:(x=xt.call(this._shortMonthsParse,k),x!==-1?x:null))}function Vg(l,h,m){var b,x,E;if(this._monthsParseExact)return Yg.call(this,l,h,m);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),b=0;b<12;b++){if(x=g([2e3,b]),m&&!this._longMonthsParse[b]&&(this._longMonthsParse[b]=new RegExp("^"+this.months(x,"").replace(".","")+"$","i"),this._shortMonthsParse[b]=new RegExp("^"+this.monthsShort(x,"").replace(".","")+"$","i")),!m&&!this._monthsParse[b]&&(E="^"+this.months(x,"")+"|^"+this.monthsShort(x,""),this._monthsParse[b]=new RegExp(E.replace(".",""),"i")),m&&h==="MMMM"&&this._longMonthsParse[b].test(l))return b;if(m&&h==="MMM"&&this._shortMonthsParse[b].test(l))return b;if(!m&&this._monthsParse[b].test(l))return b}}function Ql(l,h){var m;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=G(h);else if(h=l.localeData().monthsParse(h),!c(h))return l}return m=Math.min(l.date(),Vs(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,m),l}function tc(l){return l!=null?(Ql(this,l),t.updateOffset(this,!0),this):Rs(this,"Month")}function zg(){return Vs(this.year(),this.month())}function Ug(l){return this._monthsParseExact?(r(this,"_monthsRegex")||ec.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,"_monthsShortRegex")||(this._monthsShortRegex=Bg),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)}function $g(l){return this._monthsParseExact?(r(this,"_monthsRegex")||ec.call(this),l?this._monthsStrictRegex:this._monthsRegex):(r(this,"_monthsRegex")||(this._monthsRegex=Wg),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)}function ec(){function l(k,Y){return Y.length-k.length}var h=[],m=[],b=[],x,E;for(x=0;x<12;x++)E=g([2e3,x]),h.push(this.monthsShort(E,"")),m.push(this.months(E,"")),b.push(this.months(E,"")),b.push(this.monthsShort(E,""));for(h.sort(l),m.sort(l),b.sort(l),x=0;x<12;x++)h[x]=ie(h[x]),m[x]=ie(m[x]);for(x=0;x<24;x++)b[x]=ie(b[x]);this._monthsRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}N("Y",0,0,function(){var l=this.year();return l<=9999?at(l,4):"+"+l}),N(0,["YY",2],0,function(){return this.year()%100}),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),Bt("year","y"),Wt("year",1),W("Y",Ns),W("YY",gt,ee),W("YYYY",So,_o),W("YYYYY",Ws,Fs),W("YYYYYY",Ws,Fs),nt(["YYYYY","YYYYYY"],Nt),nt("YYYY",function(l,h){h[Nt]=l.length===2?t.parseTwoDigitYear(l):G(l)}),nt("YY",function(l,h){h[Nt]=t.parseTwoDigitYear(l)}),nt("Y",function(l,h){h[Nt]=parseInt(l,10)});function $n(l){return Ls(l)?366:365}t.parseTwoDigitYear=function(l){return G(l)+(G(l)>68?1900:2e3)};var ic=tn("FullYear",!0);function jg(){return Ls(this.year())}function Gg(l,h,m,b,x,E,k){var Y;return l<100&&l>=0?(Y=new Date(l+400,h,m,b,x,E,k),isFinite(Y.getFullYear())&&Y.setFullYear(l)):Y=new Date(l,h,m,b,x,E,k),Y}function jn(l){var h,m;return l<100&&l>=0?(m=Array.prototype.slice.call(arguments),m[0]=l+400,h=new Date(Date.UTC.apply(null,m)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)):h=new Date(Date.UTC.apply(null,arguments)),h}function zs(l,h,m){var b=7+h-m,x=(7+jn(l,0,b).getUTCDay()-h)%7;return-x+b-1}function nc(l,h,m,b,x){var E=(7+m-b)%7,k=zs(l,b,x),Y=1+7*(h-1)+E+k,j,st;return Y<=0?(j=l-1,st=$n(j)+Y):Y>$n(l)?(j=l+1,st=Y-$n(l)):(j=l,st=Y),{year:j,dayOfYear:st}}function Gn(l,h,m){var b=zs(l.year(),h,m),x=Math.floor((l.dayOfYear()-b-1)/7)+1,E,k;return x<1?(k=l.year()-1,E=x+Re(k,h,m)):x>Re(l.year(),h,m)?(E=x-Re(l.year(),h,m),k=l.year()+1):(k=l.year(),E=x),{week:E,year:k}}function Re(l,h,m){var b=zs(l,h,m),x=zs(l+1,h,m);return($n(l)-b+x)/7}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),Bt("week","w"),Bt("isoWeek","W"),Wt("week",5),Wt("isoWeek",5),W("w",gt),W("ww",gt,ee),W("W",gt),W("WW",gt,ee),Un(["w","ww","W","WW"],function(l,h,m,b){h[b.substr(0,1)]=G(l)});function qg(l){return Gn(l,this._week.dow,this._week.doy).week}var Kg={dow:0,doy:6};function Xg(){return this._week.dow}function Zg(){return this._week.doy}function Jg(l){var h=this.localeData().week(this);return l==null?h:this.add((l-h)*7,"d")}function Qg(l){var h=Gn(this,1,4).week;return l==null?h:this.add((l-h)*7,"d")}N("d",0,"do","day"),N("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),N("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),N("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),Bt("day","d"),Bt("weekday","e"),Bt("isoWeekday","E"),Wt("day",11),Wt("weekday",11),Wt("isoWeekday",11),W("d",gt),W("e",gt),W("E",gt),W("dd",function(l,h){return h.weekdaysMinRegex(l)}),W("ddd",function(l,h){return h.weekdaysShortRegex(l)}),W("dddd",function(l,h){return h.weekdaysRegex(l)}),Un(["dd","ddd","dddd"],function(l,h,m,b){var x=m._locale.weekdaysParse(l,b,m._strict);x!=null?h.d=x:y(m).invalidWeekday=l}),Un(["d","e","E"],function(l,h,m,b){h[b]=G(l)});function tp(l,h){return typeof l!="string"?l:isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10)}function ep(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Mo(l,h){return l.slice(h,7).concat(l.slice(0,h))}var ip="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),sc="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),np="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),sp=zn,rp=zn,op=zn;function ap(l,h){var m=n(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?Mo(m,this._week.dow):l?m[l.day()]:m}function lp(l){return l===!0?Mo(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort}function cp(l){return l===!0?Mo(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin}function dp(l,h,m){var b,x,E,k=l.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],b=0;b<7;++b)E=g([2e3,1]).day(b),this._minWeekdaysParse[b]=this.weekdaysMin(E,"").toLocaleLowerCase(),this._shortWeekdaysParse[b]=this.weekdaysShort(E,"").toLocaleLowerCase(),this._weekdaysParse[b]=this.weekdays(E,"").toLocaleLowerCase();return m?h==="dddd"?(x=xt.call(this._weekdaysParse,k),x!==-1?x:null):h==="ddd"?(x=xt.call(this._shortWeekdaysParse,k),x!==-1?x:null):(x=xt.call(this._minWeekdaysParse,k),x!==-1?x:null):h==="dddd"?(x=xt.call(this._weekdaysParse,k),x!==-1||(x=xt.call(this._shortWeekdaysParse,k),x!==-1)?x:(x=xt.call(this._minWeekdaysParse,k),x!==-1?x:null)):h==="ddd"?(x=xt.call(this._shortWeekdaysParse,k),x!==-1||(x=xt.call(this._weekdaysParse,k),x!==-1)?x:(x=xt.call(this._minWeekdaysParse,k),x!==-1?x:null)):(x=xt.call(this._minWeekdaysParse,k),x!==-1||(x=xt.call(this._weekdaysParse,k),x!==-1)?x:(x=xt.call(this._shortWeekdaysParse,k),x!==-1?x:null))}function hp(l,h,m){var b,x,E;if(this._weekdaysParseExact)return dp.call(this,l,h,m);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),b=0;b<7;b++){if(x=g([2e3,1]).day(b),m&&!this._fullWeekdaysParse[b]&&(this._fullWeekdaysParse[b]=new RegExp("^"+this.weekdays(x,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[b]=new RegExp("^"+this.weekdaysShort(x,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[b]=new RegExp("^"+this.weekdaysMin(x,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[b]||(E="^"+this.weekdays(x,"")+"|^"+this.weekdaysShort(x,"")+"|^"+this.weekdaysMin(x,""),this._weekdaysParse[b]=new RegExp(E.replace(".",""),"i")),m&&h==="dddd"&&this._fullWeekdaysParse[b].test(l))return b;if(m&&h==="ddd"&&this._shortWeekdaysParse[b].test(l))return b;if(m&&h==="dd"&&this._minWeekdaysParse[b].test(l))return b;if(!m&&this._weekdaysParse[b].test(l))return b}}function up(l){if(!this.isValid())return l!=null?this:NaN;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l!=null?(l=tp(l,this.localeData()),this.add(l-h,"d")):h}function fp(l){if(!this.isValid())return l!=null?this:NaN;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")}function gp(l){if(!this.isValid())return l!=null?this:NaN;if(l!=null){var h=ep(l,this.localeData());return this.day(this.day()%7?h:h-7)}else return this.day()||7}function pp(l){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||To.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,"_weekdaysRegex")||(this._weekdaysRegex=sp),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)}function mp(l){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||To.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=rp),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function yp(l){return this._weekdaysParseExact?(r(this,"_weekdaysRegex")||To.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=op),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function To(){function l(Yt,He){return He.length-Yt.length}var h=[],m=[],b=[],x=[],E,k,Y,j,st;for(E=0;E<7;E++)k=g([2e3,1]).day(E),Y=ie(this.weekdaysMin(k,"")),j=ie(this.weekdaysShort(k,"")),st=ie(this.weekdays(k,"")),h.push(Y),m.push(j),b.push(st),x.push(Y),x.push(j),x.push(st);h.sort(l),m.sort(l),b.sort(l),x.sort(l),this._weekdaysRegex=new RegExp("^("+x.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Do(){return this.hours()%12||12}function bp(){return this.hours()||24}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,Do),N("k",["kk",2],0,bp),N("hmm",0,0,function(){return""+Do.apply(this)+at(this.minutes(),2)}),N("hmmss",0,0,function(){return""+Do.apply(this)+at(this.minutes(),2)+at(this.seconds(),2)}),N("Hmm",0,0,function(){return""+this.hours()+at(this.minutes(),2)}),N("Hmmss",0,0,function(){return""+this.hours()+at(this.minutes(),2)+at(this.seconds(),2)});function rc(l,h){N(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}rc("a",!0),rc("A",!1),Bt("hour","h"),Wt("hour",13);function oc(l,h){return h._meridiemParse}W("a",oc),W("A",oc),W("H",gt),W("h",gt),W("k",gt),W("HH",gt,ee),W("hh",gt,ee),W("kk",gt,ee),W("hmm",Kl),W("hmmss",Xl),W("Hmm",Kl),W("Hmmss",Xl),nt(["H","HH"],Mt),nt(["k","kk"],function(l,h,m){var b=G(l);h[Mt]=b===24?0:b}),nt(["a","A"],function(l,h,m){m._isPm=m._locale.isPM(l),m._meridiem=l}),nt(["h","hh"],function(l,h,m){h[Mt]=G(l),y(m).bigHour=!0}),nt("hmm",function(l,h,m){var b=l.length-2;h[Mt]=G(l.substr(0,b)),h[ue]=G(l.substr(b)),y(m).bigHour=!0}),nt("hmmss",function(l,h,m){var b=l.length-4,x=l.length-2;h[Mt]=G(l.substr(0,b)),h[ue]=G(l.substr(b,2)),h[Le]=G(l.substr(x)),y(m).bigHour=!0}),nt("Hmm",function(l,h,m){var b=l.length-2;h[Mt]=G(l.substr(0,b)),h[ue]=G(l.substr(b))}),nt("Hmmss",function(l,h,m){var b=l.length-4,x=l.length-2;h[Mt]=G(l.substr(0,b)),h[ue]=G(l.substr(b,2)),h[Le]=G(l.substr(x))});function wp(l){return(l+"").toLowerCase().charAt(0)==="p"}var vp=/[ap]\.?m?\.?/i,xp=tn("Hours",!0);function _p(l,h,m){return l>11?m?"pm":"PM":m?"am":"AM"}var ac={calendar:Z,longDateFormat:Ct,invalidDate:Et,ordinal:Yn,dayOfMonthOrdinalParse:Os,relativeTime:_g,months:Fg,monthsShort:Zl,week:Kg,weekdays:ip,weekdaysMin:np,weekdaysShort:sc,meridiemParse:vp},mt={},qn={},Kn;function Sp(l,h){var m,b=Math.min(l.length,h.length);for(m=0;m<b;m+=1)if(l[m]!==h[m])return m;return b}function lc(l){return l&&l.toLowerCase().replace("_","-")}function Ep(l){for(var h=0,m,b,x,E;h<l.length;){for(E=lc(l[h]).split("-"),m=E.length,b=lc(l[h+1]),b=b?b.split("-"):null;m>0;){if(x=Us(E.slice(0,m).join("-")),x)return x;if(b&&b.length>=m&&Sp(E,b)>=m-1)break;m--}h++}return Kn}function Mp(l){return l.match("^[^/\\\\]*$")!=null}function Us(l){var h=null,m;if(mt[l]===void 0&&typeof ln!="undefined"&&ln&&ln.exports&&Mp(l))try{h=Kn._abbr,m=require,m("./locale/"+l),ti(h)}catch(b){mt[l]=null}return mt[l]}function ti(l,h){var m;return l&&(a(h)?m=Fe(l):m=ko(l,h),m?Kn=m:typeof console!="undefined"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),Kn._abbr}function ko(l,h){if(h!==null){var m,b=ac;if(h.abbr=l,mt[l]!=null)L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),b=mt[l]._config;else if(h.parentLocale!=null)if(mt[h.parentLocale]!=null)b=mt[h.parentLocale]._config;else if(m=Us(h.parentLocale),m!=null)b=m._config;else return qn[h.parentLocale]||(qn[h.parentLocale]=[]),qn[h.parentLocale].push({name:l,config:h}),null;return mt[l]=new X(J(b,h)),qn[l]&&qn[l].forEach(function(x){ko(x.name,x.config)}),ti(l),mt[l]}else return delete mt[l],null}function Tp(l,h){if(h!=null){var m,b,x=ac;mt[l]!=null&&mt[l].parentLocale!=null?mt[l].set(J(mt[l]._config,h)):(b=Us(l),b!=null&&(x=b._config),h=J(x,h),b==null&&(h.abbr=l),m=new X(h),m.parentLocale=mt[l],mt[l]=m),ti(l)}else mt[l]!=null&&(mt[l].parentLocale!=null?(mt[l]=mt[l].parentLocale,l===ti()&&ti(l)):mt[l]!=null&&delete mt[l]);return mt[l]}function Fe(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return Kn;if(!n(l)){if(h=Us(l),h)return h;l=[l]}return Ep(l)}function Dp(){return U(mt)}function Co(l){var h,m=l._a;return m&&y(l).overflow===-2&&(h=m[Oe]<0||m[Oe]>11?Oe:m[we]<1||m[we]>Vs(m[Nt],m[Oe])?we:m[Mt]<0||m[Mt]>24||m[Mt]===24&&(m[ue]!==0||m[Le]!==0||m[Si]!==0)?Mt:m[ue]<0||m[ue]>59?ue:m[Le]<0||m[Le]>59?Le:m[Si]<0||m[Si]>999?Si:-1,y(l)._overflowDayOfYear&&(h<Nt||h>we)&&(h=we),y(l)._overflowWeeks&&h===-1&&(h=Og),y(l)._overflowWeekday&&h===-1&&(h=Lg),y(l).overflow=h),l}var kp=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cp=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ap=/Z|[+-]\d\d(?::?\d\d)?/,$s=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ao=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ip=/^\/?Date\((-?\d+)/i,Pp=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Op={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function cc(l){var h,m,b=l._i,x=kp.exec(b)||Cp.exec(b),E,k,Y,j,st=$s.length,Yt=Ao.length;if(x){for(y(l).iso=!0,h=0,m=st;h<m;h++)if($s[h][1].exec(x[1])){k=$s[h][0],E=$s[h][2]!==!1;break}if(k==null){l._isValid=!1;return}if(x[3]){for(h=0,m=Yt;h<m;h++)if(Ao[h][1].exec(x[3])){Y=(x[2]||" ")+Ao[h][0];break}if(Y==null){l._isValid=!1;return}}if(!E&&Y!=null){l._isValid=!1;return}if(x[4])if(Ap.exec(x[4]))j="Z";else{l._isValid=!1;return}l._f=k+(Y||"")+(j||""),Po(l)}else l._isValid=!1}function Lp(l,h,m,b,x,E){var k=[Rp(l),Zl.indexOf(h),parseInt(m,10),parseInt(b,10),parseInt(x,10)];return E&&k.push(parseInt(E,10)),k}function Rp(l){var h=parseInt(l,10);return h<=49?2e3+h:h<=999?1900+h:h}function Fp(l){return l.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Bp(l,h,m){if(l){var b=sc.indexOf(l),x=new Date(h[0],h[1],h[2]).getDay();if(b!==x)return y(m).weekdayMismatch=!0,m._isValid=!1,!1}return!0}function Wp(l,h,m){if(l)return Op[l];if(h)return 0;var b=parseInt(m,10),x=b%100,E=(b-x)/100;return E*60+x}function dc(l){var h=Pp.exec(Fp(l._i)),m;if(h){if(m=Lp(h[4],h[3],h[2],h[5],h[6],h[7]),!Bp(h[1],m,l))return;l._a=m,l._tzm=Wp(h[8],h[9],h[10]),l._d=jn.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),y(l).rfc2822=!0}else l._isValid=!1}function Np(l){var h=Ip.exec(l._i);if(h!==null){l._d=new Date(+h[1]);return}if(cc(l),l._isValid===!1)delete l._isValid;else return;if(dc(l),l._isValid===!1)delete l._isValid;else return;l._strict?l._isValid=!1:t.createFromInputFallback(l)}t.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))});function nn(l,h,m){return l!=null?l:h!=null?h:m}function Hp(l){var h=new Date(t.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Io(l){var h,m,b=[],x,E,k;if(!l._d){for(x=Hp(l),l._w&&l._a[we]==null&&l._a[Oe]==null&&Yp(l),l._dayOfYear!=null&&(k=nn(l._a[Nt],x[Nt]),(l._dayOfYear>$n(k)||l._dayOfYear===0)&&(y(l)._overflowDayOfYear=!0),m=jn(k,0,l._dayOfYear),l._a[Oe]=m.getUTCMonth(),l._a[we]=m.getUTCDate()),h=0;h<3&&l._a[h]==null;++h)l._a[h]=b[h]=x[h];for(;h<7;h++)l._a[h]=b[h]=l._a[h]==null?h===2?1:0:l._a[h];l._a[Mt]===24&&l._a[ue]===0&&l._a[Le]===0&&l._a[Si]===0&&(l._nextDay=!0,l._a[Mt]=0),l._d=(l._useUTC?jn:Gg).apply(null,b),E=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[Mt]=24),l._w&&typeof l._w.d!="undefined"&&l._w.d!==E&&(y(l).weekdayMismatch=!0)}}function Yp(l){var h,m,b,x,E,k,Y,j,st;h=l._w,h.GG!=null||h.W!=null||h.E!=null?(E=1,k=4,m=nn(h.GG,l._a[Nt],Gn(pt(),1,4).year),b=nn(h.W,1),x=nn(h.E,1),(x<1||x>7)&&(j=!0)):(E=l._locale._week.dow,k=l._locale._week.doy,st=Gn(pt(),E,k),m=nn(h.gg,l._a[Nt],st.year),b=nn(h.w,st.week),h.d!=null?(x=h.d,(x<0||x>6)&&(j=!0)):h.e!=null?(x=h.e+E,(h.e<0||h.e>6)&&(j=!0)):x=E),b<1||b>Re(m,E,k)?y(l)._overflowWeeks=!0:j!=null?y(l)._overflowWeekday=!0:(Y=nc(m,b,x,E,k),l._a[Nt]=Y.year,l._dayOfYear=Y.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function Po(l){if(l._f===t.ISO_8601){cc(l);return}if(l._f===t.RFC_2822){dc(l);return}l._a=[],y(l).empty=!0;var h=""+l._i,m,b,x,E,k,Y=h.length,j=0,st,Yt;for(x=Ft(l._f,l._locale).match(bt)||[],Yt=x.length,m=0;m<Yt;m++)E=x[m],b=(h.match(Ag(E,l))||[])[0],b&&(k=h.substr(0,h.indexOf(b)),k.length>0&&y(l).unusedInput.push(k),h=h.slice(h.indexOf(b)+b.length),j+=b.length),zt[E]?(b?y(l).empty=!1:y(l).unusedTokens.push(E),Pg(E,b,l)):l._strict&&!b&&y(l).unusedTokens.push(E);y(l).charsLeftOver=Y-j,h.length>0&&y(l).unusedInput.push(h),l._a[Mt]<=12&&y(l).bigHour===!0&&l._a[Mt]>0&&(y(l).bigHour=void 0),y(l).parsedDateParts=l._a.slice(0),y(l).meridiem=l._meridiem,l._a[Mt]=Vp(l._locale,l._a[Mt],l._meridiem),st=y(l).era,st!==null&&(l._a[Nt]=l._locale.erasConvertYear(st,l._a[Nt])),Io(l),Co(l)}function Vp(l,h,m){var b;return m==null?h:l.meridiemHour!=null?l.meridiemHour(h,m):(l.isPM!=null&&(b=l.isPM(m),b&&h<12&&(h+=12),!b&&h===12&&(h=0)),h)}function zp(l){var h,m,b,x,E,k,Y=!1,j=l._f.length;if(j===0){y(l).invalidFormat=!0,l._d=new Date(NaN);return}for(x=0;x<j;x++)E=0,k=!1,h=D({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[x],Po(h),v(h)&&(k=!0),E+=y(h).charsLeftOver,E+=y(h).unusedTokens.length*10,y(h).score=E,Y?E<b&&(b=E,m=h):(b==null||E<b||k)&&(b=E,m=h,k&&(Y=!0));f(l,m||h)}function Up(l){if(!l._d){var h=xo(l._i),m=h.day===void 0?h.date:h.day;l._a=u([h.year,h.month,m,h.hour,h.minute,h.second,h.millisecond],function(b){return b&&parseInt(b,10)}),Io(l)}}function $p(l){var h=new T(Co(hc(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function hc(l){var h=l._i,m=l._f;return l._locale=l._locale||Fe(l._l),h===null||m===void 0&&h===""?_({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),C(h)?new T(Co(h)):(d(h)?l._d=h:n(m)?zp(l):m?Po(l):jp(l),v(l)||(l._d=null),l))}function jp(l){var h=l._i;a(h)?l._d=new Date(t.now()):d(h)?l._d=new Date(h.valueOf()):typeof h=="string"?Np(l):n(h)?(l._a=u(h.slice(0),function(m){return parseInt(m,10)}),Io(l)):s(h)?Up(l):c(h)?l._d=new Date(h):t.createFromInputFallback(l)}function uc(l,h,m,b,x){var E={};return(h===!0||h===!1)&&(b=h,h=void 0),(m===!0||m===!1)&&(b=m,m=void 0),(s(l)&&o(l)||n(l)&&l.length===0)&&(l=void 0),E._isAMomentObject=!0,E._useUTC=E._isUTC=x,E._l=m,E._i=l,E._f=h,E._strict=b,$p(E)}function pt(l,h,m,b){return uc(l,h,m,b,!1)}var Gp=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=pt.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:_()}),qp=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=pt.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:_()});function fc(l,h){var m,b;if(h.length===1&&n(h[0])&&(h=h[0]),!h.length)return pt();for(m=h[0],b=1;b<h.length;++b)(!h[b].isValid()||h[b][l](m))&&(m=h[b]);return m}function Kp(){var l=[].slice.call(arguments,0);return fc("isBefore",l)}function Xp(){var l=[].slice.call(arguments,0);return fc("isAfter",l)}var Zp=function(){return Date.now?Date.now():+new Date},Xn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Jp(l){var h,m=!1,b,x=Xn.length;for(h in l)if(r(l,h)&&!(xt.call(Xn,h)!==-1&&(l[h]==null||!isNaN(l[h]))))return!1;for(b=0;b<x;++b)if(l[Xn[b]]){if(m)return!1;parseFloat(l[Xn[b]])!==G(l[Xn[b]])&&(m=!0)}return!0}function Qp(){return this._isValid}function tm(){return fe(NaN)}function js(l){var h=xo(l),m=h.year||0,b=h.quarter||0,x=h.month||0,E=h.week||h.isoWeek||0,k=h.day||0,Y=h.hour||0,j=h.minute||0,st=h.second||0,Yt=h.millisecond||0;this._isValid=Jp(h),this._milliseconds=+Yt+st*1e3+j*6e4+Y*1e3*60*60,this._days=+k+E*7,this._months=+x+b*3+m*12,this._data={},this._locale=Fe(),this._bubble()}function Gs(l){return l instanceof js}function Oo(l){return l<0?Math.round(-1*l)*-1:Math.round(l)}function em(l,h,m){var b=Math.min(l.length,h.length),x=Math.abs(l.length-h.length),E=0,k;for(k=0;k<b;k++)(m&&l[k]!==h[k]||!m&&G(l[k])!==G(h[k]))&&E++;return E+x}function gc(l,h){N(l,0,0,function(){var m=this.utcOffset(),b="+";return m<0&&(m=-m,b="-"),b+at(~~(m/60),2)+h+at(~~m%60,2)})}gc("Z",":"),gc("ZZ",""),W("Z",Hs),W("ZZ",Hs),nt(["Z","ZZ"],function(l,h,m){m._useUTC=!0,m._tzm=Lo(Hs,l)});var im=/([\+\-]|\d\d)/gi;function Lo(l,h){var m=(h||"").match(l),b,x,E;return m===null?null:(b=m[m.length-1]||[],x=(b+"").match(im)||["-",0,0],E=+(x[1]*60)+G(x[2]),E===0?0:x[0]==="+"?E:-E)}function Ro(l,h){var m,b;return h._isUTC?(m=h.clone(),b=(C(l)||d(l)?l.valueOf():pt(l).valueOf())-m.valueOf(),m._d.setTime(m._d.valueOf()+b),t.updateOffset(m,!1),m):pt(l).local()}function Fo(l){return-Math.round(l._d.getTimezoneOffset())}t.updateOffset=function(){};function nm(l,h,m){var b=this._offset||0,x;if(!this.isValid())return l!=null?this:NaN;if(l!=null){if(typeof l=="string"){if(l=Lo(Hs,l),l===null)return this}else Math.abs(l)<16&&!m&&(l=l*60);return!this._isUTC&&h&&(x=Fo(this)),this._offset=l,this._isUTC=!0,x!=null&&this.add(x,"m"),b!==l&&(!h||this._changeInProgress?bc(this,fe(l-b,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?b:Fo(this)}function sm(l,h){return l!=null?(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this):-this.utcOffset()}function rm(l){return this.utcOffset(0,l)}function om(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(Fo(this),"m")),this}function am(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=Lo(kg,this._i);l!=null?this.utcOffset(l):this.utcOffset(0,!0)}return this}function lm(l){return this.isValid()?(l=l?pt(l).utcOffset():0,(this.utcOffset()-l)%60===0):!1}function cm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function dm(){if(!a(this._isDSTShifted))return this._isDSTShifted;var l={},h;return D(l,this),l=hc(l),l._a?(h=l._isUTC?g(l._a):pt(l._a),this._isDSTShifted=this.isValid()&&em(l._a,h.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function hm(){return this.isValid()?!this._isUTC:!1}function um(){return this.isValid()?this._isUTC:!1}function pc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var fm=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,gm=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function fe(l,h){var m=l,b=null,x,E,k;return Gs(l)?m={ms:l._milliseconds,d:l._days,M:l._months}:c(l)||!isNaN(+l)?(m={},h?m[h]=+l:m.milliseconds=+l):(b=fm.exec(l))?(x=b[1]==="-"?-1:1,m={y:0,d:G(b[we])*x,h:G(b[Mt])*x,m:G(b[ue])*x,s:G(b[Le])*x,ms:G(Oo(b[Si]*1e3))*x}):(b=gm.exec(l))?(x=b[1]==="-"?-1:1,m={y:Ei(b[2],x),M:Ei(b[3],x),w:Ei(b[4],x),d:Ei(b[5],x),h:Ei(b[6],x),m:Ei(b[7],x),s:Ei(b[8],x)}):m==null?m={}:typeof m=="object"&&("from"in m||"to"in m)&&(k=pm(pt(m.from),pt(m.to)),m={},m.ms=k.milliseconds,m.M=k.months),E=new js(m),Gs(l)&&r(l,"_locale")&&(E._locale=l._locale),Gs(l)&&r(l,"_isValid")&&(E._isValid=l._isValid),E}fe.fn=js.prototype,fe.invalid=tm;function Ei(l,h){var m=l&&parseFloat(l.replace(",","."));return(isNaN(m)?0:m)*h}function mc(l,h){var m={};return m.months=h.month()-l.month()+(h.year()-l.year())*12,l.clone().add(m.months,"M").isAfter(h)&&--m.months,m.milliseconds=+h-+l.clone().add(m.months,"M"),m}function pm(l,h){var m;return l.isValid()&&h.isValid()?(h=Ro(h,l),l.isBefore(h)?m=mc(l,h):(m=mc(h,l),m.milliseconds=-m.milliseconds,m.months=-m.months),m):{milliseconds:0,months:0}}function yc(l,h){return function(m,b){var x,E;return b!==null&&!isNaN(+b)&&(L(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),E=m,m=b,b=E),x=fe(m,b),bc(this,x,l),this}}function bc(l,h,m,b){var x=h._milliseconds,E=Oo(h._days),k=Oo(h._months);l.isValid()&&(b=b==null?!0:b,k&&Ql(l,Rs(l,"Month")+k*m),E&&jl(l,"Date",Rs(l,"Date")+E*m),x&&l._d.setTime(l._d.valueOf()+x*m),b&&t.updateOffset(l,E||k))}var mm=yc(1,"add"),ym=yc(-1,"subtract");function wc(l){return typeof l=="string"||l instanceof String}function bm(l){return C(l)||d(l)||wc(l)||c(l)||vm(l)||wm(l)||l===null||l===void 0}function wm(l){var h=s(l)&&!o(l),m=!1,b=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],x,E,k=b.length;for(x=0;x<k;x+=1)E=b[x],m=m||r(l,E);return h&&m}function vm(l){var h=n(l),m=!1;return h&&(m=l.filter(function(b){return!c(b)&&wc(l)}).length===0),h&&m}function xm(l){var h=s(l)&&!o(l),m=!1,b=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],x,E;for(x=0;x<b.length;x+=1)E=b[x],m=m||r(l,E);return h&&m}function _m(l,h){var m=l.diff(h,"days",!0);return m<-6?"sameElse":m<-1?"lastWeek":m<0?"lastDay":m<1?"sameDay":m<2?"nextDay":m<7?"nextWeek":"sameElse"}function Sm(l,h){arguments.length===1&&(arguments[0]?bm(arguments[0])?(l=arguments[0],h=void 0):xm(arguments[0])&&(h=arguments[0],l=void 0):(l=void 0,h=void 0));var m=l||pt(),b=Ro(m,this).startOf("day"),x=t.calendarFormat(this,b)||"sameElse",E=h&&(F(h[x])?h[x].call(this,m):h[x]);return this.format(E||this.localeData().calendar(x,this,pt(m)))}function Em(){return new T(this)}function Mm(l,h){var m=C(l)?l:pt(l);return this.isValid()&&m.isValid()?(h=le(h)||"millisecond",h==="millisecond"?this.valueOf()>m.valueOf():m.valueOf()<this.clone().startOf(h).valueOf()):!1}function Tm(l,h){var m=C(l)?l:pt(l);return this.isValid()&&m.isValid()?(h=le(h)||"millisecond",h==="millisecond"?this.valueOf()<m.valueOf():this.clone().endOf(h).valueOf()<m.valueOf()):!1}function Dm(l,h,m,b){var x=C(l)?l:pt(l),E=C(h)?h:pt(h);return this.isValid()&&x.isValid()&&E.isValid()?(b=b||"()",(b[0]==="("?this.isAfter(x,m):!this.isBefore(x,m))&&(b[1]===")"?this.isBefore(E,m):!this.isAfter(E,m))):!1}function km(l,h){var m=C(l)?l:pt(l),b;return this.isValid()&&m.isValid()?(h=le(h)||"millisecond",h==="millisecond"?this.valueOf()===m.valueOf():(b=m.valueOf(),this.clone().startOf(h).valueOf()<=b&&b<=this.clone().endOf(h).valueOf())):!1}function Cm(l,h){return this.isSame(l,h)||this.isAfter(l,h)}function Am(l,h){return this.isSame(l,h)||this.isBefore(l,h)}function Im(l,h,m){var b,x,E;if(!this.isValid())return NaN;if(b=Ro(l,this),!b.isValid())return NaN;switch(x=(b.utcOffset()-this.utcOffset())*6e4,h=le(h),h){case"year":E=qs(this,b)/12;break;case"month":E=qs(this,b);break;case"quarter":E=qs(this,b)/3;break;case"second":E=(this-b)/1e3;break;case"minute":E=(this-b)/6e4;break;case"hour":E=(this-b)/36e5;break;case"day":E=(this-b-x)/864e5;break;case"week":E=(this-b-x)/6048e5;break;default:E=this-b}return m?E:ce(E)}function qs(l,h){if(l.date()<h.date())return-qs(h,l);var m=(h.year()-l.year())*12+(h.month()-l.month()),b=l.clone().add(m,"months"),x,E;return h-b<0?(x=l.clone().add(m-1,"months"),E=(h-b)/(b-x)):(x=l.clone().add(m+1,"months"),E=(h-b)/(x-b)),-(m+E)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Pm(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Om(l){if(!this.isValid())return null;var h=l!==!0,m=h?this.clone().utc():this;return m.year()<0||m.year()>9999?z(m,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",z(m,"Z")):z(m,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Lm(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="",m,b,x,E;return this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z"),m="["+l+'("]',b=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",x="-MM-DD[T]HH:mm:ss.SSS",E=h+'[")]',this.format(m+b+x+E)}function Rm(l){l||(l=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var h=z(this,l);return this.localeData().postformat(h)}function Fm(l,h){return this.isValid()&&(C(l)&&l.isValid()||pt(l).isValid())?fe({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function Bm(l){return this.from(pt(),l)}function Wm(l,h){return this.isValid()&&(C(l)&&l.isValid()||pt(l).isValid())?fe({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()}function Nm(l){return this.to(pt(),l)}function vc(l){var h;return l===void 0?this._locale._abbr:(h=Fe(l),h!=null&&(this._locale=h),this)}var xc=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});function _c(){return this._locale}var Ks=1e3,sn=60*Ks,Xs=60*sn,Sc=(365*400+97)*24*Xs;function rn(l,h){return(l%h+h)%h}function Ec(l,h,m){return l<100&&l>=0?new Date(l+400,h,m)-Sc:new Date(l,h,m).valueOf()}function Mc(l,h,m){return l<100&&l>=0?Date.UTC(l+400,h,m)-Sc:Date.UTC(l,h,m)}function Hm(l){var h,m;if(l=le(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(m=this._isUTC?Mc:Ec,l){case"year":h=m(this.year(),0,1);break;case"quarter":h=m(this.year(),this.month()-this.month()%3,1);break;case"month":h=m(this.year(),this.month(),1);break;case"week":h=m(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":h=m(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":h=m(this.year(),this.month(),this.date());break;case"hour":h=this._d.valueOf(),h-=rn(h+(this._isUTC?0:this.utcOffset()*sn),Xs);break;case"minute":h=this._d.valueOf(),h-=rn(h,sn);break;case"second":h=this._d.valueOf(),h-=rn(h,Ks);break}return this._d.setTime(h),t.updateOffset(this,!0),this}function Ym(l){var h,m;if(l=le(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(m=this._isUTC?Mc:Ec,l){case"year":h=m(this.year()+1,0,1)-1;break;case"quarter":h=m(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":h=m(this.year(),this.month()+1,1)-1;break;case"week":h=m(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":h=m(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":h=m(this.year(),this.month(),this.date()+1)-1;break;case"hour":h=this._d.valueOf(),h+=Xs-rn(h+(this._isUTC?0:this.utcOffset()*sn),Xs)-1;break;case"minute":h=this._d.valueOf(),h+=sn-rn(h,sn)-1;break;case"second":h=this._d.valueOf(),h+=Ks-rn(h,Ks)-1;break}return this._d.setTime(h),t.updateOffset(this,!0),this}function Vm(){return this._d.valueOf()-(this._offset||0)*6e4}function zm(){return Math.floor(this.valueOf()/1e3)}function Um(){return new Date(this.valueOf())}function $m(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]}function jm(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}}function Gm(){return this.isValid()?this.toISOString():null}function qm(){return v(this)}function Km(){return f({},y(this))}function Xm(){return y(this).overflow}function Zm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),W("N",Bo),W("NN",Bo),W("NNN",Bo),W("NNNN",ly),W("NNNNN",cy),nt(["N","NN","NNN","NNNN","NNNNN"],function(l,h,m,b){var x=m._locale.erasParse(l,b,m._strict);x?y(m).era=x:y(m).invalidEra=l}),W("y",en),W("yy",en),W("yyy",en),W("yyyy",en),W("yo",dy),nt(["y","yy","yyy","yyyy"],Nt),nt(["yo"],function(l,h,m,b){var x;m._locale._eraYearOrdinalRegex&&(x=l.match(m._locale._eraYearOrdinalRegex)),m._locale.eraYearOrdinalParse?h[Nt]=m._locale.eraYearOrdinalParse(l,x):h[Nt]=parseInt(l,10)});function Jm(l,h){var m,b,x,E=this._eras||Fe("en")._eras;for(m=0,b=E.length;m<b;++m){switch(typeof E[m].since){case"string":x=t(E[m].since).startOf("day"),E[m].since=x.valueOf();break}switch(typeof E[m].until){case"undefined":E[m].until=1/0;break;case"string":x=t(E[m].until).startOf("day").valueOf(),E[m].until=x.valueOf();break}}return E}function Qm(l,h,m){var b,x,E=this.eras(),k,Y,j;for(l=l.toUpperCase(),b=0,x=E.length;b<x;++b)if(k=E[b].name.toUpperCase(),Y=E[b].abbr.toUpperCase(),j=E[b].narrow.toUpperCase(),m)switch(h){case"N":case"NN":case"NNN":if(Y===l)return E[b];break;case"NNNN":if(k===l)return E[b];break;case"NNNNN":if(j===l)return E[b];break}else if([k,Y,j].indexOf(l)>=0)return E[b]}function ty(l,h){var m=l.since<=l.until?1:-1;return h===void 0?t(l.since).year():t(l.since).year()+(h-l.offset)*m}function ey(){var l,h,m,b=this.localeData().eras();for(l=0,h=b.length;l<h;++l)if(m=this.clone().startOf("day").valueOf(),b[l].since<=m&&m<=b[l].until||b[l].until<=m&&m<=b[l].since)return b[l].name;return""}function iy(){var l,h,m,b=this.localeData().eras();for(l=0,h=b.length;l<h;++l)if(m=this.clone().startOf("day").valueOf(),b[l].since<=m&&m<=b[l].until||b[l].until<=m&&m<=b[l].since)return b[l].narrow;return""}function ny(){var l,h,m,b=this.localeData().eras();for(l=0,h=b.length;l<h;++l)if(m=this.clone().startOf("day").valueOf(),b[l].since<=m&&m<=b[l].until||b[l].until<=m&&m<=b[l].since)return b[l].abbr;return""}function sy(){var l,h,m,b,x=this.localeData().eras();for(l=0,h=x.length;l<h;++l)if(m=x[l].since<=x[l].until?1:-1,b=this.clone().startOf("day").valueOf(),x[l].since<=b&&b<=x[l].until||x[l].until<=b&&b<=x[l].since)return(this.year()-t(x[l].since).year())*m+x[l].offset;return this.year()}function ry(l){return r(this,"_erasNameRegex")||Wo.call(this),l?this._erasNameRegex:this._erasRegex}function oy(l){return r(this,"_erasAbbrRegex")||Wo.call(this),l?this._erasAbbrRegex:this._erasRegex}function ay(l){return r(this,"_erasNarrowRegex")||Wo.call(this),l?this._erasNarrowRegex:this._erasRegex}function Bo(l,h){return h.erasAbbrRegex(l)}function ly(l,h){return h.erasNameRegex(l)}function cy(l,h){return h.erasNarrowRegex(l)}function dy(l,h){return h._eraYearOrdinalRegex||en}function Wo(){var l=[],h=[],m=[],b=[],x,E,k=this.eras();for(x=0,E=k.length;x<E;++x)h.push(ie(k[x].name)),l.push(ie(k[x].abbr)),m.push(ie(k[x].narrow)),b.push(ie(k[x].name)),b.push(ie(k[x].abbr)),b.push(ie(k[x].narrow));this._erasRegex=new RegExp("^("+b.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+h.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+m.join("|")+")","i")}N(0,["gg",2],0,function(){return this.weekYear()%100}),N(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Zs(l,h){N(0,[l,l.length],0,h)}Zs("gggg","weekYear"),Zs("ggggg","weekYear"),Zs("GGGG","isoWeekYear"),Zs("GGGGG","isoWeekYear"),Bt("weekYear","gg"),Bt("isoWeekYear","GG"),Wt("weekYear",1),Wt("isoWeekYear",1),W("G",Ns),W("g",Ns),W("GG",gt,ee),W("gg",gt,ee),W("GGGG",So,_o),W("gggg",So,_o),W("GGGGG",Ws,Fs),W("ggggg",Ws,Fs),Un(["gggg","ggggg","GGGG","GGGGG"],function(l,h,m,b){h[b.substr(0,2)]=G(l)}),Un(["gg","GG"],function(l,h,m,b){h[b]=t.parseTwoDigitYear(l)});function hy(l){return Tc.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function uy(l){return Tc.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)}function fy(){return Re(this.year(),1,4)}function gy(){return Re(this.isoWeekYear(),1,4)}function py(){var l=this.localeData()._week;return Re(this.year(),l.dow,l.doy)}function my(){var l=this.localeData()._week;return Re(this.weekYear(),l.dow,l.doy)}function Tc(l,h,m,b,x){var E;return l==null?Gn(this,b,x).year:(E=Re(l,b,x),h>E&&(h=E),yy.call(this,l,h,m,b,x))}function yy(l,h,m,b,x){var E=nc(l,h,m,b,x),k=jn(E.year,0,E.dayOfYear);return this.year(k.getUTCFullYear()),this.month(k.getUTCMonth()),this.date(k.getUTCDate()),this}N("Q",0,"Qo","quarter"),Bt("quarter","Q"),Wt("quarter",7),W("Q",Gl),nt("Q",function(l,h){h[Oe]=(G(l)-1)*3});function by(l){return l==null?Math.ceil((this.month()+1)/3):this.month((l-1)*3+this.month()%3)}N("D",["DD",2],"Do","date"),Bt("date","D"),Wt("date",9),W("D",gt),W("DD",gt,ee),W("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),nt(["D","DD"],we),nt("Do",function(l,h){h[we]=G(l.match(gt)[0])});var Dc=tn("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),Bt("dayOfYear","DDD"),Wt("dayOfYear",4),W("DDD",Bs),W("DDDD",ql),nt(["DDD","DDDD"],function(l,h,m){m._dayOfYear=G(l)});function wy(l){var h=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")}N("m",["mm",2],0,"minute"),Bt("minute","m"),Wt("minute",14),W("m",gt),W("mm",gt,ee),nt(["m","mm"],ue);var vy=tn("Minutes",!1);N("s",["ss",2],0,"second"),Bt("second","s"),Wt("second",15),W("s",gt),W("ss",gt,ee),nt(["s","ss"],Le);var xy=tn("Seconds",!1);N("S",0,0,function(){return~~(this.millisecond()/100)}),N(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,function(){return this.millisecond()*10}),N(0,["SSSSS",5],0,function(){return this.millisecond()*100}),N(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),N(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),N(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),N(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Bt("millisecond","ms"),Wt("millisecond",16),W("S",Bs,Gl),W("SS",Bs,ee),W("SSS",Bs,ql);var ei,kc;for(ei="SSSS";ei.length<=9;ei+="S")W(ei,en);function _y(l,h){h[Si]=G(("0."+l)*1e3)}for(ei="S";ei.length<=9;ei+="S")nt(ei,_y);kc=tn("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");function Sy(){return this._isUTC?"UTC":""}function Ey(){return this._isUTC?"Coordinated Universal Time":""}var P=T.prototype;P.add=mm,P.calendar=Sm,P.clone=Em,P.diff=Im,P.endOf=Ym,P.format=Rm,P.from=Fm,P.fromNow=Bm,P.to=Wm,P.toNow=Nm,P.get=Tg,P.invalidAt=Xm,P.isAfter=Mm,P.isBefore=Tm,P.isBetween=Dm,P.isSame=km,P.isSameOrAfter=Cm,P.isSameOrBefore=Am,P.isValid=qm,P.lang=xc,P.locale=vc,P.localeData=_c,P.max=qp,P.min=Gp,P.parsingFlags=Km,P.set=Dg,P.startOf=Hm,P.subtract=ym,P.toArray=$m,P.toObject=jm,P.toDate=Um,P.toISOString=Om,P.inspect=Lm,typeof Symbol!="undefined"&&Symbol.for!=null&&(P[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),P.toJSON=Gm,P.toString=Pm,P.unix=zm,P.valueOf=Vm,P.creationData=Zm,P.eraName=ey,P.eraNarrow=iy,P.eraAbbr=ny,P.eraYear=sy,P.year=ic,P.isLeapYear=jg,P.weekYear=hy,P.isoWeekYear=uy,P.quarter=P.quarters=by,P.month=tc,P.daysInMonth=zg,P.week=P.weeks=Jg,P.isoWeek=P.isoWeeks=Qg,P.weeksInYear=py,P.weeksInWeekYear=my,P.isoWeeksInYear=fy,P.isoWeeksInISOWeekYear=gy,P.date=Dc,P.day=P.days=up,P.weekday=fp,P.isoWeekday=gp,P.dayOfYear=wy,P.hour=P.hours=xp,P.minute=P.minutes=vy,P.second=P.seconds=xy,P.millisecond=P.milliseconds=kc,P.utcOffset=nm,P.utc=rm,P.local=om,P.parseZone=am,P.hasAlignedHourOffset=lm,P.isDST=cm,P.isLocal=hm,P.isUtcOffset=um,P.isUtc=pc,P.isUTC=pc,P.zoneAbbr=Sy,P.zoneName=Ey,P.dates=I("dates accessor is deprecated. Use date instead.",Dc),P.months=I("months accessor is deprecated. Use month instead",tc),P.years=I("years accessor is deprecated. Use year instead",ic),P.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",sm),P.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",dm);function My(l){return pt(l*1e3)}function Ty(){return pt.apply(null,arguments).parseZone()}function Cc(l){return l}var tt=X.prototype;tt.calendar=ft,tt.longDateFormat=te,tt.invalidDate=ae,tt.ordinal=vo,tt.preparse=Cc,tt.postformat=Cc,tt.relativeTime=Sg,tt.pastFuture=Eg,tt.set=V,tt.eras=Jm,tt.erasParse=Qm,tt.erasConvertYear=ty,tt.erasAbbrRegex=oy,tt.erasNameRegex=ry,tt.erasNarrowRegex=ay,tt.months=Ng,tt.monthsShort=Hg,tt.monthsParse=Vg,tt.monthsRegex=$g,tt.monthsShortRegex=Ug,tt.week=qg,tt.firstDayOfYear=Zg,tt.firstDayOfWeek=Xg,tt.weekdays=ap,tt.weekdaysMin=cp,tt.weekdaysShort=lp,tt.weekdaysParse=hp,tt.weekdaysRegex=pp,tt.weekdaysShortRegex=mp,tt.weekdaysMinRegex=yp,tt.isPM=wp,tt.meridiem=_p;function Js(l,h,m,b){var x=Fe(),E=g().set(b,h);return x[m](E,l)}function Ac(l,h,m){if(c(l)&&(h=l,l=void 0),l=l||"",h!=null)return Js(l,h,m,"month");var b,x=[];for(b=0;b<12;b++)x[b]=Js(l,b,m,"month");return x}function No(l,h,m,b){typeof l=="boolean"?(c(h)&&(m=h,h=void 0),h=h||""):(h=l,m=h,l=!1,c(h)&&(m=h,h=void 0),h=h||"");var x=Fe(),E=l?x._week.dow:0,k,Y=[];if(m!=null)return Js(h,(m+E)%7,b,"day");for(k=0;k<7;k++)Y[k]=Js(h,(k+E)%7,b,"day");return Y}function Dy(l,h){return Ac(l,h,"months")}function ky(l,h){return Ac(l,h,"monthsShort")}function Cy(l,h,m){return No(l,h,m,"weekdays")}function Ay(l,h,m){return No(l,h,m,"weekdaysShort")}function Iy(l,h,m){return No(l,h,m,"weekdaysMin")}ti("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,m=G(l%100/10)===1?"th":h===1?"st":h===2?"nd":h===3?"rd":"th";return l+m}}),t.lang=I("moment.lang is deprecated. Use moment.locale instead.",ti),t.langData=I("moment.langData is deprecated. Use moment.localeData instead.",Fe);var Be=Math.abs;function Py(){var l=this._data;return this._milliseconds=Be(this._milliseconds),this._days=Be(this._days),this._months=Be(this._months),l.milliseconds=Be(l.milliseconds),l.seconds=Be(l.seconds),l.minutes=Be(l.minutes),l.hours=Be(l.hours),l.months=Be(l.months),l.years=Be(l.years),this}function Ic(l,h,m,b){var x=fe(h,m);return l._milliseconds+=b*x._milliseconds,l._days+=b*x._days,l._months+=b*x._months,l._bubble()}function Oy(l,h){return Ic(this,l,h,1)}function Ly(l,h){return Ic(this,l,h,-1)}function Pc(l){return l<0?Math.floor(l):Math.ceil(l)}function Ry(){var l=this._milliseconds,h=this._days,m=this._months,b=this._data,x,E,k,Y,j;return l>=0&&h>=0&&m>=0||l<=0&&h<=0&&m<=0||(l+=Pc(Ho(m)+h)*864e5,h=0,m=0),b.milliseconds=l%1e3,x=ce(l/1e3),b.seconds=x%60,E=ce(x/60),b.minutes=E%60,k=ce(E/60),b.hours=k%24,h+=ce(k/24),j=ce(Oc(h)),m+=j,h-=Pc(Ho(j)),Y=ce(m/12),m%=12,b.days=h,b.months=m,b.years=Y,this}function Oc(l){return l*4800/146097}function Ho(l){return l*146097/4800}function Fy(l){if(!this.isValid())return NaN;var h,m,b=this._milliseconds;if(l=le(l),l==="month"||l==="quarter"||l==="year")switch(h=this._days+b/864e5,m=this._months+Oc(h),l){case"month":return m;case"quarter":return m/3;case"year":return m/12}else switch(h=this._days+Math.round(Ho(this._months)),l){case"week":return h/7+b/6048e5;case"day":return h+b/864e5;case"hour":return h*24+b/36e5;case"minute":return h*1440+b/6e4;case"second":return h*86400+b/1e3;case"millisecond":return Math.floor(h*864e5)+b;default:throw new Error("Unknown unit "+l)}}function By(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+G(this._months/12)*31536e6:NaN}function We(l){return function(){return this.as(l)}}var Wy=We("ms"),Ny=We("s"),Hy=We("m"),Yy=We("h"),Vy=We("d"),zy=We("w"),Uy=We("M"),$y=We("Q"),jy=We("y");function Gy(){return fe(this)}function qy(l){return l=le(l),this.isValid()?this[l+"s"]():NaN}function Mi(l){return function(){return this.isValid()?this._data[l]:NaN}}var Ky=Mi("milliseconds"),Xy=Mi("seconds"),Zy=Mi("minutes"),Jy=Mi("hours"),Qy=Mi("days"),tb=Mi("months"),eb=Mi("years");function ib(){return ce(this.days()/7)}var Ne=Math.round,on={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function nb(l,h,m,b,x){return x.relativeTime(h||1,!!m,l,b)}function sb(l,h,m,b){var x=fe(l).abs(),E=Ne(x.as("s")),k=Ne(x.as("m")),Y=Ne(x.as("h")),j=Ne(x.as("d")),st=Ne(x.as("M")),Yt=Ne(x.as("w")),He=Ne(x.as("y")),ii=E<=m.ss&&["s",E]||E<m.s&&["ss",E]||k<=1&&["m"]||k<m.m&&["mm",k]||Y<=1&&["h"]||Y<m.h&&["hh",Y]||j<=1&&["d"]||j<m.d&&["dd",j];return m.w!=null&&(ii=ii||Yt<=1&&["w"]||Yt<m.w&&["ww",Yt]),ii=ii||st<=1&&["M"]||st<m.M&&["MM",st]||He<=1&&["y"]||["yy",He],ii[2]=h,ii[3]=+l>0,ii[4]=b,nb.apply(null,ii)}function rb(l){return l===void 0?Ne:typeof l=="function"?(Ne=l,!0):!1}function ob(l,h){return on[l]===void 0?!1:h===void 0?on[l]:(on[l]=h,l==="s"&&(on.ss=h-1),!0)}function ab(l,h){if(!this.isValid())return this.localeData().invalidDate();var m=!1,b=on,x,E;return typeof l=="object"&&(h=l,l=!1),typeof l=="boolean"&&(m=l),typeof h=="object"&&(b=Object.assign({},on,h),h.s!=null&&h.ss==null&&(b.ss=h.s-1)),x=this.localeData(),E=sb(this,!m,b,x),m&&(E=x.pastFuture(+this,E)),x.postformat(E)}var Yo=Math.abs;function an(l){return(l>0)-(l<0)||+l}function Qs(){if(!this.isValid())return this.localeData().invalidDate();var l=Yo(this._milliseconds)/1e3,h=Yo(this._days),m=Yo(this._months),b,x,E,k,Y=this.asSeconds(),j,st,Yt,He;return Y?(b=ce(l/60),x=ce(b/60),l%=60,b%=60,E=ce(m/12),m%=12,k=l?l.toFixed(3).replace(/\.?0+$/,""):"",j=Y<0?"-":"",st=an(this._months)!==an(Y)?"-":"",Yt=an(this._days)!==an(Y)?"-":"",He=an(this._milliseconds)!==an(Y)?"-":"",j+"P"+(E?st+E+"Y":"")+(m?st+m+"M":"")+(h?Yt+h+"D":"")+(x||b||l?"T":"")+(x?He+x+"H":"")+(b?He+b+"M":"")+(l?He+k+"S":"")):"P0D"}var Q=js.prototype;Q.isValid=Qp,Q.abs=Py,Q.add=Oy,Q.subtract=Ly,Q.as=Fy,Q.asMilliseconds=Wy,Q.asSeconds=Ny,Q.asMinutes=Hy,Q.asHours=Yy,Q.asDays=Vy,Q.asWeeks=zy,Q.asMonths=Uy,Q.asQuarters=$y,Q.asYears=jy,Q.valueOf=By,Q._bubble=Ry,Q.clone=Gy,Q.get=qy,Q.milliseconds=Ky,Q.seconds=Xy,Q.minutes=Zy,Q.hours=Jy,Q.days=Qy,Q.weeks=ib,Q.months=tb,Q.years=eb,Q.humanize=ab,Q.toISOString=Qs,Q.toString=Qs,Q.toJSON=Qs,Q.locale=vc,Q.localeData=_c,Q.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qs),Q.lang=xc,N("X",0,0,"unix"),N("x",0,0,"valueOf"),W("x",Ns),W("X",Cg),nt("X",function(l,h,m){m._d=new Date(parseFloat(l)*1e3)}),nt("x",function(l,h,m){m._d=new Date(G(l))});return t.version="2.29.4",i(pt),t.fn=P,t.min=Kp,t.max=Xp,t.now=Zp,t.utc=g,t.unix=My,t.months=Dy,t.isDate=d,t.locale=ti,t.invalid=_,t.duration=fe,t.isMoment=C,t.weekdays=Cy,t.parseZone=Ty,t.localeData=Fe,t.isDuration=Gs,t.monthsShort=ky,t.weekdaysMin=Iy,t.defineLocale=ko,t.updateLocale=Tp,t.locales=Dp,t.weekdaysShort=Ay,t.normalizeUnits=le,t.relativeTimeRounding=rb,t.relativeTimeThreshold=ob,t.calendarFormat=_m,t.prototype=P,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t})});function ns(e){return e+.5|0}function is(e){return oi(ns(e*2.55),0,255)}function ai(e){return oi(ns(e*255),0,255)}function Ue(e){return oi(ns(e/2.55)/100,0,1)}function Zc(e){return oi(ns(e*100),0,100)}function vb(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&de[e[1]]*17,g:255&de[e[2]]*17,b:255&de[e[3]]*17,a:t===5?de[e[4]]*17:255}:(t===7||t===9)&&(i={r:de[e[1]]<<4|de[e[2]],g:de[e[3]]<<4|de[e[4]],b:de[e[5]]<<4|de[e[6]],a:t===9?de[e[7]]<<4|de[e[8]]:255})),i}function _b(e){var t=wb(e)?yb:bb;return e?"#"+t(e.r)+t(e.g)+t(e.b)+xb(e.a,t):void 0}function ed(e,t,i){let n=t*Math.min(i,1-i),s=(r,o=(r+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Eb(e,t,i){let n=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Mb(e,t,i){let n=ed(e,1,.5),s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function Tb(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function aa(e){let i=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(i,n,s),o=Math.min(i,n,s),a=(r+o)/2,c,d,u;return r!==o&&(u=r-o,d=a>.5?u/(2-r-o):u/(r+o),c=Tb(i,n,s,u,r),c=c*60+.5),[c|0,d||0,a]}function la(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(ai)}function ca(e,t,i){return la(ed,e,t,i)}function Db(e,t,i){return la(Mb,e,t,i)}function kb(e,t,i){return la(Eb,e,t,i)}function id(e){return(e%360+360)%360}function Cb(e){let t=Sb.exec(e),i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?is(+t[5]):ai(+t[5]));let s=id(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=Db(s,r,o):t[1]==="hsv"?n=kb(s,r,o):n=ca(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}function Ab(e,t){var i=aa(e);i[0]=id(i[0]+t),i=ca(i),e.r=i[0],e.g=i[1],e.b=i[2]}function Ib(e){if(!e)return;let t=aa(e),i=t[0],n=Zc(t[1]),s=Zc(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${Ue(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}function Pb(){let e={},t=Object.keys(Qc),i=Object.keys(Jc),n,s,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],s=0;s<i.length;s++)r=i[s],a=a.replace(r,Jc[r]);r=parseInt(Qc[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}function Ob(e){mr||(mr=Pb(),mr.transparent=[0,0,0,0]);let t=mr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function Rb(e){let t=Lb.exec(e),i=255,n,s,r;if(t){if(t[7]!==n){let o=+t[7];i=t[8]?is(o):oi(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?is(n):oi(n,0,255)),s=255&(t[4]?is(s):oi(s,0,255)),r=255&(t[6]?is(r):oi(r,0,255)),{r:n,g:s,b:r,a:i}}}function Fb(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ue(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}function Bb(e,t,i){let n=un(Ue(e.r)),s=un(Ue(e.g)),r=un(Ue(e.b));return{r:ai(ra(n+i*(un(Ue(t.r))-n))),g:ai(ra(s+i*(un(Ue(t.g))-s))),b:ai(ra(r+i*(un(Ue(t.b))-r))),a:e.a+i*(t.a-e.a)}}function yr(e,t,i){if(e){let n=aa(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=ca(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function nd(e,t){return e&&Object.assign(t||{},e)}function td(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ai(e[3]))):(t=nd(e,{r:0,g:0,b:0,a:1}),t.a=ai(t.a)),t}function Wb(e){return e.charAt(0)==="r"?Rb(e):Cb(e)}var oi,de,oa,yb,bb,pr,wb,xb,Sb,Jc,Qc,mr,Lb,ra,un,li,sd=tr(()=>{oi=(e,t,i)=>Math.max(Math.min(e,i),t);de={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},oa=[..."0123456789ABCDEF"],yb=e=>oa[e&15],bb=e=>oa[(e&240)>>4]+oa[e&15],pr=e=>(e&240)>>4===(e&15),wb=e=>pr(e.r)&&pr(e.g)&&pr(e.b)&&pr(e.a);xb=(e,t)=>e<255?t(e):"";Sb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;Jc={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Qc={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};Lb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;ra=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,un=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);li=class{constructor(t){if(t instanceof li)return t;let i=typeof t,n;i==="object"?n=td(t):i==="string"&&(n=vb(t)||Ob(t)||Wb(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=nd(this._rgb);return t&&(t.a=Ue(t.a)),t}set rgb(t){this._rgb=td(t)}rgbString(){return this._valid?Fb(this._rgb):void 0}hexString(){return this._valid?_b(this._rgb):void 0}hslString(){return this._valid?Ib(this._rgb):void 0}mix(t,i){if(t){let n=this.rgb,s=t.rgb,r,o=i===r?.5:i,a=2*o-1,c=n.a-s.a,d=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-d,n.r=255&d*n.r+r*s.r+.5,n.g=255&d*n.g+r*s.g+.5,n.b=255&d*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=Bb(this._rgb,t._rgb,i)),this}clone(){return new li(this.rgb)}alpha(t){return this._rgb.a=ai(t),this}clearer(t){let i=this._rgb;return i.a*=1-t,this}greyscale(){let t=this._rgb,i=ns(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){let i=this._rgb;return i.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yr(this._rgb,2,t),this}darken(t){return yr(this._rgb,2,-t),this}saturate(t){return yr(this._rgb,1,t),this}desaturate(t){return yr(this._rgb,1,-t),this}rotate(t){return Ab(this._rgb,t),this}}});function Ee(){}function q(e){return e==null}function lt(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function K(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Gt(e,t){return wt(e)?e:t}function $(e,t){return typeof e=="undefined"?t:e}function ot(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function it(e,t,i,n){let s,r,o;if(lt(e))if(r=e.length,n)for(s=r-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<r;s++)t.call(i,e[s],s);else if(K(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])}function os(e,t){let i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],r=t[i],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function _r(e){if(lt(e))return e.map(_r);if(K(e)){let t=Object.create(null),i=Object.keys(e),n=i.length,s=0;for(;s<n;++s)t[i[s]]=_r(e[i[s]]);return t}return e}function yd(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Nb(e,t,i,n){if(!yd(e))return;let s=t[e],r=i[e];K(s)&&K(r)?gn(s,r,n):t[e]=_r(r)}function gn(e,t,i){let n=lt(t)?t:[t],s=n.length;if(!K(e))return e;i=i||{};let r=i.merger||Nb,o;for(let a=0;a<s;++a){if(o=n[a],!K(o))continue;let c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)r(c[d],e,o,i)}return e}function mn(e,t){return gn(e,t,{merger:Hb})}function Hb(e,t,i){if(!yd(e))return;let n=t[e],s=i[e];K(n)&&K(s)?mn(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=_r(s))}function Yb(e){let t=e.split("."),i=[],n="";for(let s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Vb(e){let t=Yb(e);return i=>{for(let n of t){if(n==="")break;i=i&&i[n]}return i}}function Ge(e,t){return(rd[t]||(rd[t]=Vb(t)))(e)}function Tr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function bd(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}function bn(e,t,i){return Math.abs(e-t)<i}function pa(e){let t=Math.round(e);e=bn(e,t,e/1e3)?t:e;let i=Math.pow(10,Math.floor(je(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function wd(e){let t=[],i=Math.sqrt(e),n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,r)=>s-r).pop(),t}function $b(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Bi(e){return!$b(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function vd(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}function ma(e,t,i){let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function he(e){return e*(ct/180)}function Dr(e){return e*(180/ct)}function ya(e){if(!wt(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function ba(e,t){let i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*ct&&(r+=dt),{angle:r,distance:s}}function Er(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jb(e,t){return(e-t+zb)%dt-ct}function jt(e){return(e%dt+dt)%dt}function wn(e,t,i,n){let s=jt(e),r=jt(t),o=jt(i),a=jt(r-s),c=jt(o-s),d=jt(s-r),u=jt(s-o);return s===r||s===o||n&&r===o||a>c&&d<u}function Dt(e,t,i){return Math.max(t,Math.min(i,e))}function xd(e){return Dt(e,-32768,32767)}function Me(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function kr(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}function Sd(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}function Md(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ed.forEach(i=>{let n="_onData"+Tr(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){let o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function wa(e,t){let i=e._chartjs;if(!i)return;let n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(Ed.forEach(r=>{delete e[r]}),delete e._chartjs)}function va(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}function _a(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,xa.call(window,()=>{n=!1,e.apply(t,i)}))}}function Td(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}function Sa(e,t,i){let n=t.length,s=0,r=n;if(e._sorted){let{iScale:o,vScale:a,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:g,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(s=Math.min(_e(c,u,f).lo,i?n:_e(t,u,o.getPixelForValue(f)).lo),d){let w=c.slice(0,s+1).reverse().findIndex(v=>!q(v[a.axis]));s-=Math.max(0,w)}s=Dt(s,0,n-1)}if(y){let w=Math.max(_e(c,o.axis,g,!0).hi+1,i?0:_e(t,u,o.getPixelForValue(g),!0).hi+1);if(d){let v=c.slice(w-1).findIndex(_=>!q(_[a.axis]));w+=Math.max(0,v)}r=Dt(w,s,n)-s}else r=n-s}return{start:s,count:r}}function Ea(e){let{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;let r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),r}function Ma(e){if(e&&typeof e=="object"){let t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ta(e){return Ma(e)?e:new li(e)}function da(e){return Ma(e)?e:new li(e).saturate(.5).darken(.1).hexString()}function Kb(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:qb},numbers:{type:"number",properties:Gb}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Xb(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}function Zb(e,t){t=t||{};let i=e+JSON.stringify(t),n=cd.get(i);return n||(n=new Intl.NumberFormat(e,t),cd.set(i,n)),n}function vn(e,t,i){return Zb(t,i).format(e)}function Jb(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}function Qb(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}function ss(e,t){if(!t)return e;let i=t.split(".");for(let n=0,s=i.length;n<s;++n){let r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function ha(e,t,i){return typeof t=="string"?gn(ss(e,t),i):gn(ss(e,""),t)}function t0(e){return!e||q(e.size)||q(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function rs(e,t,i,n,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n}function Cd(e,t,i,n){n=n||{};let s=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},r=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let o=0,a=i.length,c,d,u,f,g;for(c=0;c<a;c++)if(f=i[c],f!=null&&!lt(f))o=rs(e,s,r,o,f);else if(lt(f))for(d=0,u=f.length;d<u;d++)g=f[d],g!=null&&!lt(g)&&(o=rs(e,s,r,o,g));e.restore();let p=r.length/2;if(p>i.length){for(c=0;c<p;c++)delete s[r[c]];r.splice(0,p)}return o}function hi(e,t,i){let n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function Da(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Ir(e,t,i,n){ka(e,t,i,n,null)}function ka(e,t,i,n,s){let r,o,a,c,d,u,f,g,p=t.pointStyle,y=t.rotation,w=t.radius,v=(y||0)*Ub;if(p&&typeof p=="object"&&(r=p.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(v),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),p){default:s?e.ellipse(i,n,s/2,w,0,0,dt):e.arc(i,n,w,0,dt),e.closePath();break;case"triangle":u=s?s/2:w,e.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*w),v+=od,e.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*w),v+=od,e.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*w),e.closePath();break;case"rectRounded":d=w*.516,c=w-d,o=Math.cos(v+Li)*c,f=Math.cos(v+Li)*(s?s/2-d:c),a=Math.sin(v+Li)*c,g=Math.sin(v+Li)*(s?s/2-d:c),e.arc(i-f,n-a,d,v-ct,v-vt),e.arc(i+g,n-o,d,v-vt,v),e.arc(i+f,n+a,d,v,v+vt),e.arc(i-g,n+o,d,v+vt,v+ct),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*w,u=s?s/2:c,e.rect(i-u,n-c,2*u,2*c);break}v+=Li;case"rectRot":f=Math.cos(v)*(s?s/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,g=Math.sin(v)*(s?s/2:w),e.moveTo(i-f,n-a),e.lineTo(i+g,n-o),e.lineTo(i+f,n+a),e.lineTo(i-g,n+o),e.closePath();break;case"crossRot":v+=Li;case"cross":f=Math.cos(v)*(s?s/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,g=Math.sin(v)*(s?s/2:w),e.moveTo(i-f,n-a),e.lineTo(i+f,n+a),e.moveTo(i+g,n-o),e.lineTo(i-g,n+o);break;case"star":f=Math.cos(v)*(s?s/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,g=Math.sin(v)*(s?s/2:w),e.moveTo(i-f,n-a),e.lineTo(i+f,n+a),e.moveTo(i+g,n-o),e.lineTo(i-g,n+o),v+=Li,f=Math.cos(v)*(s?s/2:w),o=Math.cos(v)*w,a=Math.sin(v)*w,g=Math.sin(v)*(s?s/2:w),e.moveTo(i-f,n-a),e.lineTo(i+f,n+a),e.moveTo(i+g,n-o),e.lineTo(i-g,n+o);break;case"line":o=s?s/2:Math.cos(v)*w,a=Math.sin(v)*w,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(v)*(s?s/2:w),n+Math.sin(v)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Se(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function as(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ls(e){e.restore()}function Ad(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){let r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Id(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function e0(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),q(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function i0(e,t,i,n,s){if(s.strikethrough||s.underline){let r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,c=i-r.actualBoundingBoxAscent,d=i+r.actualBoundingBoxDescent,u=s.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function n0(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function ui(e,t,i,n,s,r={}){let o=lt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",c,d;for(e.save(),e.font=s.string,e0(e,r),c=0;c<o.length;++c)d=o[c],r.backdrop&&n0(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),q(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(d,i,n,r.maxWidth)),e.fillText(d,i,n,r.maxWidth),i0(e,i,n,d,r),n+=Number(s.lineHeight);e.restore()}function _n(e,t){let{x:i,y:n,w:s,h:r,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,1.5*ct,ct,!0),e.lineTo(i,n+r-o.bottomLeft),e.arc(i+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,ct,vt,!0),e.lineTo(i+s-o.bottomRight,n+r),e.arc(i+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,vt,0,!0),e.lineTo(i+s,n+o.topRight),e.arc(i+s-o.topRight,n+o.topRight,o.topRight,0,-vt,!0),e.lineTo(i+o.topLeft,n)}function o0(e,t){let i=(""+e).match(s0);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}function Pr(e,t){let i={},n=K(t),s=n?Object.keys(t):t,r=K(e)?n?o=>$(e[o],e[t[o]]):o=>e[o]:()=>e;for(let o of s)i[o]=a0(r(o));return i}function Ca(e){return Pr(e,{top:"y",right:"x",bottom:"y",left:"x"})}function fi(e){return Pr(e,["topLeft","topRight","bottomLeft","bottomRight"])}function It(e){let t=Ca(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _t(e,t){e=e||{},t=t||ht.font;let i=$(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=$(e.style,t.style);n&&!(""+n).match(r0)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let s={family:$(e.family,t.family),lineHeight:o0($(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:$(e.weight,t.weight),string:""};return s.string=t0(s),s}function Sn(e,t,i,n){let s=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&lt(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function Pd(e,t,i){let{min:n,max:s}=e,r=fa(t,(s-n)/2),o=(a,c)=>i&&a===0?0:a+c;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function qe(e,t){return Object.assign(Object.create(e),t)}function Or(e,t=[""],i,n,s=()=>e[0]){let r=i||e;typeof n=="undefined"&&(n=Rd("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:a=>Or([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete e[0][c],!0},get(a,c){return Od(a,c,()=>p0(c,t,e,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,c){return hd(a).includes(c)},ownKeys(a){return hd(a)},set(a,c,d){let u=a._storage||(a._storage=s());return a[c]=u[c]=d,delete a._keys,!0}})}function Fi(e,t,i,n){let s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:Aa(e,n),setContext:r=>Fi(e,r,i,n),override:r=>Fi(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return Od(r,o,()=>c0(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function Aa(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:$e(i)?i:()=>i,isIndexable:$e(n)?n:()=>n}}function Od(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];let n=i();return e[t]=n,n}function c0(e,t,i){let{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=e,a=n[t];return $e(a)&&o.isScriptable(t)&&(a=d0(t,a,e,i)),lt(a)&&a.length&&(a=h0(t,a,e,o.isIndexable)),Ia(t,a)&&(a=Fi(a,s,r&&r[t],o)),a}function d0(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let c=t(r,o||n);return a.delete(e),Ia(e,c)&&(c=Pa(s._scopes,s,e,c)),c}function h0(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index!="undefined"&&n(e))return t[r.index%t.length];if(K(t[0])){let c=t,d=s._scopes.filter(u=>u!==c);t=[];for(let u of c){let f=Pa(d,s,e,u);t.push(Fi(f,r,o&&o[e],a))}}return t}function Ld(e,t,i){return $e(e)?e(t,i):e}function f0(e,t,i,n,s){for(let r of t){let o=u0(i,r);if(o){e.add(o);let a=Ld(o._fallback,i,s);if(typeof a!="undefined"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n!="undefined"&&i!==n)return null}return!1}function Pa(e,t,i,n){let s=t._rootScopes,r=Ld(t._fallback,i,n),o=[...e,...s],a=new Set;a.add(n);let c=dd(a,o,i,r||i,n);return c===null||typeof r!="undefined"&&r!==i&&(c=dd(a,o,r,c,n),c===null)?!1:Or(Array.from(a),[""],s,r,()=>g0(t,i,n))}function dd(e,t,i,n,s){for(;i;)i=f0(e,t,i,n,s);return i}function g0(e,t,i){let n=e._getTarget();t in n||(n[t]={});let s=n[t];return lt(s)&&K(i)?i:s||{}}function p0(e,t,i,n){let s;for(let r of t)if(s=Rd(l0(r,e),i),typeof s!="undefined")return Ia(e,s)?Pa(i,n,e,s):s}function Rd(e,t){for(let i of t){if(!i)continue;let n=i[e];if(typeof n!="undefined")return n}}function hd(e){let t=e._keys;return t||(t=e._keys=m0(e._scopes)),t}function m0(e){let t=new Set;for(let i of e)for(let n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function Oa(e,t,i,n){let{iScale:s}=e,{key:r="r"}=this._parsing,o=new Array(n),a,c,d,u;for(a=0,c=n;a<c;++a)d=a+i,u=t[d],o[a]={r:s.parse(Ge(u,r),d)};return o}function b0(e,t,i,n){let s=e.skip?t:e,r=t,o=i.skip?t:i,a=Er(r,s),c=Er(o,r),d=a/(a+c),u=c/(a+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;let f=n*d,g=n*u;return{previous:{x:r.x-f*(o.x-s.x),y:r.y-f*(o.y-s.y)},next:{x:r.x+g*(o.x-s.x),y:r.y+g*(o.y-s.y)}}}function w0(e,t,i){let n=e.length,s,r,o,a,c,d=pn(e,0);for(let u=0;u<n-1;++u)if(c=d,d=pn(e,u+1),!(!c||!d)){if(bn(t[u],0,y0)){i[u]=i[u+1]=0;continue}s=i[u]/t[u],r=i[u+1]/t[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[u]=s*o*t[u],i[u+1]=r*o*t[u])}}function v0(e,t,i="x"){let n=Fd(i),s=e.length,r,o,a,c=pn(e,0);for(let d=0;d<s;++d){if(o=a,a=c,c=pn(e,d+1),!a)continue;let u=a[i],f=a[n];o&&(r=(u-o[i])/3,a[`cp1${i}`]=u-r,a[`cp1${n}`]=f-r*t[d]),c&&(r=(c[i]-u)/3,a[`cp2${i}`]=u+r,a[`cp2${n}`]=f+r*t[d])}}function x0(e,t="x"){let i=Fd(t),n=e.length,s=Array(n).fill(0),r=Array(n),o,a,c,d=pn(e,0);for(o=0;o<n;++o)if(a=c,c=d,d=pn(e,o+1),!!c){if(d){let u=d[t]-c[t];s[o]=u!==0?(d[i]-c[i])/u:0}r[o]=a?d?pe(s[o-1])!==pe(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}w0(e,s,r),v0(e,r,t)}function wr(e,t,i){return Math.max(Math.min(e,i),t)}function _0(e,t){let i,n,s,r,o,a=Se(e[0],t);for(i=0,n=e.length;i<n;++i)o=r,r=a,a=i<n-1&&Se(e[i+1],t),r&&(s=e[i],o&&(s.cp1x=wr(s.cp1x,t.left,t.right),s.cp1y=wr(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=wr(s.cp2x,t.left,t.right),s.cp2y=wr(s.cp2y,t.top,t.bottom)))}function Bd(e,t,i,n,s){let r,o,a,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")x0(e,s);else{let d=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],c=b0(d,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,d=a}t.capBezierPoints&&_0(e,i)}function Lr(){return typeof window!="undefined"&&typeof document!="undefined"}function Rr(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mr(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}function S0(e,t){return Fr(e).getPropertyValue(t)}function Ri(e,t,i){let n={};i=i?"-"+i:"";for(let s=0;s<4;s++){let r=E0[s];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function T0(e,t){let i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:r}=n,o=!1,a,c;if(M0(s,r,e.target))a=s,c=r;else{let d=t.getBoundingClientRect();a=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:a,y:c,box:o}}function gi(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:n}=t,s=Fr(i),r=s.boxSizing==="border-box",o=Ri(s,"padding"),a=Ri(s,"border","width"),{x:c,y:d,box:u}=T0(e,i),f=o.left+(u&&a.left),g=o.top+(u&&a.top),{width:p,height:y}=t;return r&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-f)/p*i.width/n),y:Math.round((d-g)/y*i.height/n)}}function D0(e,t,i){let n,s;if(t===void 0||i===void 0){let r=e&&Rr(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{let o=r.getBoundingClientRect(),a=Fr(r),c=Ri(a,"border","width"),d=Ri(a,"padding");t=o.width-d.width-c.width,i=o.height-d.height-c.height,n=Mr(a.maxWidth,r,"clientWidth"),s=Mr(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||Sr,maxHeight:s||Sr}}function Wd(e,t,i,n){let s=Fr(e),r=Ri(s,"margin"),o=Mr(s.maxWidth,e,"clientWidth")||Sr,a=Mr(s.maxHeight,e,"clientHeight")||Sr,c=D0(e,t,i),{width:d,height:u}=c;if(s.boxSizing==="content-box"){let g=Ri(s,"border","width"),p=Ri(s,"padding");d-=p.width+g.width,u-=p.height+g.height}return d=Math.max(0,d-r.width),u=Math.max(0,n?d/n:u-r.height),d=vr(Math.min(d,o,c.maxWidth)),u=vr(Math.min(u,a,c.maxHeight)),d&&!u&&(u=vr(d/2)),(t!==void 0||i!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=vr(Math.floor(u*n))),{width:d,height:u}}function La(e,t,i){let n=t||1,s=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=n,o.height=s,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}function Ra(e,t){let i=S0(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ci(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function Hd(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function Yd(e,t,i,n){let s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=ci(e,s,i),a=ci(s,r,i),c=ci(r,t,i),d=ci(o,a,i),u=ci(a,c,i);return ci(d,u,i)}function Wi(e,t,i){return e?k0(t,i):C0()}function Fa(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Ba(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Vd(e){return e==="angle"?{between:wn,compare:jb,normalize:jt}:{between:Me,compare:(t,i)=>t-i,normalize:t=>t}}function ud({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function A0(e,t,i){let{property:n,start:s,end:r}=i,{between:o,normalize:a}=Vd(n),c=t.length,{start:d,end:u,loop:f}=e,g,p;if(f){for(d+=c,u+=c,g=0,p=c;g<p&&o(a(t[d%c][n]),s,r);++g)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function Wa(e,t,i){if(!i)return[e];let{property:n,start:s,end:r}=i,o=t.length,{compare:a,between:c,normalize:d}=Vd(n),{start:u,end:f,loop:g,style:p}=A0(e,t,i),y=[],w=!1,v=null,_,S,M,D=()=>c(s,M,_)&&a(s,M)!==0,T=()=>a(r,_)===0||c(r,M,_),C=()=>w||D(),A=()=>!w||T();for(let I=u,O=u;I<=f;++I)S=t[I%o],!S.skip&&(_=d(S[n]),_!==M&&(w=c(_,s,r),v===null&&C()&&(v=a(_,s)===0?I:O),v!==null&&A()&&(y.push(ud({start:v,end:I,loop:g,count:o,style:p})),v=null),O=I,M=_));return v!==null&&y.push(ud({start:v,end:f,loop:g,count:o,style:p})),y}function Na(e,t){let i=[],n=e.segments;for(let s=0;s<n.length;s++){let r=Wa(n[s],e.points,t);r.length&&i.push(...r)}return i}function I0(e,t,i,n){let s=0,r=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function P0(e,t,i,n){let s=e.length,r=[],o=t,a=e[t],c;for(c=t+1;c<=i;++c){let d=e[c%s];d.skip||d.stop?a.skip||(n=!1,r.push({start:t%s,end:(c-1)%s,loop:n}),t=o=d.stop?c:null):(o=c,a.skip&&(t=c)),a=d}return o!==null&&r.push({start:t%s,end:o%s,loop:n}),r}function zd(e,t){let i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];let r=!!e._loop,{start:o,end:a}=I0(i,s,r,n);if(n===!0)return fd(e,[{start:o,end:a,loop:r}],i,t);let c=a<o?a+s:a,d=!!e._fullLoop&&o===0&&a===s-1;return fd(e,P0(i,o,c,d),i,t)}function fd(e,t,i,n){return!n||!n.setContext||!i?t:O0(e,t,i,n)}function O0(e,t,i,n){let s=e._chart.getContext(),r=gd(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,c=i.length,d=[],u=r,f=t[0].start,g=f;function p(y,w,v,_){let S=a?-1:1;if(y!==w){for(y+=c;i[y%c].skip;)y-=S;for(;i[w%c].skip;)w+=S;y%c!==w%c&&(d.push({start:y%c,end:w%c,loop:v,style:_}),u=_,f=w%c)}}for(let y of t){f=a?f:y.start;let w=i[f%c],v;for(g=f+1;g<=y.end;g++){let _=i[g%c];v=gd(n.setContext(qe(s,{type:"segment",p0:w,p1:_,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),L0(v,u)&&p(f,g-1,y.loop,u),w=_,u=v}f<g-1&&p(f,g-1,y.loop,u)}return d}function gd(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function L0(e,t){if(!t)return!1;let i=[],n=function(s,r){return Ma(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function xr(e,t,i){return e.options.clip?e[i]:t[i]}function R0(e,t){let{xScale:i,yScale:n}=e;return i&&n?{left:xr(i,t,"left"),right:xr(i,t,"right"),top:xr(n,t,"top"),bottom:xr(n,t,"bottom")}:t}function Ha(e,t){let i=t._clip;if(i.disabled)return!1;let n=R0(t,e.chartArea);return{left:i.left===!1?0:n.left-(i.left===!0?0:i.left),right:i.right===!1?e.width:n.right+(i.right===!0?0:i.right),top:i.top===!1?0:n.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?e.height:n.bottom+(i.bottom===!0?0:i.bottom)}}var pd,md,fa,rd,yn,$e,ga,ct,dt,zb,Sr,Ub,vt,Li,od,je,pe,_e,_d,Ed,xa,Cr,At,Dd,br,ad,ld,fn,Gb,qb,cd,kd,xn,di,Ar,ua,ht,s0,r0,a0,l0,Ia,u0,y0,pn,Fd,Fr,E0,M0,vr,Nd,k0,C0,Ud=tr(()=>{sd();pd=(()=>{let e=0;return()=>e++})();md=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,fa=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;rd={"":e=>e,x:e=>e.x,y:e=>e.y};yn=e=>typeof e!="undefined",$e=e=>typeof e=="function",ga=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0};ct=Math.PI,dt=2*ct,zb=dt+ct,Sr=Number.POSITIVE_INFINITY,Ub=ct/180,vt=ct/2,Li=ct/4,od=ct*2/3,je=Math.log10,pe=Math.sign;_e=(e,t,i,n)=>kr(e,i,n?s=>{let r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),_d=(e,t,i)=>kr(e,i,n=>e[n][t]>=i);Ed=["push","pop","shift","splice","unshift"];xa=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();Cr=e=>e==="start"?"left":e==="end"?"right":"center",At=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,Dd=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;br=e=>e===0||e===1,ad=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*dt/i)),ld=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*dt/i)+1,fn={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*vt)+1,easeOutSine:e=>Math.sin(e*vt),easeInOutSine:e=>-.5*(Math.cos(ct*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>br(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>br(e)?e:ad(e,.075,.3),easeOutElastic:e=>br(e)?e:ld(e,.075,.3),easeInOutElastic(e){return br(e)?e:e<.5?.5*ad(e*2,.1125,.45):.5+.5*ld(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-fn.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?fn.easeInBounce(e*2)*.5:fn.easeOutBounce(e*2-1)*.5+.5};Gb=["x","y","borderWidth","radius","tension"],qb=["color","borderColor","backgroundColor"];cd=new Map;kd={values(e){return lt(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";let n=this.chart.options.locale,s,r=e;if(i.length>1){let d=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),r=Jb(e,i)}let o=je(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),vn(e,n,c)},logarithmic(e,t,i){if(e===0)return"0";let n=i[t].significand||e/Math.pow(10,Math.floor(je(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?kd.numeric.call(this,e,t,i):""}};xn={formatters:kd};di=Object.create(null),Ar=Object.create(null);ua=class{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>da(s.backgroundColor),this.hoverBorderColor=(n,s)=>da(s.borderColor),this.hoverColor=(n,s)=>da(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return ha(this,t,i)}get(t){return ss(this,t)}describe(t,i){return ha(Ar,t,i)}override(t,i){return ha(di,t,i)}route(t,i,n,s){let r=ss(this,t),o=ss(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){let c=this[a],d=o[s];return K(c)?Object.assign({},d,c):$(c,d)},set(c){this[a]=c}}})}apply(t){t.forEach(i=>i(this))}},ht=new ua({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Kb,Xb,Qb]);s0=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,r0=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;a0=e=>+e||0;l0=(e,t)=>e?e+Tr(t):t,Ia=(e,t)=>K(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);u0=(e,t)=>e===!0?t:typeof e=="string"?Ge(t,e):void 0;y0=Number.EPSILON||1e-14,pn=(e,t)=>t<e.length&&!e[t].skip&&e[t],Fd=e=>e==="x"?"y":"x";Fr=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);E0=["top","right","bottom","left"];M0=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);vr=e=>Math.round(e*10)/10;Nd=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};Lr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();k0=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},C0=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}}});function B0(e,t){let i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){let r=e[n[s]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function W0(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function jd(e,t){let i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function N0(e,t,i){if(i===!1)return!1;let n=jd(e,i),s=jd(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function H0(e){let t,i,n,s;return K(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function Uh(e,t){let i=[],n=e._getSortedDatasetMetas(t),s,r;for(s=0,r=n.length;s<r;++s)i.push(n[s].index);return i}function Gd(e,t,i,n={}){let s=e.keys,r=n.mode==="single",o,a,c,d;if(t===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===i){if(u=!0,n.all)continue;break}d=e.values[c],wt(d)&&(r||t===0||pe(t)===pe(d))&&(t+=d)}return!u&&!n.all?0:t}function Y0(e,t){let{iScale:i,vScale:n}=t,s=i.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length),c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],a[c]={[s]:u,[r]:e[u]};return a}function Ya(e,t){let i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function V0(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function z0(e){let{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function U0(e,t,i){let n=e[t]||(e[t]={});return n[i]||(n[i]={})}function qd(e,t,i,n){for(let s of t.getMatchingVisibleMetas(n).reverse()){let r=e[s.index];if(i&&r>0||!i&&r<0)return s.index}return null}function Kd(e,t){let{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=n,c=r.axis,d=o.axis,u=V0(r,o,n),f=t.length,g;for(let p=0;p<f;++p){let y=t[p],{[c]:w,[d]:v}=y,_=y._stacks||(y._stacks={});g=_[d]=U0(s,u,w),g[a]=v,g._top=qd(g,o,!0,n.type),g._bottom=qd(g,o,!1,n.type);let S=g._visualValues||(g._visualValues={});S[a]=v}}function Va(e,t){let i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function $0(e,t){return qe(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function j0(e,t,i){return qe(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function cs(e,t){let i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(let s of t){let r=s._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}function q0(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),n=[];for(let s=0,r=i.length;s<r;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=va(n.sort((s,r)=>s-r))}return e._cache.$bar}function K0(e){let t=e.iScale,i=q0(t,e.type),n=t._length,s,r,o,a,c=()=>{o===32767||o===-32768||(yn(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(s=0,r=i.length;s<r;++s)o=t.getPixelForValue(i[s]),c();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),c();return n}function X0(e,t,i,n){let s=i.barThickness,r,o;return q(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function Z0(e,t,i,n){let s=t.pixels,r=s[e],o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,c=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let d=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/n,ratio:i.barPercentage,start:d}}function J0(e,t,i,n){let s=i.parse(e[0],n),r=i.parse(e[1],n),o=Math.min(s,r),a=Math.max(s,r),c=o,d=a;Math.abs(o)>Math.abs(a)&&(c=a,d=o),t[i.axis]=d,t._custom={barStart:c,barEnd:d,start:s,end:r,min:o,max:a}}function $h(e,t,i,n){return lt(e)?J0(e,t,i,n):t[i.axis]=i.parse(e,n),t}function Zd(e,t,i,n){let s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,c=[],d,u,f,g;for(d=i,u=i+n;d<u;++d)g=t[d],f={},f[s.axis]=a||s.parse(o[d],d),c.push($h(g,f,r,d));return c}function Ua(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Q0(e,t,i){return e!==0?pe(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function tw(e){let t,i,n,s,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:i,end:n,reverse:t,top:s,bottom:r}}function ew(e,t,i,n){let s=t.borderSkipped,r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:d,bottom:u}=tw(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=d:(i._bottom||0)===n?s=u:(r[Jd(u,o,a,c)]=!0,s=d)),r[Jd(s,o,a,c)]=!0,e.borderSkipped=r}function Jd(e,t,i,n){return n?(e=iw(e,t,i),e=Qd(e,i,t)):e=Qd(e,t,i),e}function iw(e,t,i){return e===t?i:e===i?t:e}function Qd(e,t,i){return e==="start"?t:e==="end"?i:e}function nw(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}function sw(e,t,i){let n=1,s=1,r=0,o=0;if(t<dt){let a=e,c=a+t,d=Math.cos(a),u=Math.sin(a),f=Math.cos(c),g=Math.sin(c),p=(M,D,T)=>wn(M,a,c,!0)?1:Math.max(D,D*i,T,T*i),y=(M,D,T)=>wn(M,a,c,!0)?-1:Math.min(D,D*i,T,T*i),w=p(0,d,f),v=p(vt,u,g),_=y(ct,d,f),S=y(ct+vt,u,g);n=(w-_)/2,s=(v-S)/2,r=-(w+_)/2,o=-(v+S)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:o}}function Ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}function rw(e,t,i,n){let{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let d=a._reversePixels?_d:_e;if(n){if(s._sharedOptions){let u=r[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){let g=d(r,t,i-f),p=d(r,t,i+f);return{lo:g.lo,hi:p.hi}}}}else{let u=d(r,t,i);if(c){let{vScale:f}=s._cachedMeta,{_parsed:g}=e,p=g.slice(0,u.lo+1).reverse().findIndex(w=>!q(w[f.axis]));u.lo-=Math.max(0,p);let y=g.slice(u.hi).findIndex(w=>!q(w[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:r.length-1}}function Ss(e,t,i,n,s){let r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,c=r.length;a<c;++a){let{index:d,data:u}=r[a],{lo:f,hi:g}=rw(r[a],t,o,s);for(let p=f;p<=g;++p){let y=u[p];y.skip||n(y,d,p)}}}function ow(e){let t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){let r=t?Math.abs(n.x-s.x):0,o=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function $a(e,t,i,n,s){let r=[];return!s&&!e.isPointInArea(t)||Ss(e,i,t,function(a,c,d){!s&&!Se(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:c,index:d})},!0),r}function aw(e,t,i,n){let s=[];function r(o,a,c){let{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:f}=ba(o,{x:t.x,y:t.y});wn(f,d,u)&&s.push({element:o,datasetIndex:a,index:c})}return Ss(e,i,t,r),s}function lw(e,t,i,n,s,r){let o=[],a=ow(i),c=Number.POSITIVE_INFINITY;function d(u,f,g){let p=u.inRange(t.x,t.y,s);if(n&&!p)return;let y=u.getCenterPoint(s);if(!(!!r||e.isPointInArea(y))&&!p)return;let v=a(t,y);v<c?(o=[{element:u,datasetIndex:f,index:g}],c=v):v===c&&o.push({element:u,datasetIndex:f,index:g})}return Ss(e,i,t,d),o}function ja(e,t,i,n,s,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?aw(e,t,i,s):lw(e,t,i,n,s,r)}function th(e,t,i,n,s){let r=[],o=i==="x"?"inXRange":"inYRange",a=!1;return Ss(e,i,t,(c,d,u)=>{c[o]&&c[o](t[i],s)&&(r.push({element:c,datasetIndex:d,index:u}),a=a||c.inRange(t.x,t.y,s))}),n&&!a?[]:r}function ds(e,t){return e.filter(i=>i.pos===t)}function eh(e,t){return e.filter(i=>Kh.indexOf(i.pos)===-1&&i.box.axis===t)}function hs(e,t){return e.sort((i,n)=>{let s=t?n:i,r=t?i:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function cw(e){let t=[],i,n,s,r,o,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function dw(e){let t={};for(let i of e){let{stack:n,pos:s,stackWeight:r}=i;if(!n||!Kh.includes(s))continue;let o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function hw(e,t){let i=dw(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t,r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];let{fullSize:c}=a.box,d=i[a.stack],u=d&&a.stackWeight/d.weight;a.horizontal?(a.width=u?u*n:c&&t.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:c&&t.availableHeight)}return i}function uw(e){let t=cw(e),i=hs(t.filter(d=>d.box.fullSize),!0),n=hs(ds(t,"left"),!0),s=hs(ds(t,"right")),r=hs(ds(t,"top"),!0),o=hs(ds(t,"bottom")),a=eh(t,"x"),c=eh(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:ds(t,"chartArea"),vertical:n.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}function ih(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function Xh(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fw(e,t,i,n){let{pos:s,box:r}=i,o=e.maxPadding;if(!K(s)){i.size&&(e[s]-=i.size);let f=n[i.stack]||{size:0,count:1};f.size=Math.max(f.size,i.horizontal?r.height:r.width),i.size=f.size/f.count,e[s]+=i.size}r.getPadding&&Xh(o,r.getPadding());let a=Math.max(0,t.outerWidth-ih(o,e,"left","right")),c=Math.max(0,t.outerHeight-ih(o,e,"top","bottom")),d=a!==e.w,u=c!==e.h;return e.w=a,e.h=c,i.horizontal?{same:d,other:u}:{same:u,other:d}}function gw(e){let t=e.maxPadding;function i(n){let s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function pw(e,t){let i=t.maxPadding;function n(s){let r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return n(e?["left","right"]:["top","bottom"])}function gs(e,t,i,n){let s=[],r,o,a,c,d,u;for(r=0,o=e.length,d=0;r<o;++r){a=e[r],c=a.box,c.update(a.width||t.w,a.height||t.h,pw(a.horizontal,t));let{same:f,other:g}=fw(t,i,a,n);d|=f&&s.length,u=u||g,c.fullSize||s.push(a)}return d&&gs(s,t,i,n)||u}function Br(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function nh(e,t,i,n){let s=i.padding,{x:r,y:o}=t;for(let a of e){let c=a.box,d=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/d.weight||1;if(a.horizontal){let f=t.w*u,g=d.size||c.height;yn(d.start)&&(o=d.start),c.fullSize?Br(c,s.left,o,i.outerWidth-s.right-s.left,g):Br(c,t.left+d.placed,o,f,g),d.start=o,d.placed+=f,o=c.bottom}else{let f=t.h*u,g=d.size||c.width;yn(d.start)&&(r=d.start),c.fullSize?Br(c,r,s.top,g,i.outerHeight-s.bottom-s.top):Br(c,r,t.top+d.placed,g,f),d.start=r,d.placed+=f,r=c.right}}t.x=r,t.y=o}function yw(e,t){let i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[zr]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",sh(s)){let r=Ra(e,"width");r!==void 0&&(e.width=r)}if(sh(n))if(e.style.height==="")e.height=e.width/(t||2);else{let r=Ra(e,"height");r!==void 0&&(e.height=r)}return e}function bw(e,t,i){e&&e.addEventListener(t,i,Zh)}function ww(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,Zh)}function vw(e,t){let i=mw[e.type]||e.type,{x:n,y:s}=gi(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Gr(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function xw(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Gr(a.addedNodes,n),o=o&&!Gr(a.removedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function _w(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Gr(a.removedNodes,n),o=o&&!Gr(a.addedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function Jh(){let e=window.devicePixelRatio;e!==rh&&(rh=e,vs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function Sw(e,t){vs.size||window.addEventListener("resize",Jh),vs.set(e,t)}function Ew(e){vs.delete(e),vs.size||window.removeEventListener("resize",Jh)}function Mw(e,t,i){let n=e.canvas,s=n&&Rr(n);if(!s)return;let r=_a((a,c)=>{let d=s.clientWidth;i(a,c),d<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{let c=a[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||r(d,u)});return o.observe(s),Sw(e,r),o}function Ga(e,t,i){i&&i.disconnect(),t==="resize"&&Ew(e)}function Tw(e,t,i){let n=e.canvas,s=_a(r=>{e.ctx!==null&&i(vw(r,e))},e);return bw(n,t,s),s}function Qh(e){return!Lr()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?jr:qr}function Dw(e,t){let i=e.options.ticks,n=kw(e),s=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?Aw(t):[],o=r.length,a=r[0],c=r[o-1],d=[];if(o>s)return Iw(t,d,r,o/s),d;let u=Cw(r,t,s);if(o>0){let f,g,p=o>1?Math.round((c-a)/(o-1)):null;for(Wr(t,d,u,q(p)?0:a-p,a),f=0,g=o-1;f<g;f++)Wr(t,d,u,r[f],r[f+1]);return Wr(t,d,u,c,q(p)?t.length:c+p),d}return Wr(t,d,u),d}function kw(e){let t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function Cw(e,t,i){let n=Pw(e),s=t.length/i;if(!n)return Math.max(s,1);let r=wd(n);for(let o=0,a=r.length-1;o<a;o++){let c=r[o];if(c>s)return c}return Math.max(s,1)}function Aw(e){let t=[],i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function Iw(e,t,i,n){let s=0,r=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}function Wr(e,t,i,n,s){let r=$(n,0),o=Math.min($(s,e.length),e.length),a=0,c,d,u;for(i=Math.ceil(i),s&&(c=s-n,i=c/Math.floor(c/i)),u=r;u<0;)a++,u=Math.round(r+a*i);for(d=Math.max(r,0);d<o;d++)d===u&&(t.push(e[d]),a++,u=Math.round(r+a*i))}function Pw(e){let t=e.length,i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}function lh(e,t){let i=[],n=e.length/t,s=e.length,r=0;for(;r<s;r+=n)i.push(e[Math.floor(r)]);return i}function Lw(e,t,i){let n=e.ticks.length,s=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6,c=e.getPixelForTick(s),d;if(!(i&&(n===1?d=Math.max(c-r,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(s-1))/2,c+=s<t?d:-d,c<r-a||c>o+a)))return c}function Rw(e,t){it(e,i=>{let n=i.gc,s=n.length/2,r;if(s>t){for(r=0;r<s;++r)delete i.data[n[r]];n.splice(0,s)}})}function us(e){return e.drawTicks?e.tickLength:0}function ch(e,t){if(!e.display)return 0;let i=_t(e.font,t),n=It(e.padding);return(lt(e.text)?e.text.length:1)*i.lineHeight+n.height}function Fw(e,t){return qe(e,{scale:t,type:"scale"})}function Bw(e,t,i){return qe(e,{tick:i,index:t,type:"tick"})}function Ww(e,t,i){let n=Cr(e);return(i&&t!=="right"||!i&&t==="right")&&(n=Ow(n)),n}function Nw(e,t,i,n){let{top:s,left:r,bottom:o,right:a,chart:c}=e,{chartArea:d,scales:u}=c,f=0,g,p,y,w=o-s,v=a-r;if(e.isHorizontal()){if(p=At(n,r,a),K(i)){let _=Object.keys(i)[0],S=i[_];y=u[_].getPixelForValue(S)+w-t}else i==="center"?y=(d.bottom+d.top)/2+w-t:y=oh(e,i,t);g=a-r}else{if(K(i)){let _=Object.keys(i)[0],S=i[_];p=u[_].getPixelForValue(S)-v+t}else i==="center"?p=(d.left+d.right)/2-v+t:p=oh(e,i,t);y=At(n,o,s),f=i==="left"?-vt:vt}return{titleX:p,titleY:y,maxWidth:g,rotation:f}}function Hw(e,t,i){let n=gn(Object.create(null),[i?ht.get(i):{},ht.get(t),e.defaults]);ht.set(t,n),e.defaultRoutes&&Yw(t,e.defaultRoutes),e.descriptors&&ht.describe(t,e.descriptors)}function Yw(e,t){Object.keys(t).forEach(i=>{let n=i.split("."),s=n.pop(),r=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),c=o.join(".");ht.route(r,s,c,a)})}function Vw(e){return"id"in e&&"defaults"in e}function zw(e){let t={},i=[],n=Object.keys(me.plugins.items);for(let r=0;r<n.length;r++)i.push(me.getPlugin(n[r]));let s=e.plugins||[];for(let r=0;r<s.length;r++){let o=s[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function Uw(e,t){return!t&&e===!1?null:e===!0?{}:e}function $w(e,{plugins:t,localIds:i},n,s){let r=[],o=e.getContext();for(let a of t){let c=a.id,d=Uw(n[c],s);d!==null&&r.push({plugin:a,options:jw(e.config,{plugin:a,local:i[c]},d,o)})}return r}function jw(e,{plugin:t,local:i},n,s){let r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tl(e,t){let i=ht.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Gw(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function qw(e,t){return e===t?"_index_":"_value_"}function dh(e){if(e==="x"||e==="y"||e==="r")return e}function Kw(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function el(e,...t){if(dh(e))return e;for(let i of t){let n=i.axis||Kw(i.position)||e.length>1&&dh(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function hh(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function Xw(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return hh(e,"x",i[0])||hh(e,"y",i[0])}return{}}function Zw(e,t){let i=di[e.type]||{scales:{}},n=t.scales||{},s=tl(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{let a=n[o];if(!K(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=el(o,a,Xw(o,e),ht.scales[a.type]),d=qw(c,s),u=i.scales||{};r[o]=mn(Object.create(null),[{axis:c},a,u[c],u[d]])}),e.data.datasets.forEach(o=>{let a=o.type||e.type,c=o.indexAxis||tl(a,t),u=(di[a]||{}).scales||{};Object.keys(u).forEach(f=>{let g=Gw(f,c),p=o[g+"AxisID"]||g;r[p]=r[p]||Object.create(null),mn(r[p],[{axis:g},n[p],u[f]])})}),Object.keys(r).forEach(o=>{let a=r[o];mn(a,[ht.scales[a.type],ht.scale])}),r}function tu(e){let t=e.options||(e.options={});t.plugins=$(t.plugins,{}),t.scales=Zw(e,t)}function eu(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Jw(e){return e=e||{},e.data=eu(e.data),tu(e),e}function Nr(e,t){let i=uh.get(e);return i||(i=t(),uh.set(e,i),iu.add(i)),i}function fh(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));let s=i.join(),r=n.get(s);return r||(r={resolver:Or(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,r)),r}function tv(e,t){let{isScriptable:i,isIndexable:n}=Aa(e);for(let s of t){let r=i(s),o=n(s),a=(o||r)&&e[s];if(r&&($e(a)||Qw(a))||o&&lt(a))return!0}return!1}function gh(e,t){return e==="top"||e==="bottom"||iv.indexOf(e)===-1&&t==="x"}function ph(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function mh(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),ot(i&&i.onComplete,[e],t)}function nv(e){let t=e.chart,i=t.options.animation;ot(i&&i.onProgress,[e],t)}function nu(e){return Lr()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}function sv(e,t,i){let n=Object.keys(e);for(let s of n){let r=+s;if(r>=t){let o=e[s];delete e[s],(i>0||r>t)&&(e[r+i]=o)}}}function rv(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function bh(){return it(re.instances,e=>e._plugins.invalidate())}function ov(e,t,i){let{startAngle:n,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:c}=t,d=s/a;e.beginPath(),e.arc(r,o,a,n-d,i+d),c>s?(d=s/c,e.arc(r,o,c,i+d,n-d,!0)):e.arc(r,o,s,i+vt,n-vt),e.closePath(),e.clip()}function av(e){return Pr(e,["outerStart","outerEnd","innerStart","innerEnd"])}function lv(e,t,i,n){let s=av(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,n*t/2),a=c=>{let d=(i-Math.min(r,c))*n/2;return Dt(c,0,Math.min(r,d))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Dt(s.innerStart,0,o),innerEnd:Dt(s.innerEnd,0,o)}}function En(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Kr(e,t,i,n,s,r){let{x:o,y:a,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+n+i-d,0),g=u>0?u+n+i+d:0,p=0,y=s-c;if(n){let U=u>0?u-n:0,Z=f>0?f-n:0,ft=(U+Z)/2,at=ft!==0?y*ft/(ft+n):y;p=(y-at)/2}let w=Math.max(.001,y*f-i/ct)/f,v=(y-w)/2,_=c+v+p,S=s-v-p,{outerStart:M,outerEnd:D,innerStart:T,innerEnd:C}=lv(t,g,f,S-_),A=f-M,I=f-D,O=_+M/A,L=S-D/I,F=g+T,V=g+C,J=_+T/F,X=S-C/V;if(e.beginPath(),r){let U=(O+L)/2;if(e.arc(o,a,f,O,U),e.arc(o,a,f,U,L),D>0){let bt=En(I,L,o,a);e.arc(bt.x,bt.y,D,L,S+vt)}let Z=En(V,S,o,a);if(e.lineTo(Z.x,Z.y),C>0){let bt=En(V,X,o,a);e.arc(bt.x,bt.y,C,S+vt,X+Math.PI)}let ft=(S-C/g+(_+T/g))/2;if(e.arc(o,a,g,S-C/g,ft,!0),e.arc(o,a,g,ft,_+T/g,!0),T>0){let bt=En(F,J,o,a);e.arc(bt.x,bt.y,T,J+Math.PI,_-vt)}let at=En(A,_,o,a);if(e.lineTo(at.x,at.y),M>0){let bt=En(A,O,o,a);e.arc(bt.x,bt.y,M,_-vt,O)}}else{e.moveTo(o,a);let U=Math.cos(O)*f+o,Z=Math.sin(O)*f+a;e.lineTo(U,Z);let ft=Math.cos(L)*f+o,at=Math.sin(L)*f+a;e.lineTo(ft,at)}e.closePath()}function cv(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a}=t,c=t.endAngle;if(r){Kr(e,t,i,n,c,s);for(let d=0;d<r;++d)e.fill();isNaN(a)||(c=o+(a%dt||dt))}return Kr(e,t,i,n,c,s),e.fill(),c}function dv(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:g}=c,p=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=g,p?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let y=t.endAngle;if(r){Kr(e,t,i,n,y,s);for(let w=0;w<r;++w)e.stroke();isNaN(a)||(y=o+(a%dt||dt))}p&&ov(e,t,y),r||(Kr(e,t,i,n,y,s),e.stroke())}function su(e,t,i=t){e.lineCap=$(i.borderCapStyle,t.borderCapStyle),e.setLineDash($(i.borderDash,t.borderDash)),e.lineDashOffset=$(i.borderDashOffset,t.borderDashOffset),e.lineJoin=$(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=$(i.borderWidth,t.borderWidth),e.strokeStyle=$(i.borderColor,t.borderColor)}function hv(e,t,i){e.lineTo(i.x,i.y)}function uv(e){return e.stepped?Ad:e.tension||e.cubicInterpolationMode==="monotone"?Id:hv}function ru(e,t,i={}){let n=e.length,{start:s=0,end:r=n-1}=i,{start:o,end:a}=t,c=Math.max(s,o),d=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:n,start:c,loop:t.loop,ilen:d<c&&!u?n+d-c:d-c}}function fv(e,t,i,n){let{points:s,options:r}=t,{count:o,start:a,loop:c,ilen:d}=ru(s,i,n),u=uv(r),{move:f=!0,reverse:g}=n||{},p,y,w;for(p=0;p<=d;++p)y=s[(a+(g?d-p:p))%o],!y.skip&&(f?(e.moveTo(y.x,y.y),f=!1):u(e,w,y,g,r.stepped),w=y);return c&&(y=s[(a+(g?d:0))%o],u(e,w,y,g,r.stepped)),!!c}function gv(e,t,i,n){let s=t.points,{count:r,start:o,ilen:a}=ru(s,i,n),{move:c=!0,reverse:d}=n||{},u=0,f=0,g,p,y,w,v,_,S=D=>(o+(d?a-D:D))%r,M=()=>{w!==v&&(e.lineTo(u,v),e.lineTo(u,w),e.lineTo(u,_))};for(c&&(p=s[S(0)],e.moveTo(p.x,p.y)),g=0;g<=a;++g){if(p=s[S(g)],p.skip)continue;let D=p.x,T=p.y,C=D|0;C===y?(T<w?w=T:T>v&&(v=T),u=(f*u+D)/++f):(M(),e.lineTo(D,T),y=C,f=0,w=v=T),_=T}M()}function nl(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?gv:fv}function pv(e){return e.stepped?Hd:e.tension||e.cubicInterpolationMode==="monotone"?Yd:ci}function mv(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),su(e,t.options),e.stroke(s)}function yv(e,t,i,n){let{segments:s,options:r}=t,o=nl(t);for(let a of s)su(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}function wv(e,t,i,n){bv&&!t.options.segment?mv(e,t,i,n):yv(e,t,i,n)}function wh(e,t,i,n){let s=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<s.radius+s.hitRadius}function ou(e,t){let{x:i,y:n,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t),a,c,d,u,f;return e.horizontal?(f=o/2,a=Math.min(i,s),c=Math.max(i,s),d=n-f,u=n+f):(f=r/2,a=i-f,c=i+f,d=Math.min(n,s),u=Math.max(n,s)),{left:a,top:d,right:c,bottom:u}}function bi(e,t,i,n){return e?0:Dt(t,i,n)}function vv(e,t,i){let n=e.options.borderWidth,s=e.borderSkipped,r=Ca(n);return{t:bi(s.top,r.top,0,i),r:bi(s.right,r.right,0,t),b:bi(s.bottom,r.bottom,0,i),l:bi(s.left,r.left,0,t)}}function xv(e,t,i){let{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=fi(s),o=Math.min(t,i),a=e.borderSkipped,c=n||K(s);return{topLeft:bi(!c||a.top||a.left,r.topLeft,0,o),topRight:bi(!c||a.top||a.right,r.topRight,0,o),bottomLeft:bi(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:bi(!c||a.bottom||a.right,r.bottomRight,0,o)}}function _v(e){let t=ou(e),i=t.right-t.left,n=t.bottom-t.top,s=vv(e,i/2,n/2),r=xv(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function qa(e,t,i,n){let s=t===null,r=i===null,a=e&&!(s&&r)&&ou(e,n);return a&&(s||Me(t,a.left,a.right))&&(r||Me(i,a.top,a.bottom))}function Sv(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Ev(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ka(e,t,i={}){let n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}function lu(e){return sl[e%sl.length]}function cu(e){return vh[e%vh.length]}function Mv(e,t){return e.borderColor=lu(t),e.backgroundColor=cu(t),++t}function Tv(e,t){return e.backgroundColor=e.data.map(()=>lu(t++)),t}function Dv(e,t){return e.backgroundColor=e.data.map(()=>cu(t++)),t}function kv(e){let t=0;return(i,n)=>{let s=e.getDatasetMeta(n).controller;s instanceof ke?t=Tv(i,t):s instanceof yi?t=Dv(i,t):s&&(t=Mv(i,t))}}function xh(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Cv(e){return e&&(e.borderColor||e.backgroundColor)}function Av(){return ht.borderColor!=="rgba(0,0,0,0.1)"||ht.backgroundColor!=="rgba(0,0,0,0.1)"}function Iv(e,t,i,n,s){let r=s.samples||n;if(r>=i)return e.slice(t,t+i);let o=[],a=(i-2)/(r-2),c=0,d=t+i-1,u=t,f,g,p,y,w;for(o[c++]=e[u],f=0;f<r-2;f++){let v=0,_=0,S,M=Math.floor((f+1)*a)+1+t,D=Math.min(Math.floor((f+2)*a)+1,i)+t,T=D-M;for(S=M;S<D;S++)v+=e[S].x,_+=e[S].y;v/=T,_/=T;let C=Math.floor(f*a)+1+t,A=Math.min(Math.floor((f+1)*a)+1,i)+t,{x:I,y:O}=e[u];for(p=y=-1,S=C;S<A;S++)y=.5*Math.abs((I-v)*(e[S].y-O)-(I-e[S].x)*(_-O)),y>p&&(p=y,g=e[S],w=S);o[c++]=g,u=w}return o[c++]=e[d],o}function Pv(e,t,i,n){let s=0,r=0,o,a,c,d,u,f,g,p,y,w,v=[],_=t+i-1,S=e[t].x,D=e[_].x-S;for(o=t;o<t+i;++o){a=e[o],c=(a.x-S)/D*n,d=a.y;let T=c|0;if(T===u)d<y?(y=d,f=o):d>w&&(w=d,g=o),s=(r*s+a.x)/++r;else{let C=o-1;if(!q(f)&&!q(g)){let A=Math.min(f,g),I=Math.max(f,g);A!==p&&A!==C&&v.push({...e[A],x:s}),I!==p&&I!==C&&v.push({...e[I],x:s})}o>0&&C!==p&&v.push(e[C]),v.push(a),u=T,r=0,y=w=d,f=g=p=o}}return v}function hu(e){if(e._decimated){let t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function _h(e){e.data.datasets.forEach(t=>{hu(t)})}function Ov(e,t){let i=t.length,n=0,s,{iScale:r}=e,{min:o,max:a,minDefined:c,maxDefined:d}=r.getUserBounds();return c&&(n=Dt(_e(t,r.axis,o).lo,0,i-1)),d?s=Dt(_e(t,r.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}function Lv(e,t,i){let n=e.segments,s=e.points,r=t.points,o=[];for(let a of n){let{start:c,end:d}=a;d=al(c,d,s);let u=rl(i,s[c],s[d],a.loop);if(!t.segments){o.push({source:a,target:u,start:s[c],end:s[d]});continue}let f=Na(t,u);for(let g of f){let p=rl(i,r[g.start],r[g.end],g.loop),y=Wa(a,s,p);for(let w of y)o.push({source:w,target:g,start:{[i]:Sh(u,p,"start",Math.max)},end:{[i]:Sh(u,p,"end",Math.min)}})}}return o}function rl(e,t,i,n){if(n)return;let s=t[e],r=i[e];return e==="angle"&&(s=jt(s),r=jt(r)),{property:e,start:s,end:r}}function Rv(e,t){let{x:i=null,y:n=null}=e||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=al(o,a,s);let c=s[o],d=s[a];n!==null?(r.push({x:c.x,y:n}),r.push({x:d.x,y:n})):i!==null&&(r.push({x:i,y:c.y}),r.push({x:i,y:d.y}))}),r}function al(e,t,i){for(;t>e;t--){let n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Sh(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function fu(e,t){let i=[],n=!1;return lt(e)?(n=!0,i=e):i=Rv(e,t),i.length?new ye({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Eh(e){return e&&e.fill!==!1}function Fv(e,t,i){let s=e[t].fill,r=[t],o;if(!i)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!wt(s))return s;if(o=e[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function Bv(e,t,i){let n=Yv(e);if(K(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return wt(s)&&Math.floor(s)===s?Wv(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Wv(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function Nv(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:K(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function Hv(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:K(e)?n=e.value:n=t.getBaseValue(),n}function Yv(e){let t=e.options,i=t.fill,n=$(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Vv(e){let{scale:t,index:i,line:n}=e,s=[],r=n.segments,o=n.points,a=zv(t,i);a.push(fu({x:null,y:t.bottom},n));for(let c=0;c<r.length;c++){let d=r[c];for(let u=d.start;u<=d.end;u++)Uv(s,o[u],a)}return new ye({points:s,options:{}})}function zv(e,t){let i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let r=n[s];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function Uv(e,t,i){let n=[];for(let s=0;s<i.length;s++){let r=i[s],{first:o,last:a,point:c}=$v(r,t,"x");if(!(!c||o&&a)){if(o)n.unshift(c);else if(e.push(c),!a)break}}e.push(...n)}function $v(e,t,i){let n=e.interpolate(t,i);if(!n)return{};let s=n[i],r=e.segments,o=e.points,a=!1,c=!1;for(let d=0;d<r.length;d++){let u=r[d],f=o[u.start][i],g=o[u.end][i];if(Me(s,f,g)){a=s===f,c=s===g;break}}return{first:a,last:c,point:n}}function jv(e){let{chart:t,fill:i,line:n}=e;if(wt(i))return Gv(t,i);if(i==="stack")return Vv(e);if(i==="shape")return!0;let s=qv(e);return s instanceof Xr?s:fu(s,n)}function Gv(e,t){let i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function qv(e){return(e.scale||{}).getPointPositionForValue?Xv(e):Kv(e)}function Kv(e){let{scale:t={},fill:i}=e,n=Nv(i,t);if(wt(n)){let s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function Xv(e){let{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,r=n.reverse?t.max:t.min,o=Hv(i,t,r),a=[];if(n.grid.circular){let c=t.getPointPositionForValue(0,r);return new Xr({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)a.push(t.getPointPositionForValue(c,o));return a}function Xa(e,t,i){let n=jv(t),{chart:s,index:r,line:o,scale:a,axis:c}=t,d=o.options,u=d.fill,f=d.backgroundColor,{above:g=f,below:p=f}=u||{},y=s.getDatasetMeta(r),w=Ha(s,y);n&&o.points.length&&(as(e,i),Zv(e,{line:o,target:n,above:g,below:p,area:i,scale:a,axis:c,clip:w}),ls(e))}function Zv(e,t){let{line:i,target:n,above:s,below:r,area:o,scale:a,clip:c}=t,d=i._loop?"angle":t.axis;e.save(),d==="x"&&r!==s&&(Mh(e,n,o.top),Th(e,{line:i,target:n,color:s,scale:a,property:d,clip:c}),e.restore(),e.save(),Mh(e,n,o.bottom)),Th(e,{line:i,target:n,color:r,scale:a,property:d,clip:c}),e.restore()}function Mh(e,t,i){let{segments:n,points:s}=t,r=!0,o=!1;e.beginPath();for(let a of n){let{start:c,end:d}=a,u=s[c],f=s[al(c,d,s)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,i),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(f.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Th(e,t){let{line:i,target:n,property:s,color:r,scale:o,clip:a}=t,c=Lv(i,n,s);for(let{source:d,target:u,start:f,end:g}of c){let{style:{backgroundColor:p=r}={}}=d,y=n!==!0;e.save(),e.fillStyle=p,Jv(e,o,a,y&&rl(s,f,g)),e.beginPath();let w=!!i.pathSegment(e,d),v;if(y){w?e.closePath():Dh(e,n,g,s);let _=!!n.pathSegment(e,u,{move:w,reverse:!0});v=w&&_,v||Dh(e,n,f,s)}e.closePath(),e.fill(v?"evenodd":"nonzero"),e.restore()}}function Jv(e,t,i,n){let s=t.chart.chartArea,{property:r,start:o,end:a}=n||{};if(r==="x"||r==="y"){let c,d,u,f;r==="x"?(c=o,d=s.top,u=a,f=s.bottom):(c=s.left,d=o,u=s.right,f=a),e.beginPath(),i&&(c=Math.max(c,i.left),u=Math.min(u,i.right),d=Math.max(d,i.top),f=Math.min(f,i.bottom)),e.rect(c,d,u-c,f-d),e.clip()}}function Dh(e,t,i,n){let s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}function tx(e,t,i,n,s){let r=ex(n,e,t,i),o=ix(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function ex(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+n.measureText(s).width}function ix(e,t,i){let n=e;return typeof t.text!="string"&&(n=pu(t,i)),n}function pu(e,t){let i=e.text?e.text.length:0;return t*i}function nx(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}function sx(e,t){let i=new xs({ctx:e.ctx,options:t,chart:e});Pt.configure(e,i,t),Pt.addBox(e,i),e.titleBlock=i}function Te(e,t){return t&&(lt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ke(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function rx(e,t){let{element:i,datasetIndex:n,index:s}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Ch(e,t){let i=e.chart.ctx,{body:n,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,c=_t(t.bodyFont),d=_t(t.titleFont),u=_t(t.footerFont),f=r.length,g=s.length,p=n.length,y=It(t.padding),w=y.height,v=0,_=n.reduce((D,T)=>D+T.before.length+T.lines.length+T.after.length,0);if(_+=e.beforeBody.length+e.afterBody.length,f&&(w+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),_){let D=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;w+=p*D+(_-p)*c.lineHeight+(_-1)*t.bodySpacing}g&&(w+=t.footerMarginTop+g*u.lineHeight+(g-1)*t.footerSpacing);let S=0,M=function(D){v=Math.max(v,i.measureText(D).width+S)};return i.save(),i.font=d.string,it(e.title,M),i.font=c.string,it(e.beforeBody.concat(e.afterBody),M),S=t.displayColors?o+2+t.boxPadding:0,it(n,D=>{it(D.before,M),it(D.lines,M),it(D.after,M)}),S=0,i.font=u.string,it(e.footer,M),i.restore(),v+=y.width,{width:v,height:w}}function ox(e,t){let{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function ax(e,t,i,n){let{x:s,width:r}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function lx(e,t,i,n){let{x:s,width:r}=i,{width:o,chartArea:{left:a,right:c}}=e,d="center";return n==="center"?d=s<=(a+c)/2?"left":"right":s<=r/2?d="left":s>=o-r/2&&(d="right"),ax(d,e,t,i)&&(d="center"),d}function Ah(e,t,i){let n=i.yAlign||t.yAlign||ox(e,i);return{xAlign:i.xAlign||t.xAlign||lx(e,t,i,n),yAlign:n}}function cx(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function dx(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function Ih(e,t,i,n){let{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:c}=i,d=s+r,{topLeft:u,topRight:f,bottomLeft:g,bottomRight:p}=fi(o),y=cx(t,a),w=dx(t,c,d);return c==="center"?a==="left"?y+=d:a==="right"&&(y-=d):a==="left"?y-=Math.max(u,g)+s:a==="right"&&(y+=Math.max(f,p)+s),{x:Dt(y,0,n.width-t.width),y:Dt(w,0,n.height-t.height)}}function Yr(e,t,i){let n=It(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Ph(e){return Te([],Ke(e))}function hx(e,t,i){return qe(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Oh(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}function qt(e,t,i,n){let s=e[t].call(i,n);return typeof s=="undefined"?wu[t].call(i,n):s}function fx(e,t,i,n){let s=e.indexOf(t);if(s===-1)return ux(e,t,i,n);let r=e.lastIndexOf(t);return s!==r?i:s}function Lh(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function px(e,t){let i=[],{bounds:s,step:r,min:o,max:a,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:g}=e,p=r||1,y=u-1,{min:w,max:v}=t,_=!q(o),S=!q(a),M=!q(d),D=(v-w)/(f+1),T=pa((v-w)/y/p)*p,C,A,I,O;if(T<1e-14&&!_&&!S)return[{value:w},{value:v}];O=Math.ceil(v/T)-Math.floor(w/T),O>y&&(T=pa(O*T/y/p)*p),q(c)||(C=Math.pow(10,c),T=Math.ceil(T*C)/C),s==="ticks"?(A=Math.floor(w/T)*T,I=Math.ceil(v/T)*T):(A=w,I=v),_&&S&&r&&vd((a-o)/r,T/1e3)?(O=Math.round(Math.min((a-o)/T,u)),T=(a-o)/O,A=o,I=a):M?(A=_?o:A,I=S?a:I,O=d-1,T=(I-A)/O):(O=(I-A)/T,bn(O,Math.round(O),T/1e3)?O=Math.round(O):O=Math.ceil(O));let L=Math.max(ya(T),ya(A));C=Math.pow(10,q(c)?L:c),A=Math.round(A*C)/C,I=Math.round(I*C)/C;let F=0;for(_&&(g&&A!==o?(i.push({value:o}),A<o&&F++,bn(Math.round((A+F*T)*C)/C,o,Rh(o,D,e))&&F++):A<o&&F++);F<O;++F){let V=Math.round((A+F*T)*C)/C;if(S&&V>a)break;i.push({value:V})}return S&&g&&I!==a?i.length&&bn(i[i.length-1].value,a,Rh(a,D,e))?i[i.length-1].value=a:i.push({value:a}):(!S||I===a)&&i.push({value:I}),i}function Rh(e,t,{horizontal:i,minRotation:n}){let s=he(n),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}function Fh(e){return e/Math.pow(10,_s(e))===1}function Bh(e,t,i){let n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function mx(e,t){let i=t-e,n=_s(i);for(;Bh(e,t,n)>10;)n++;for(;Bh(e,t,n)<10;)n--;return Math.min(n,_s(e))}function yx(e,{min:t,max:i}){t=Gt(e.min,t);let n=[],s=_s(t),r=mx(t,i),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),c=s>r?Math.pow(10,s):0,d=Math.round((t-c)*o)/o,u=Math.floor((t-c)/a/10)*a*10,f=Math.floor((d-u)/Math.pow(10,r)),g=Gt(e.min,Math.round((c+u+f*Math.pow(10,r))*o)/o);for(;g<i;)n.push({value:g,major:Fh(g),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,o=r>=0?1:o),g=Math.round((c+u+f*Math.pow(10,r))*o)/o;let p=Gt(e.max,g);return n.push({value:p,major:Fh(p),significand:f}),n}function ol(e){let t=e.ticks;if(t.display&&e.display){let i=It(t.backdropPadding);return $(t.font&&t.font.size,ht.font.size)+i.height}return 0}function bx(e,t,i){return i=lt(i)?i:[i],{w:Cd(e,t.string,i),h:i.length*t.lineHeight}}function Wh(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function wx(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?ct/r:0;for(let c=0;c<r;c++){let d=o.setContext(e.getPointLabelContext(c));s[c]=d.padding;let u=e.getPointPosition(c,e.drawingArea+s[c],a),f=_t(d.font),g=bx(e.ctx,f,e._pointLabels[c]);n[c]=g;let p=jt(e.getIndexAngle(c)+a),y=Math.round(Dr(p)),w=Wh(y,u.x,g.w,0,180),v=Wh(y,u.y,g.h,90,270);vx(i,t,p,w,v)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=Sx(e,n,s)}function vx(e,t,i,n,s){let r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),a=0,c=0;n.start<t.l?(a=(t.l-n.start)/r,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(c=(t.t-s.start)/o,e.t=Math.min(e.t,t.t-c)):s.end>t.b&&(c=(s.end-t.b)/o,e.b=Math.max(e.b,t.b+c))}function xx(e,t,i){let n=e.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=i,c=e.getPointPosition(t,n+s+o,r),d=Math.round(Dr(jt(c.angle+vt))),u=Tx(c.y,a.h,d),f=Ex(d),g=Mx(c.x,a.w,f);return{visible:!0,x:c.x,y:u,textAlign:f,left:g,top:u,right:g+a.w,bottom:u+a.h}}function _x(e,t){if(!t)return!0;let{left:i,top:n,right:s,bottom:r}=e;return!(Se({x:i,y:n},t)||Se({x:i,y:r},t)||Se({x:s,y:n},t)||Se({x:s,y:r},t))}function Sx(e,t,i){let n=[],s=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:ol(r)/2,additionalAngle:o?ct/s:0},d;for(let u=0;u<s;u++){c.padding=i[u],c.size=t[u];let f=xx(e,u,c);n.push(f),a==="auto"&&(f.visible=_x(f,d),f.visible&&(d=f))}return n}function Ex(e){return e===0||e===180?"center":e<180?"left":"right"}function Mx(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function Tx(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function Dx(e,t,i){let{left:n,top:s,right:r,bottom:o}=i,{backdropColor:a}=t;if(!q(a)){let c=fi(t.borderRadius),d=It(t.backdropPadding);e.fillStyle=a;let u=n-d.left,f=s-d.top,g=r-n+d.width,p=o-s+d.height;Object.values(c).some(y=>y!==0)?(e.beginPath(),_n(e,{x:u,y:f,w:g,h:p,radius:c}),e.fill()):e.fillRect(u,f,g,p)}}function kx(e,t){let{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){let r=e._pointLabelItems[s];if(!r.visible)continue;let o=n.setContext(e.getPointLabelContext(s));Dx(i,o,r);let a=_t(o.font),{x:c,y:d,textAlign:u}=r;ui(i,e._pointLabels[s],c,d+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function _u(e,t,i,n){let{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,dt);else{let r=e.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=e.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function Cx(e,t,i,n,s){let r=e.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!n||!a||!c||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),_u(e,i,o,n),r.closePath(),r.stroke(),r.restore())}function Ax(e,t,i){return qe(e,{label:i,index:t,type:"pointLabel"})}function Nh(e,t){return e-t}function Hh(e,t){if(q(t))return null;let i=e._adapter,{parser:n,round:s,isoWeekday:r}=e._parseOpts,o=t;return typeof n=="function"&&(o=n(o)),wt(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(Bi(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,s)),+o)}function Yh(e,t,i,n){let s=Xt.length;for(let r=Xt.indexOf(e);r<s-1;++r){let o=Jr[Xt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return Xt[r]}return Xt[s-1]}function Ix(e,t,i,n,s){for(let r=Xt.length-1;r>=Xt.indexOf(i);r--){let o=Xt[r];if(Jr[o].common&&e._adapter.diff(s,n,o)>=t-1)return o}return Xt[i?Xt.indexOf(i):0]}function Px(e){for(let t=Xt.indexOf(e)+1,i=Xt.length;t<i;++t)if(Jr[Xt[t]].common)return Xt[t]}function Vh(e,t,i){if(!i)e[t]=!0;else if(i.length){let{lo:n,hi:s}=kr(i,t),r=i[n]>=t?i[n]:i[s];e[r]=!0}}function Ox(e,t,i,n){let s=e._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value,a,c;for(a=r;a<=o;a=+s.add(a,1,n))c=i[a],c>=0&&(t[c].major=!0);return t}function zh(e,t,i){let n=[],s={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,n.push({value:a,major:!1});return r===0||!i?n:Ox(e,n,s,i)}function Vr(e,t,i){let n=0,s=e.length-1,r,o,a,c;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=_e(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:c}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=_e(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:c}=e[s]);let d=o-r;return d?a+(c-a)*(t-r)/d:a}var Za,De,$d,F0,$r,ys,za,Xd,G0,Kt,Yi,Vi,ke,zi,yi,Mn,Ui,$i,jh,bs,Gh,qh,Kh,Pt,ws,jr,zr,mw,sh,Zh,vs,rh,qr,Zt,Ow,oh,ah,Ce,Tn,Ja,me,Qa,uh,iu,fs,il,Qw,ev,iv,Ur,yh,re,pi,bv,ye,ji,Gi,au,sl,vh,du,uu,Xr,gu,kh,Qv,Zr,mu,xs,yu,Hr,bu,ps,wu,ms,vu,xu,ux,gx,Dn,In,kn,_s,Hi,Cn,mi,Jr,Xt,wi,An,Su,ll,cl=tr(()=>{Ud();Za=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){let r=i.listeners[s],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xa.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let r=n.items,o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){let i=this._charts,n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){let i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){let i=this._charts.get(t);if(!i||!i.items.length)return;let n=i.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},De=new Za,$d="transparent",F0={boolean(e,t,i){return i>.5?t:e},color(e,t,i){let n=Ta(e||$d),s=n.valid&&Ta(t||$d);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}},$r=class{constructor(t,i,n,s){let r=i[n];s=Sn([t.to,s,r,t.from]);let o=Sn([t.from,r,s]);this._active=!0,this._fn=t.fn||F0[t.type||typeof o],this._easing=fn[t.easing]||fn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);let s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Sn([t.to,i,s,t.from]),this._from=Sn([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let i=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to,c;if(this._active=r!==a&&(o||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=r;return}c=i/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,a,c)}wait(){let t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){let i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}},ys=class{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!K(t))return;let i=Object.keys(ht.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let r=t[s];if(!K(r))return;let o={};for(let a of i)o[a]=r[a];(lt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){let n=i.options,s=W0(t,n);if(!s)return[];let r=this._createAnimations(s,n);return n.$shared&&B0(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){let n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,i));continue}let u=i[d],f=r[d],g=n.get(d);if(f)if(g&&f.active()){f.update(g,u,a);continue}else f.cancel();if(!g||!g.duration){t[d]=u;continue}r[d]=f=new $r(g,t,d,u),s.push(f)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}let n=this._createAnimations(t,i);if(n.length)return De.add(this._chart,n),!0}};za=e=>e==="reset"||e==="none",Xd=(e,t)=>t?e:Object.assign({},e),G0=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:Uh(i,!0),values:null},Kt=class{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ya(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&cs(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(f,g,p,y)=>f==="x"?g:f==="r"?y:p,r=i.xAxisID=$(n.xAxisID,Va(t,"x")),o=i.yAxisID=$(n.yAxisID,Va(t,"y")),a=i.rAxisID=$(n.rAxisID,Va(t,"r")),c=i.indexAxis,d=i.iAxisID=s(c,r,o,a),u=i.vAxisID=s(c,o,r,a);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(o),i.rScale=this.getScaleForId(a),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&wa(this._data,this),t._stacked&&cs(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(K(i)){let s=this._cachedMeta;this._data=Y0(i,s)}else if(n!==i){if(n){wa(n,this);let s=this._cachedMeta;cs(s),s._parsed=[]}i&&Object.isExtensible(i)&&Md(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,n=this.getDataset(),s=!1;this._dataCheck();let r=i._stacked;i._stacked=Ya(i.vScale,i),i.stack!==n.stack&&(s=!0,cs(i),i.stack=n.stack),this._resyncElements(t),(s||r!==i._stacked)&&(Kd(this,i._parsed),i._stacked=Ya(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,a=r.axis,c=t===0&&i===s.length?!0:n._sorted,d=t>0&&n._parsed[t-1],u,f,g;if(this._parsing===!1)n._parsed=s,n._sorted=!0,g=s;else{lt(s[t])?g=this.parseArrayData(n,s,t,i):K(s[t])?g=this.parseObjectData(n,s,t,i):g=this.parsePrimitiveData(n,s,t,i);let p=()=>f[a]===null||d&&f[a]<d[a];for(u=0;u<i;++u)n._parsed[u+t]=f=g[u],c&&(p()&&(c=!1),d=f);n._sorted=c}o&&Kd(this,g)}parsePrimitiveData(t,i,n,s){let{iScale:r,vScale:o}=t,a=r.axis,c=o.axis,d=r.getLabels(),u=r===o,f=new Array(s),g,p,y;for(g=0,p=s;g<p;++g)y=g+n,f[g]={[a]:u||r.parse(d[y],y),[c]:o.parse(i[y],y)};return f}parseArrayData(t,i,n,s){let{xScale:r,yScale:o}=t,a=new Array(s),c,d,u,f;for(c=0,d=s;c<d;++c)u=c+n,f=i[u],a[c]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(t,i,n,s){let{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,d=new Array(s),u,f,g,p;for(u=0,f=s;u<f;++u)g=u+n,p=i[g],d[u]={x:r.parse(Ge(p,a),g),y:o.parse(Ge(p,c),g)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){let s=this.chart,r=this._cachedMeta,o=i[t.axis],a={keys:Uh(s,!0),values:i._stacks[t.axis]._visualValues};return Gd(a,o,r.index,{mode:n})}updateRangeFromParsed(t,i,n,s){let r=n[i.axis],o=r===null?NaN:r,a=s&&n._stacks[i.axis];s&&a&&(s.values=a,o=Gd(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,i){let n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,o=s.length,a=this._getOtherScale(t),c=G0(i,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=z0(a),g,p;function y(){p=s[g];let w=p[a.axis];return!wt(p[t.axis])||u>w||f<w}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(d,t,p,c),r));++g);if(r){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(d,t,p,c);break}}return d}getAllParsedValues(t){let i=this._cachedMeta._parsed,n=[],s,r,o;for(s=0,r=i.length;s<r;++s)o=i[s][t.axis],wt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,n=i.iScale,s=i.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=H0($(this.options.clip,N0(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],r=i.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,d=this.options.drawActiveElementsOnTop,u;for(n.dataset&&n.dataset.draw(t,r,a,c),u=a;u<a+c;++u){let f=s[u];f.hidden||(f.active&&d?o.push(f):f.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,i){let n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){let s=this.getDataset(),r;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];r=o.$context||(o.$context=j0(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=$0(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){let s=i==="active",r=this._cachedDataOpts,o=t+"-"+i,a=r[o],c=this.enableOptionSharing&&yn(n);if(a)return Xd(a,c);let d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],g=d.getOptionScopes(this.getDataset(),u),p=Object.keys(ht.elements[t]),y=()=>this.getContext(n,s,i),w=d.resolveNamedOptions(g,p,y,f);return w.$shared&&(w.$shared=c,r[o]=Object.freeze(Xd(w,c))),w}_resolveAnimations(t,i,n){let s=this.chart,r=this._cachedDataOpts,o=`animation-${i}`,a=r[o];if(a)return a;let c;if(s.options.animation!==!1){let u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,i),g=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(g,this.getContext(t,n,i))}let d=new ys(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||za(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(i,r)||r!==s;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:o}}updateElement(t,i,n,s){za(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!za(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;let r=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,n=this._cachedMeta.data;for(let[a,c,d]of this._syncList)this[a](c,d);this._syncList=[];let s=n.length,r=i.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,i,n=!0){let s=this._cachedMeta,r=s.data,o=t+i,a,c=d=>{for(d.length+=i,a=d.length-1;a>=o;a--)d[a]=d[a-i]};for(c(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,i),n&&this.updateElements(r,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){let n=this._cachedMeta;if(this._parsing){let s=n._parsed.splice(t,i);n._stacked&&cs(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};R(Kt,"defaults",{}),R(Kt,"datasetElementType",null),R(Kt,"dataElementType",null);Yi=class extends Kt{parsePrimitiveData(t,i,n,s){return Zd(t,i,n,s)}parseArrayData(t,i,n,s){return Zd(t,i,n,s)}parseObjectData(t,i,n,s){let{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?a:c,u=o.axis==="x"?a:c,f=[],g,p,y,w;for(g=n,p=n+s;g<p;++g)w=i[g],y={},y[r.axis]=r.parse(Ge(w,d),g),f.push($h(Ge(w,u),y,o,g));return f}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);let r=n._custom;r&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:n,vScale:s}=i,r=this.getParsed(t),o=r._custom,a=Ua(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){let r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),d=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:g}=this._getSharedOptions(i,s);for(let p=i;p<i+n;p++){let y=this.getParsed(p),w=r||q(y[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,u),_=(y._stacks||{})[a.axis],S={horizontal:d,base:w.base,enableBorderRadius:!_||Ua(y._custom)||o===_._top||o===_._bottom,x:d?w.head:v.center,y:d?v.center:w.head,height:d?v.size:Math.abs(w.size),width:d?Math.abs(w.size):v.size};g&&(S.options=f||this.resolveDataElementOptions(p,t[p].active?"active":s));let M=S.options||t[p].options;ew(S,M,_,o),nw(S,M,u.ratio),this.updateElement(t[p],p,S,s)}}_getStacks(t,i){let{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(i),c=a&&a[n.axis],d=u=>{let f=u._parsed.find(p=>p[n.axis]===c),g=f&&f[u.vScale.axis];if(q(g)||isNaN(g))return!0};for(let u of s)if(!(i!==void 0&&d(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){let s=this._getStacks(t,n),r=i!==void 0?s.indexOf(i):-1;return r===-1?s.length-1:r}_getRuler(){let t=this.options,i=this._cachedMeta,n=i.iScale,s=[],r,o;for(r=0,o=i.data.length;r<o;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));let a=t.barThickness;return{min:a||K0(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(t),d=c._custom,u=Ua(d),f=c[i.axis],g=0,p=n?this.applyStack(i,c,n):f,y,w;p!==f&&(g=p-f,p=f),u&&(f=d.barStart,p=d.barEnd-d.barStart,f!==0&&pe(f)!==pe(d.barEnd)&&(g=0),g+=f);let v=!q(r)&&!u?r:g,_=i.getPixelForValue(v);if(this.chart.getDataVisibility(t)?y=i.getPixelForValue(g+p):y=_,w=y-_,Math.abs(w)<o){w=Q0(w,i,a)*o,f===a&&(_-=w/2);let S=i.getPixelForDecimal(0),M=i.getPixelForDecimal(1),D=Math.min(S,M),T=Math.max(S,M);_=Math.max(Math.min(_,T),D),y=_+w,n&&!u&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(y)-i.getValueForPixel(_))}if(_===i.getPixelForValue(a)){let S=pe(w)*i.getLineWidthForValue(a)/2;_+=S,w-=S}return{size:w,base:_,head:y,center:y+w/2}}_calculateBarIndexPixels(t,i){let n=i.scale,s=this.options,r=s.skipNull,o=$(s.maxBarThickness,1/0),a,c;if(i.grouped){let d=r?this._getStackCount(t):i.stackCount,u=s.barThickness==="flex"?Z0(t,i,s,d):X0(t,i,s,d),f=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*f+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),c=Math.min(o,i.min*i.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){let t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length,r=0;for(;r<s;++r)this.getParsed(r)[i.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}};R(Yi,"id","bar"),R(Yi,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),R(Yi,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});Vi=class extends Kt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,s){let r=super.parsePrimitiveData(t,i,n,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(t,i,n,s){let r=super.parseArrayData(t,i,n,s);for(let o=0;o<r.length;o++){let a=i[n+o];r[o]._custom=$(a[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(t,i,n,s){let r=super.parseObjectData(t,i,n,s);for(let o=0;o<r.length;o++){let a=i[n+o];r[o]._custom=$(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y),d=o._custom;return{label:n[t]||"",value:"("+a+", "+c+(d?", "+d:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,s),u=o.axis,f=a.axis;for(let g=i;g<i+n;g++){let p=t[g],y=!r&&this.getParsed(g),w={},v=w[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(y[u]),_=w[f]=r?a.getBasePixel():a.getPixelForValue(y[f]);w.skip=isNaN(v)||isNaN(_),d&&(w.options=c||this.resolveDataElementOptions(g,p.active?"active":s),r&&(w.options.radius=0)),this.updateElement(p,g,w,s)}}resolveDataElementOptions(t,i){let n=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let r=s.radius;return i!=="active"&&(s.radius=0),s.radius+=$(n&&n._custom,r),s}};R(Vi,"id","bubble"),R(Vi,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),R(Vi,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});ke=class extends Kt{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let r=c=>+n[c];if(K(n[t])){let{key:c="value"}=this._parsing;r=d=>+Ge(n[d],c)}let o,a;for(o=t,a=t+i;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return he(this.options.rotation-90)}_getCircumference(){return he(this.options.circumference)}_getRotationExtents(){let t=dt,i=-dt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),i=Math.max(i,r+o)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:n}=i,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),c=Math.min(md(this.options.cutout,a),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:g,ratioY:p,offsetX:y,offsetY:w}=sw(f,u,c),v=(n.width-o)/g,_=(n.height-o)/p,S=Math.max(Math.min(v,_)/2,0),M=fa(this.options.radius,S),D=Math.max(M*c,0),T=(M-D)/this._getVisibleDatasetWeightTotal();this.offsetX=y*M,this.offsetY=w*M,s.total=this.calculateTotal(),this.outerRadius=M-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*d,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){let n=this.options,s=this._cachedMeta,r=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/dt)}updateElements(t,i,n,s){let r=s==="reset",o=this.chart,a=o.chartArea,d=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,g=r&&d.animateScale,p=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:w,includeOptions:v}=this._getSharedOptions(i,s),_=this._getRotation(),S;for(S=0;S<i;++S)_+=this._circumference(S,r);for(S=i;S<i+n;++S){let M=this._circumference(S,r),D=t[S],T={x:u+this.offsetX,y:f+this.offsetY,startAngle:_,endAngle:_+M,circumference:M,outerRadius:y,innerRadius:p};v&&(T.options=w||this.resolveDataElementOptions(S,D.active?"active":s)),_+=M,this.updateElement(D,S,T,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,n=0,s;for(s=0;s<i.length;s++){let r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?dt*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=vn(i._parsed[t],n.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let i=0,n=this.chart,s,r,o,a,c;if(!t){for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){o=n.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=a.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,s=t.length;n<s;++n){let r=this.resolveDataElementOptions(n);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max($(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};R(ke,"id","doughnut"),R(ke,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),R(ke,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),R(ke,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((r,o)=>{let c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});zi=class extends Kt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=i,o=this.chart._animationsDisabled,{start:a,count:c}=Sa(i,s,o);this._drawStart=a,this._drawCount=c,Ea(i)&&(a=0,c=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;let d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},t),this.updateElements(s,a,c,t)}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(i,s),g=o.axis,p=a.axis,{spanGaps:y,segment:w}=this.options,v=Bi(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||s==="none",S=i+n,M=t.length,D=i>0&&this.getParsed(i-1);for(let T=0;T<M;++T){let C=t[T],A=_?C:{};if(T<i||T>=S){A.skip=!0;continue}let I=this.getParsed(T),O=q(I[p]),L=A[g]=o.getPixelForValue(I[g],T),F=A[p]=r||O?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,I,c):I[p],T);A.skip=isNaN(L)||isNaN(F)||O,A.stop=T>0&&Math.abs(I[g]-D[g])>v,w&&(A.parsed=I,A.raw=d.data[T]),f&&(A.options=u||this.resolveDataElementOptions(T,C.active?"active":s)),_||this.updateElement(C,T,A,s),D=I}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;let r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}};R(zi,"id","line"),R(zi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),R(zi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});yi=class extends Kt{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=vn(i._parsed[t].r,n.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,i,n,s){return Oa.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{let r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(s/2,0),o=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,i,n,s){let r=s==="reset",o=this.chart,c=o.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,f=d.yCenter,g=d.getIndexAngle(0)-.5*ct,p=g,y,w=360/this.countVisibleElements();for(y=0;y<i;++y)p+=this._computeAngle(y,s,w);for(y=i;y<i+n;y++){let v=t[y],_=p,S=p+this._computeAngle(y,s,w),M=o.getDataVisibility(y)?d.getDistanceFromCenterForValue(this.getParsed(y).r):0;p=S,r&&(c.animateScale&&(M=0),c.animateRotate&&(_=S=g));let D={x:u,y:f,innerRadius:0,outerRadius:M,startAngle:_,endAngle:S,options:this.resolveDataElementOptions(y,v.active?"active":s)};this.updateElement(v,y,D,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?he(this.resolveDataElementOptions(t,i).angle||n):0}};R(yi,"id","polarArea"),R(yi,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),R(yi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((r,o)=>{let c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});Mn=class extends ke{};R(Mn,"id","pie"),R(Mn,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});Ui=class extends Kt{getLabelAndValue(t){let i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,s){return Oa.bind(this)(t,i,n,s)}update(t){let i=this._cachedMeta,n=i.dataset,s=i.data||[],r=i.iScale.getLabels();if(n.points=s,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(n,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,n,s){let r=this._cachedMeta.rScale,o=s==="reset";for(let a=i;a<i+n;a++){let c=t[a],d=this.resolveDataElementOptions(a,c.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),f=o?r.xCenter:u.x,g=o?r.yCenter:u.y,p={x:f,y:g,angle:u.angle,skip:isNaN(f)||isNaN(g),options:d};this.updateElement(c,a,p,s)}}};R(Ui,"id","radar"),R(Ui,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),R(Ui,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});$i=class extends Kt{getLabelAndValue(t){let i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:r}=i,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+c+")"}}update(t){let i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled,{start:r,count:o}=Sa(i,n,s);if(this._drawStart=r,this._drawCount=o,Ea(i)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:c}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=n;let d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:d},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,n,s){let r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(i,s),f=this.getSharedOptions(u),g=this.includeOptions(s,f),p=o.axis,y=a.axis,{spanGaps:w,segment:v}=this.options,_=Bi(w)?w:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||r||s==="none",M=i>0&&this.getParsed(i-1);for(let D=i;D<i+n;++D){let T=t[D],C=this.getParsed(D),A=S?T:{},I=q(C[y]),O=A[p]=o.getPixelForValue(C[p],D),L=A[y]=r||I?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,C,c):C[y],D);A.skip=isNaN(O)||isNaN(L)||I,A.stop=D>0&&Math.abs(C[p]-M[p])>_,v&&(A.parsed=C,A.raw=d.data[D]),g&&(A.options=f||this.resolveDataElementOptions(D,T.active?"active":s)),S||this.updateElement(T,D,A,s),M=C}this.updateSharedOptions(f,s,u)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let a=0;for(let c=i.length-1;c>=0;--c)a=Math.max(a,i[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}let n=t.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;let r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}};R($i,"id","scatter"),R($i,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),R($i,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});jh=Object.freeze({__proto__:null,BarController:Yi,BubbleController:Vi,DoughnutController:ke,LineController:zi,PieController:Mn,PolarAreaController:yi,RadarController:Ui,ScatterController:$i});bs=class{constructor(t){R(this,"options");this.options=t||{}}static override(t){Object.assign(bs.prototype,t)}init(){}formats(){return Ni()}parse(){return Ni()}format(){return Ni()}add(){return Ni()}diff(){return Ni()}startOf(){return Ni()}endOf(){return Ni()}},Gh={_date:bs};qh={evaluateInteractionItems:Ss,modes:{index(e,t,i,n){let s=gi(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?$a(e,s,r,n,o):ja(e,s,r,!1,n,o),c=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{let u=a[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,i,n){let s=gi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1,a=i.intersect?$a(e,s,r,n,o):ja(e,s,r,!1,n,o);if(a.length>0){let c=a[0].datasetIndex,d=e.getDatasetMeta(c).data;a=[];for(let u=0;u<d.length;++u)a.push({element:d[u],datasetIndex:c,index:u})}return a},point(e,t,i,n){let s=gi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return $a(e,s,r,n,o)},nearest(e,t,i,n){let s=gi(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return ja(e,s,r,i.intersect,n,o)},x(e,t,i,n){let s=gi(t,e);return th(e,s,"x",i.intersect,n)},y(e,t,i,n){let s=gi(t,e);return th(e,s,"y",i.intersect,n)}}},Kh=["left","top","right","bottom"];Pt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;let s=It(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),a=uw(e.boxes),c=a.vertical,d=a.horizontal;it(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});let u=c.reduce((w,v)=>v.box.options&&v.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),g=Object.assign({},s);Xh(g,It(n));let p=Object.assign({maxPadding:g,w:r,h:o,x:s.left,y:s.top},s),y=hw(c.concat(d),f);gs(a.fullSize,p,f,y),gs(c,p,f,y),gs(d,p,f,y)&&gs(c,p,f,y),gw(p),nh(a.leftAndTop,p,f,y),p.x+=p.w,p.y+=p.h,nh(a.rightAndBottom,p,f,y),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},it(a.chartArea,w=>{let v=w.box;Object.assign(v,e.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},ws=class{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}},jr=class extends ws{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},zr="$chartjs",mw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sh=e=>e===null||e==="";Zh=Nd?{passive:!0}:!1;vs=new Map,rh=0;qr=class extends ws{acquireContext(t,i){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(yw(t,i),n):null}releaseContext(t){let i=t.canvas;if(!i[zr])return!1;let n=i[zr].initial;["height","width"].forEach(r=>{let o=n[r];q(o)?i.removeAttribute(r):i.setAttribute(r,o)});let s=n.style||{};return Object.keys(s).forEach(r=>{i.style[r]=s[r]}),i.width=i.width,delete i[zr],!0}addEventListener(t,i,n){this.removeEventListener(t,i);let s=t.$proxies||(t.$proxies={}),o={attach:xw,detach:_w,resize:Mw}[i]||Tw;s[i]=o(t,i,n)}removeEventListener(t,i){let n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Ga,detach:Ga,resize:Ga}[i]||ww)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return Wd(t,i,n,s)}isAttached(t){let i=t&&Rr(t);return!!(i&&i.isConnected)}};Zt=class{constructor(){R(this,"x");R(this,"y");R(this,"active",!1);R(this,"options");R(this,"$animations")}tooltipPosition(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return Bi(this.x)&&Bi(this.y)}getProps(t,i){let n=this.$animations;if(!i||!n)return this;let s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}};R(Zt,"defaults",{}),R(Zt,"defaultRoutes");Ow=e=>e==="left"?"right":e==="right"?"left":e,oh=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,ah=(e,t)=>Math.min(t||e,e);Ce=class extends Zt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=Gt(t,Number.POSITIVE_INFINITY),i=Gt(i,Number.NEGATIVE_INFINITY),n=Gt(n,Number.POSITIVE_INFINITY),s=Gt(s,Number.NEGATIVE_INFINITY),{min:Gt(t,n),max:Gt(i,s),minDefined:wt(t),maxDefined:wt(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:i,max:n};let a=this.getMatchingVisibleMetas();for(let c=0,d=a.length;c<d;++c)o=a[c].controller.getMinMax(this,t),s||(i=Math.min(i,o.min)),r||(n=Math.max(n,o.max));return i=r&&i>n?n:i,n=s&&i>n?i:n,{min:Gt(i,Gt(n,i)),max:Gt(n,Gt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(t,i,n){let{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Pd(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?lh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Dw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ot(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let i=this.options.ticks,n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=ot(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,i=t.ticks,n=ah(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,r=i.maxRotation,o=s,a,c,d;if(!this._isVisible()||!i.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let u=this._getLabelSizes(),f=u.widest.width,g=u.highest.height,p=Dt(this.chart.width-f,0,this.maxWidth);a=t.offset?this.maxWidth/n:p/(n-1),f+6>a&&(a=p/(n-(t.offset?.5:1)),c=this.maxHeight-us(t.grid)-i.padding-ch(t.title,this.chart.options.font),d=Math.sqrt(f*f+g*g),o=Dr(Math.min(Math.asin(Dt((u.highest.height+6)/a,-1,1)),Math.asin(Dt(c/d,-1,1))-Math.asin(Dt(g/d,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=ch(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=us(r)+c):(t.height=this.maxHeight,t.width=us(r)+c),n.display&&this.ticks.length){let{first:d,last:u,widest:f,highest:g}=this._getLabelSizes(),p=n.padding*2,y=he(this.labelRotation),w=Math.cos(y),v=Math.sin(y);if(a){let _=n.mirror?0:v*f.width+w*g.height;t.height=Math.min(this.maxHeight,t.height+_+p)}else{let _=n.mirror?0:w*f.width+v*g.height;t.width=Math.min(this.maxWidth,t.width+_+p)}this._calculatePadding(d,u,v,w)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){let{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),g=0,p=0;c?d?(g=s*t.width,p=n*i.height):(g=n*t.height,p=s*i.width):r==="start"?p=i.width:r==="end"?g=t.width:r!=="inner"&&(g=t.width/2,p=i.width/2),this.paddingLeft=Math.max((g-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-f+o)*this.width/(this.width-f),0)}else{let u=i.height/2,f=t.height/2;r==="start"?(u=0,f=t.height):r==="end"&&(u=i.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)q(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let i=this.options.ticks.sampleSize,n=this.ticks;i<n.length&&(n=lh(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){let{ctx:s,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(i/ah(i,n)),d=0,u=0,f,g,p,y,w,v,_,S,M,D,T;for(f=0;f<i;f+=c){if(y=t[f].label,w=this._resolveTickFontOptions(f),s.font=v=w.string,_=r[v]=r[v]||{data:{},gc:[]},S=w.lineHeight,M=D=0,!q(y)&&!lt(y))M=rs(s,_.data,_.gc,M,y),D=S;else if(lt(y))for(g=0,p=y.length;g<p;++g)T=y[g],!q(T)&&!lt(T)&&(M=rs(s,_.data,_.gc,M,T),D+=S);o.push(M),a.push(D),d=Math.max(M,d),u=Math.max(D,u)}Rw(r,i);let C=o.indexOf(d),A=a.indexOf(u),I=O=>({width:o[O]||0,height:a[O]||0});return{first:I(0),last:I(i-1),widest:I(C),highest:I(A),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let i=this._startPixel+t*this._length;return xd(this._alignToPixels?hi(this.chart,i,0):i)}getDecimalForPixel(t){let i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){let i=this.ticks||[];if(t>=0&&t<i.length){let n=i[t];return n.$context||(n.$context=Bw(this.getContext(),t,n))}return this.$context||(this.$context=Fw(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,i=he(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*n>a*s?a/n:c/s:c*s<a*n?c/n:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let i=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:a}=s,c=r.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),g=us(r),p=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,v=w/2,_=function(Z){return hi(n,Z,w)},S,M,D,T,C,A,I,O,L,F,V,J;if(o==="top")S=_(this.bottom),A=this.bottom-g,O=S-v,F=_(t.top)+v,J=t.bottom;else if(o==="bottom")S=_(this.top),F=t.top,J=_(t.bottom)-v,A=S+v,O=this.top+g;else if(o==="left")S=_(this.right),C=this.right-g,I=S-v,L=_(t.left)+v,V=t.right;else if(o==="right")S=_(this.left),L=t.left,V=_(t.right)-v,C=S+v,I=this.left+g;else if(i==="x"){if(o==="center")S=_((t.top+t.bottom)/2+.5);else if(K(o)){let Z=Object.keys(o)[0],ft=o[Z];S=_(this.chart.scales[Z].getPixelForValue(ft))}F=t.top,J=t.bottom,A=S+v,O=A+g}else if(i==="y"){if(o==="center")S=_((t.left+t.right)/2);else if(K(o)){let Z=Object.keys(o)[0],ft=o[Z];S=_(this.chart.scales[Z].getPixelForValue(ft))}C=S-v,I=C-g,L=t.left,V=t.right}let X=$(s.ticks.maxTicksLimit,f),U=Math.max(1,Math.ceil(f/X));for(M=0;M<f;M+=U){let Z=this.getContext(M),ft=r.setContext(Z),at=a.setContext(Z),bt=ft.lineWidth,Rt=ft.color,Ie=at.dash||[],zt=at.dashOffset,N=ft.tickWidth,oe=ft.tickColor,Pe=ft.tickBorderDash||[],z=ft.tickBorderDashOffset;D=Lw(this,M,c),D!==void 0&&(T=hi(n,D,bt),d?C=I=L=V=T:A=O=F=J=T,p.push({tx1:C,ty1:A,tx2:I,ty2:O,x1:L,y1:F,x2:V,y2:J,width:bt,color:Rt,borderDash:Ie,borderDashOffset:zt,tickWidth:N,tickColor:oe,tickBorderDash:Pe,tickBorderDashOffset:z}))}return this._ticksLength=f,this._borderValue=S,p}_computeLabelItems(t){let i=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=r,g=us(n.grid),p=g+u,y=f?-u:p,w=-he(this.labelRotation),v=[],_,S,M,D,T,C,A,I,O,L,F,V,J="middle";if(s==="top")C=this.bottom-y,A=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+y,A=this._getXAxisLabelAlignment();else if(s==="left"){let U=this._getYAxisLabelAlignment(g);A=U.textAlign,T=U.x}else if(s==="right"){let U=this._getYAxisLabelAlignment(g);A=U.textAlign,T=U.x}else if(i==="x"){if(s==="center")C=(t.top+t.bottom)/2+p;else if(K(s)){let U=Object.keys(s)[0],Z=s[U];C=this.chart.scales[U].getPixelForValue(Z)+p}A=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")T=(t.left+t.right)/2-p;else if(K(s)){let U=Object.keys(s)[0],Z=s[U];T=this.chart.scales[U].getPixelForValue(Z)}A=this._getYAxisLabelAlignment(g).textAlign}i==="y"&&(c==="start"?J="top":c==="end"&&(J="bottom"));let X=this._getLabelSizes();for(_=0,S=a.length;_<S;++_){M=a[_],D=M.label;let U=r.setContext(this.getContext(_));I=this.getPixelForTick(_)+r.labelOffset,O=this._resolveTickFontOptions(_),L=O.lineHeight,F=lt(D)?D.length:1;let Z=F/2,ft=U.color,at=U.textStrokeColor,bt=U.textStrokeWidth,Rt=A;o?(T=I,A==="inner"&&(_===S-1?Rt=this.options.reverse?"left":"right":_===0?Rt=this.options.reverse?"right":"left":Rt="center"),s==="top"?d==="near"||w!==0?V=-F*L+L/2:d==="center"?V=-X.highest.height/2-Z*L+L:V=-X.highest.height+L/2:d==="near"||w!==0?V=L/2:d==="center"?V=X.highest.height/2-Z*L:V=X.highest.height-F*L,f&&(V*=-1),w!==0&&!U.showLabelBackdrop&&(T+=L/2*Math.sin(w))):(C=I,V=(1-F)*L/2);let Ie;if(U.showLabelBackdrop){let zt=It(U.backdropPadding),N=X.heights[_],oe=X.widths[_],Pe=V-zt.top,z=0-zt.left;switch(J){case"middle":Pe-=N/2;break;case"bottom":Pe-=N;break}switch(A){case"center":z-=oe/2;break;case"right":z-=oe;break;case"inner":_===S-1?z-=oe:_>0&&(z-=oe/2);break}Ie={left:z,top:Pe,width:oe+zt.width,height:N+zt.height,color:U.backdropColor}}v.push({label:D,font:O,textOffset:V,options:{rotation:w,color:ft,strokeColor:at,strokeWidth:bt,textAlign:Rt,textBaseline:J,translation:[T,C],backdrop:Ie}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:i}=this.options;if(-he(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:i,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,c=o.widest.width,d,u;return i==="left"?s?(u=this.right+r,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-a,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):i==="right"?s?(u=this.left+r,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+a,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:i},left:n,top:s,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let s=this.ticks.findIndex(r=>r.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(i.display)for(r=0,o=s.length;r<o;++r){let c=s[r];i.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),i.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:i,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;let a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue,d,u,f,g;this.isHorizontal()?(d=hi(t,this.left,o)-o/2,u=hi(t,this.right,a)+a/2,f=g=c):(f=hi(t,this.top,o)-o/2,g=hi(t,this.bottom,a)+a/2,d=u=c),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(d,f),i.lineTo(u,g),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&as(n,s);let r=this.getLabelItems(t);for(let o of r){let a=o.options,c=o.font,d=o.label,u=o.textOffset;ui(n,d,0,u,c,a)}s&&ls(n)}drawTitle(){let{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;let r=_t(n.font),o=It(n.padding),a=n.align,c=r.lineHeight/2;i==="bottom"||i==="center"||K(i)?(c+=o.bottom,lt(n.text)&&(c+=r.lineHeight*(n.text.length-1))):c+=o.top;let{titleX:d,titleY:u,maxWidth:f,rotation:g}=Nw(this,c,i,a);ui(t,n.text,0,0,r,{color:n.color,maxWidth:f,rotation:g,textAlign:Ww(a,i,s),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,i=t.ticks&&t.ticks.z||0,n=$(t.grid&&t.grid.z,-1),s=$(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ce.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],r,o;for(r=0,o=i.length;r<o;++r){let a=i[r];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let i=this.options.ticks.setContext(this.getContext(t));return _t(i.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Tn=class{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let i=Object.getPrototypeOf(t),n;Vw(i)&&(n=this.register(i));let s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Hw(t,o,n),this.override&&ht.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in ht[s]&&(delete ht[s][n],this.override&&delete di[n])}};Ja=class{constructor(){this.controllers=new Tn(Kt,"datasets",!0),this.elements=new Tn(Zt,"elements"),this.plugins=new Tn(Object,"plugins"),this.scales=new Tn(Ce,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{let r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):it(s,o=>{let a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){let s=Tr(t);ot(n["before"+s],[],n),i[t](n),ot(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){let n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){let s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}},me=new Ja,Qa=class{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,s){s=s||{};for(let r of t){let o=r.plugin,a=o[n],c=[i,s,r.options];if(ot(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){q(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){let n=t&&t.config,s=$(n.options&&n.options.plugins,{}),r=zw(n);return s===!1&&!i?[]:$w(t,r,s,i)}_notifyStateChanges(t){let i=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}};uh=new Map,iu=new Set;fs=(e,t,i)=>{let n=Ge(t,i);n!==void 0&&e.add(n)},il=class{constructor(t){this._config=Jw(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=eu(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),tu(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Nr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Nr(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Nr(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){let i=t.id,n=this.type;return Nr(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){let n=this._scopeCache,s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){let{options:s,type:r}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;let c=new Set;i.forEach(u=>{t&&(c.add(t),u.forEach(f=>fs(c,t,f))),u.forEach(f=>fs(c,s,f)),u.forEach(f=>fs(c,di[r]||{},f)),u.forEach(f=>fs(c,ht,f)),u.forEach(f=>fs(c,Ar,f))});let d=Array.from(c);return d.length===0&&d.push(Object.create(null)),iu.has(i)&&o.set(i,d),d}chartOptionScopes(){let{options:t,type:i}=this;return[t,di[i]||{},ht.datasets[i]||{},{type:i},ht,Ar]}resolveNamedOptions(t,i,n,s=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=fh(this._resolverCache,t,s),c=o;if(tv(o,i)){r.$shared=!1,n=$e(n)?n():n;let d=this.createResolver(t,n,a);c=Fi(o,n,d)}for(let d of i)r[d]=c[d];return r}createResolver(t,i,n=[""],s){let{resolver:r}=fh(this._resolverCache,t,n);return K(i)?Fi(r,i,void 0,s):r}};Qw=e=>K(e)&&Object.getOwnPropertyNames(e).some(t=>$e(e[t]));ev="4.4.9",iv=["top","bottom","left","right","chartArea"];Ur={},yh=e=>{let t=nu(e);return Object.values(Ur).filter(i=>i.canvas===t).pop()};re=class{static register(...t){me.add(...t),bh()}static unregister(...t){me.remove(...t),bh()}constructor(t,i){let n=this.config=new il(i),s=nu(t),r=yh(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Qh(s)),this.platform.updateConfig(n);let a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,d=c&&c.height,u=c&&c.width;if(this.id=pd(),this.ctx=a,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Qa,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Td(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Ur[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}De.listen(this,"complete",mh),De.listen(this,"progress",nv),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:r}=this;return q(t)?i&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return me}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():La(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Da(this.canvas,this.ctx),this}stop(){return De.stop(this),this}resize(t,i){De.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,i,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,La(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ot(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};it(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{}),r=[];i&&(r=r.concat(Object.keys(i).map(o=>{let a=i[o],c=el(o,a),d=c==="r",u=c==="x";return{options:a,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),it(r,o=>{let a=o.options,c=a.id,d=el(c,a),u=$(a.type,o.dtype);(a.position===void 0||gh(a.position,d)!==gh(o.dposition))&&(a.position=o.dposition),s[c]=!0;let f=null;if(c in n&&n[c].type===u)f=n[c];else{let g=me.getScale(u);f=new g({id:c,type:u,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(a,t)}),it(s,(o,a)=>{o||delete n[a]}),it(n,o=>{Pt.configure(this,o,o.options),Pt.addBox(this,o)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(ph("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){let r=i[n],o=this.getDatasetMeta(n),a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=r.indexAxis||tl(a,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{let c=me.getController(a),{datasetElementType:d,dataElementType:u}=ht.datasets[a];Object.assign(c,{dataElementType:me.getElement(u),datasetElementType:d&&me.getElement(d)}),o.controller=new c(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){it(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){let{controller:f}=this.getDatasetMeta(d),g=!s&&r.indexOf(f)===-1;f.buildOrUpdateElements(g),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||it(r,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ph("z","_idx"));let{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){it(this.scales,t=>{Pt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!ga(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:n,start:s,count:r}of i){let o=n==="_removeElements"?-r:r;sv(t,s,o)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<i;r++)if(!ga(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pt.update(this,this.width,this.height,t);let i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],it(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,$e(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(De.has(this)?this.attached&&!De.running(this)&&De.start(this):(this.draw(),mh({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,n=[],s,r;for(s=0,r=i.length;s<r;++s){let o=i[s];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=Ha(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&as(i,s),t.controller.draw(),s&&ls(i),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Se(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){let r=qh.modes[i];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],n=this._metasets,s=n.filter(r=>r&&r._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=qe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){let n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){let s=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);yn(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),De.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Da(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Ur[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,n=(r,o)=>{i.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};it(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,n=(c,d)=>{i.addEventListener(this,c,d),t[c]=d},s=(c,d)=>{t[c]&&(i.removeEventListener(this,c,d),delete t[c])},r=(c,d)=>{this.canvas&&this.resize(c,d)},o,a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",a)},i.isAttached(this.canvas)?a():o()}unbindEvents(){it(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},it(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){let s=n?"set":"remove",r,o,a,c;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=t.length;a<c;++a){o=t[a];let d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{let a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!os(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){let s=this.options.hover,r=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(i,t),a=n?t:r(t,i);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,i){let n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;let r=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,i,n){let{_active:s=[],options:r}=this,o=i,a=this._getActiveElements(t,s,n,o),c=bd(t),d=rv(t,this._lastEvent,n,c);n&&(this._lastEvent=null,ot(r.onHover,[t,a,this],this),c&&ot(r.onClick,[t,a,this],this));let u=!os(a,s);return(u||i)&&(this._active=a,this._updateHoverStyles(a,s,i)),this._lastEvent=d,u}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}};R(re,"defaults",ht),R(re,"instances",Ur),R(re,"overrides",di),R(re,"registry",me),R(re,"version",ev),R(re,"getChart",yh);pi=class extends Zt{constructor(i){super();R(this,"circumference");R(this,"endAngle");R(this,"fullCircles");R(this,"innerRadius");R(this,"outerRadius");R(this,"pixelMargin");R(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,n,s){let r=this.getProps(["x","y"],s),{angle:o,distance:a}=ba(r,{x:i,y:n}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,y=$(g,d-c),w=wn(o,c,d)&&c!==d,v=y>=dt||w,_=Me(a,u+p,f+p);return v&&_}getCenterPoint(i){let{x:n,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:d,spacing:u}=this.options,f=(r+o)/2,g=(a+c+u+d)/2;return{x:n+Math.cos(f)*g,y:s+Math.sin(f)*g}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){let{options:n,circumference:s}=this,r=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>dt?Math.floor(s/dt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;i.save();let c=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(c)*r,Math.sin(c)*r);let d=1-Math.sin(Math.min(ct,s||0)),u=r*d;i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,cv(i,this,u,o,a),dv(i,this,u,o,a),i.restore()}};R(pi,"id","arc"),R(pi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),R(pi,"defaultRoutes",{backgroundColor:"backgroundColor"}),R(pi,"descriptors",{_scriptable:!0,_indexable:i=>i!=="borderDash"});bv=typeof Path2D=="function";ye=class extends Zt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let s=n.spanGaps?this._loop:this._fullLoop;Bd(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=zd(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){let n=this.options,s=t[i],r=this.points,o=Na(this,{property:i,start:s,end:s});if(!o.length)return;let a=[],c=pv(n),d,u;for(d=0,u=o.length;d<u;++d){let{start:f,end:g}=o[d],p=r[f],y=r[g];if(p===y){a.push(p);continue}let w=Math.abs((s-p[i])/(y[i]-p[i])),v=c(p,y,w,n.stepped);v[i]=t[i],a.push(v)}return a.length===1?a[0]:a}pathSegment(t,i,n){return nl(this)(t,this,i,n)}path(t,i,n){let s=this.segments,r=nl(this),o=this._loop;i=i||0,n=n||this.points.length-i;for(let a of s)o&=r(t,this,a,{start:i,end:i+n-1});return!!o}draw(t,i,n,s){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),wv(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};R(ye,"id","line"),R(ye,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),R(ye,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),R(ye,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});ji=class extends Zt{constructor(i){super();R(this,"parsed");R(this,"skip");R(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,s){let r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(i-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(i,n){return wh(this,i,"x",n)}inYRange(i,n){return wh(this,i,"y",n)}getCenterPoint(i){let{x:n,y:s}=this.getProps(["x","y"],i);return{x:n,y:s}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);let s=n&&i.borderWidth||0;return(n+s)*2}draw(i,n){let s=this.options;this.skip||s.radius<.1||!Se(this,n,this.size(s)/2)||(i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.fillStyle=s.backgroundColor,Ir(i,s,this.x,this.y))}getRange(){let i=this.options||{};return i.radius+i.hitRadius}};R(ji,"id","point"),R(ji,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),R(ji,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});Gi=class extends Zt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=_v(this),a=Sv(o.radius)?_n:Ev;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Ka(o,i,r)),t.clip(),a(t,Ka(r,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Ka(r,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return qa(this,t,i,n)}inXRange(t,i){return qa(this,t,null,i)}inYRange(t,i){return qa(this,null,t,i)}getCenterPoint(t){let{x:i,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+s)/2:i,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};R(Gi,"id","bar"),R(Gi,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),R(Gi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});au=Object.freeze({__proto__:null,ArcElement:pi,BarElement:Gi,LineElement:ye,PointElement:ji}),sl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],vh=sl.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));du={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;let{data:{datasets:n},options:s}=e.config,{elements:r}=s,o=xh(n)||Cv(s)||r&&xh(r)||Av();if(!i.forceOverride&&o)return;let a=kv(e);n.forEach(a)}};uu={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){_h(e);return}let n=e.width;e.data.datasets.forEach((s,r)=>{let{_data:o,indexAxis:a}=s,c=e.getDatasetMeta(r),d=o||s.data;if(Sn([a,e.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=e.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:f,count:g}=Ov(c,d),p=i.threshold||4*n;if(g<=p){hu(s);return}q(o)&&(s._data=d,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let y;switch(i.algorithm){case"lttb":y=Iv(d,f,g,n,i);break;case"min-max":y=Pv(d,f,g,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=y})},destroy(e){_h(e)}};Xr=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){let{x:s,y:r,radius:o}=this;return i=i||{start:0,end:dt},t.arc(s,r,o,i.end,i.start,!0),!n.bounds}interpolate(t){let{x:i,y:n,radius:s}=this,r=t.angle;return{x:i+Math.cos(r)*s,y:n+Math.sin(r)*s,angle:r}}};gu={id:"filler",afterDatasetsUpdate(e,t,i){let n=(e.data.datasets||[]).length,s=[],r,o,a,c;for(o=0;o<n;++o)r=e.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof ye&&(c={visible:e.isDatasetVisible(o),index:o,fill:Bv(a,o,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,s.push(c);for(o=0;o<n;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=Fv(s,o,i.propagate))},beforeDraw(e,t,i){let n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=s.length-1;o>=0;--o){let a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&Xa(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;let n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let r=n[s].$filler;Eh(r)&&Xa(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){let n=t.meta.$filler;!Eh(n)||i.drawTime!=="beforeDatasetDraw"||Xa(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},kh=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},Qv=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index,Zr=class extends Zt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},i=ot(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,s=_t(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=kh(n,r),d,u;i.font=s.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,r,a,c)+10):(u=this.maxHeight,d=this._fitCols(o,s,a,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=s+a,f=t;r.textAlign="left",r.textBaseline="middle";let g=-1,p=-u;return this.legendItems.forEach((y,w)=>{let v=n+i/2+r.measureText(y.text).width;(w===0||d[d.length-1]+v+2*a>o)&&(f+=u,d[d.length-(w>0?0:1)]=0,p+=u,g++),c[w]={left:0,top:p,row:g,width:v,height:s},d[d.length-1]+=v+a}),f}_fitCols(t,i,n,s){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t,f=a,g=0,p=0,y=0,w=0;return this.legendItems.forEach((v,_)=>{let{itemWidth:S,itemHeight:M}=tx(n,i,r,v,s);_>0&&p+M+2*a>u&&(f+=g+a,d.push({width:g,height:p}),y+=g+a,w++,g=p=0),c[_]={left:y,top:p,col:w,width:S,height:M},g=Math.max(g,S),p+=M+a}),f+=g,d.push({width:g,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Wi(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=At(n,this.left+s,this.right-this.lineWidths[a]);for(let d of i)a!==d.row&&(a=d.row,c=At(n,this.left+s,this.right-this.lineWidths[a])),d.top+=this.top+t+s,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+s}else{let a=0,c=At(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let d of i)d.col!==a&&(a=d.col,c=At(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),d.top=c,d.left+=this.left+s,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;as(t,this),this._draw(),ls(t)}}_draw(){let{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,a=ht.color,c=Wi(t.rtl,this.left,this.width),d=_t(o.font),{padding:u}=o,f=d.size,g=f/2,p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;let{boxWidth:y,boxHeight:w,itemHeight:v}=kh(o,f),_=function(C,A,I){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;s.save();let O=$(I.lineWidth,1);if(s.fillStyle=$(I.fillStyle,a),s.lineCap=$(I.lineCap,"butt"),s.lineDashOffset=$(I.lineDashOffset,0),s.lineJoin=$(I.lineJoin,"miter"),s.lineWidth=O,s.strokeStyle=$(I.strokeStyle,a),s.setLineDash($(I.lineDash,[])),o.usePointStyle){let L={radius:w*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:O},F=c.xPlus(C,y/2),V=A+g;ka(s,L,F,V,o.pointStyleWidth&&y)}else{let L=A+Math.max((f-w)/2,0),F=c.leftForLtr(C,y),V=fi(I.borderRadius);s.beginPath(),Object.values(V).some(J=>J!==0)?_n(s,{x:F,y:L,w:y,h:w,radius:V}):s.rect(F,L,y,w),s.fill(),O!==0&&s.stroke()}s.restore()},S=function(C,A,I){ui(s,I.text,C,A+v/2,d,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},M=this.isHorizontal(),D=this._computeTitleHeight();M?p={x:At(r,this.left+u,this.right-n[0]),y:this.top+u+D,line:0}:p={x:this.left+u,y:At(r,this.top+D+u,this.bottom-i[0].height),line:0},Fa(this.ctx,t.textDirection);let T=v+u;this.legendItems.forEach((C,A)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;let I=s.measureText(C.text).width,O=c.textAlign(C.textAlign||(C.textAlign=o.textAlign)),L=y+g+I,F=p.x,V=p.y;c.setWidth(this.width),M?A>0&&F+L+u>this.right&&(V=p.y+=T,p.line++,F=p.x=At(r,this.left+u,this.right-n[p.line])):A>0&&V+T>this.bottom&&(F=p.x=F+i[p.line].width+u,p.line++,V=p.y=At(r,this.top+D+u,this.bottom-i[p.line].height));let J=c.x(F);if(_(J,V,C),F=Dd(O,F+y+g,M?F+L:this.right,t.rtl),S(c.x(F),V,C),M)p.x+=L+u;else if(typeof C.text!="string"){let X=d.lineHeight;p.y+=pu(C,X)+u}else p.y+=T}),Ba(this.ctx,t.textDirection)}drawTitle(){let t=this.options,i=t.title,n=_t(i.font),s=It(i.padding);if(!i.display)return;let r=Wi(t.rtl,this.left,this.width),o=this.ctx,a=i.position,c=n.size/2,d=s.top+c,u,f=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),u=this.top+d,f=At(t.align,f,this.right-g);else{let y=this.columnSizes.reduce((w,v)=>Math.max(w,v.height),0);u=d+At(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}let p=At(a,f,f+g);o.textAlign=r.textAlign(Cr(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,ui(o,i.text,p,u,n)}_computeTitleHeight(){let t=this.options.title,i=_t(t.font),n=It(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,r;if(Me(t,this.left,this.right)&&Me(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],Me(t,s.left,s.left+s.width)&&Me(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){let i=this.options;if(!nx(t.type,i))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,r=Qv(s,n);s&&!r&&ot(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&ot(i.onHover,[t,n,this],this)}else n&&ot(i.onClick,[t,n,this],this)}};mu={id:"legend",_element:Zr,start(e,t,i){let n=e.legend=new Zr({ctx:e.ctx,options:i,chart:e});Pt.configure(e,n,i),Pt.addBox(e,n)},stop(e){Pt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let n=e.legend;Pt.configure(e,n,i),n.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{let d=c.controller.getStyle(i?0:void 0),u=It(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:o&&(a||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},xs=class extends Zt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;let s=lt(n.text)?n.text.length:1;this._padding=It(n.padding);let r=s*_t(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:i,left:n,bottom:s,right:r,options:o}=this,a=o.align,c=0,d,u,f;return this.isHorizontal()?(u=At(a,n,r),f=i+t,d=r-n):(o.position==="left"?(u=n+t,f=At(a,s,i),c=ct*-.5):(u=r-t,f=At(a,i,s),c=ct*.5),d=s-i),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){let t=this.ctx,i=this.options;if(!i.display)return;let n=_t(i.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:d}=this._drawArgs(r);ui(t,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:d,textAlign:Cr(i.align),textBaseline:"middle",translation:[o,a]})}};yu={id:"title",_element:xs,start(e,t,i){sx(e,i)},stop(e){let t=e.titleBlock;Pt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let n=e.titleBlock;Pt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Hr=new WeakMap,bu={id:"subtitle",start(e,t,i){let n=new xs({ctx:e.ctx,options:i,chart:e});Pt.configure(e,n,i),Pt.addBox(e,n),Hr.set(e,n)},stop(e){Pt.removeBox(e,Hr.get(e)),Hr.delete(e)},beforeUpdate(e,t,i){let n=Hr.get(e);Pt.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ps={average(e){if(!e.length)return!1;let t,i,n=new Set,s=0,r=0;for(t=0,i=e.length;t<i;++t){let a=e[t].element;if(a&&a.hasValue()){let c=a.tooltipPosition();n.add(c.x),s+=c.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,c)=>a+c)/n.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){let c=e[r].element;if(c&&c.hasValue()){let d=c.getCenterPoint(),u=Er(t,d);u<s&&(s=u,a=c)}}if(a){let c=a.tooltipPosition();i=c.x,n=c.y}return{x:i,y:n}}};wu={beforeTitle:Ee,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:Ee,beforeBody:Ee,beforeLabel:Ee,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return q(i)||(t+=i),t},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Ee,afterBody:Ee,beforeFooter:Ee,footer:Ee,afterFooter:Ee};ms=class extends Zt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,r=new ys(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=hx(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:n}=i,s=qt(n,"beforeTitle",this,t),r=qt(n,"title",this,t),o=qt(n,"afterTitle",this,t),a=[];return a=Te(a,Ke(s)),a=Te(a,Ke(r)),a=Te(a,Ke(o)),a}getBeforeBody(t,i){return Ph(qt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:n}=i,s=[];return it(t,r=>{let o={before:[],lines:[],after:[]},a=Oh(n,r);Te(o.before,Ke(qt(a,"beforeLabel",this,r))),Te(o.lines,qt(a,"label",this,r)),Te(o.after,Ke(qt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,i){return Ph(qt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:n}=i,s=qt(n,"beforeFooter",this,t),r=qt(n,"footer",this,t),o=qt(n,"afterFooter",this,t),a=[];return a=Te(a,Ke(s)),a=Te(a,Ke(r)),a=Te(a,Ke(o)),a}_createItems(t){let i=this._active,n=this.chart.data,s=[],r=[],o=[],a=[],c,d;for(c=0,d=i.length;c<d;++c)a.push(rx(this.chart,i[c]));return t.filter&&(a=a.filter((u,f,g)=>t.filter(u,f,g,n))),t.itemSort&&(a=a.sort((u,f)=>t.itemSort(u,f,n))),it(a,u=>{let f=Oh(t.callbacks,u);s.push(qt(f,"labelColor",this,u)),r.push(qt(f,"labelPointStyle",this,u)),o.push(qt(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,i){let n=this.options.setContext(this.getContext()),s=this._active,r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{let a=ps[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);let c=this._size=Ch(this,n),d=Object.assign({},a,c),u=Ah(this.chart,n,d),f=Ih(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){let r=this.getCaretPosition(t,n,s);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,n){let{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=fi(a),{x:g,y:p}=t,{width:y,height:w}=i,v,_,S,M,D,T;return r==="center"?(D=p+w/2,s==="left"?(v=g,_=v-o,M=D+o,T=D-o):(v=g+y,_=v+o,M=D-o,T=D+o),S=v):(s==="left"?_=g+Math.max(c,u)+o:s==="right"?_=g+y-Math.max(d,f)-o:_=this.caretX,r==="top"?(M=p,D=M-o,v=_-o,S=_+o):(M=p+w,D=M+o,v=_+o,S=_-o),T=M),{x1:v,x2:_,x3:S,y1:M,y2:D,y3:T}}drawTitle(t,i,n){let s=this.title,r=s.length,o,a,c;if(r){let d=Wi(n.rtl,this.x,this.width);for(t.x=Yr(this,n.titleAlign,n),i.textAlign=d.textAlign(n.titleAlign),i.textBaseline="middle",o=_t(n.titleFont),a=n.titleSpacing,i.fillStyle=n.titleColor,i.font=o.string,c=0;c<r;++c)i.fillText(s[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,i,n,s,r){let o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=r,u=_t(r.bodyFont),f=Yr(this,"left",r),g=s.x(f),p=c<u.lineHeight?(u.lineHeight-c)/2:0,y=i.y+p;if(r.usePointStyle){let w={radius:Math.min(d,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=s.leftForLtr(g,d)+d/2,_=y+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ir(t,w,v,_),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ir(t,w,v,_)}else{t.lineWidth=K(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let w=s.leftForLtr(g,d),v=s.leftForLtr(s.xPlus(g,1),d-2),_=fi(o.borderRadius);Object.values(_).some(S=>S!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,_n(t,{x:w,y,w:d,h:c,radius:_}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),_n(t,{x:v,y:y+1,w:d-2,h:c-2,radius:_}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,y,d,c),t.strokeRect(w,y,d,c),t.fillStyle=o.backgroundColor,t.fillRect(v,y+1,d-2,c-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){let{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:d,boxPadding:u}=n,f=_t(n.bodyFont),g=f.lineHeight,p=0,y=Wi(n.rtl,this.x,this.width),w=function(I){i.fillText(I,y.x(t.x+p),t.y+g/2),t.y+=g+r},v=y.textAlign(o),_,S,M,D,T,C,A;for(i.textAlign=o,i.textBaseline="middle",i.font=f.string,t.x=Yr(this,v,n),i.fillStyle=n.bodyColor,it(this.beforeBody,w),p=a&&v!=="right"?o==="center"?d/2+u:d+2+u:0,D=0,C=s.length;D<C;++D){for(_=s[D],S=this.labelTextColors[D],i.fillStyle=S,it(_.before,w),M=_.lines,a&&M.length&&(this._drawColorBox(i,t,D,y,n),g=Math.max(f.lineHeight,c)),T=0,A=M.length;T<A;++T)w(M[T]),g=f.lineHeight;it(_.after,w)}p=0,g=f.lineHeight,it(this.afterBody,w),t.y-=r}drawFooter(t,i,n){let s=this.footer,r=s.length,o,a;if(r){let c=Wi(n.rtl,this.x,this.width);for(t.x=Yr(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=c.textAlign(n.footerAlign),i.textBaseline="middle",o=_t(n.footerFont),i.fillStyle=n.footerColor,i.font=o.string,a=0;a<r;++a)i.fillText(s[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){let{xAlign:r,yAlign:o}=this,{x:a,y:c}=t,{width:d,height:u}=n,{topLeft:f,topRight:g,bottomLeft:p,bottomRight:y}=fi(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(a+f,c),o==="top"&&this.drawCaret(t,i,n,s),i.lineTo(a+d-g,c),i.quadraticCurveTo(a+d,c,a+d,c+g),o==="center"&&r==="right"&&this.drawCaret(t,i,n,s),i.lineTo(a+d,c+u-y),i.quadraticCurveTo(a+d,c+u,a+d-y,c+u),o==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(a+p,c+u),i.quadraticCurveTo(a,c+u,a,c+u-p),o==="center"&&r==="left"&&this.drawCaret(t,i,n,s),i.lineTo(a,c+f),i.quadraticCurveTo(a,c,a+f,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){let o=ps[t.position].call(this,this._active,this._eventPosition);if(!o)return;let a=this._size=Ch(this,t),c=Object.assign({},o,this._size),d=Ah(i,t,c),u=Ih(t,c,d,i);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let o=It(i.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,i),Fa(t,i.textDirection),r.y+=o.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),Ba(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let n=this._active,s=t.map(({datasetIndex:a,index:c})=>{let d=this.chart.getDatasetMeta(a);if(!d)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:d.data[c],index:c}}),r=!os(n,s),o=this._positionChanged(s,i);(r||o)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,r=this._active||[],o=this._getActiveElements(t,r,i,n),a=this._positionChanged(o,t),c=i||!os(o,r)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,n,s){let r=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);let o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,i){let{caretX:n,caretY:s,options:r}=this,o=ps[r.position].call(this,t,i);return o!==!1&&(n!==o.x||s!==o.y)}};R(ms,"positioners",ps);vu={id:"tooltip",_element:ms,positioners:ps,afterInit(e,t,i){i&&(e.tooltip=new ms({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wu},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xu=Object.freeze({__proto__:null,Colors:du,Decimation:uu,Filler:gu,Legend:mu,SubTitle:bu,Title:yu,Tooltip:vu}),ux=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);gx=(e,t)=>e===null?null:Dt(Math.round(e),0,t);Dn=class extends Ce{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let n=this.getLabels();for(let{index:s,label:r}of i)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(q(t))return null;let n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:fx(n,t,$(i,t),this._addedLabels),gx(i,n.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){let t=this.min,i=this.max,n=this.options.offset,s=[],r=this.getLabels();r=t===0&&i===r.length-1?r:r.slice(t,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=i;o++)s.push({value:o});return s}getLabelForValue(t){return Lh.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};R(Dn,"id","category"),R(Dn,"defaults",{ticks:{callback:Lh}});In=class extends Ce{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return q(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:r}=this,o=c=>s=i?s:c,a=c=>r=n?r:c;if(t){let c=pe(s),d=pe(r);c<0&&d<0?a(0):c>0&&d>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);a(r+c),t||o(s-c)}this.min=s,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,i=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=px(s,r);return t.bounds==="ticks"&&ma(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return vn(t,this.chart.options.locale,this.options.ticks.format)}},kn=class extends In{determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=wt(t)?t:0,this.max=wt(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),i=t?this.width:this.height,n=he(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};R(kn,"id","linear"),R(kn,"defaults",{ticks:{callback:xn.formatters.numeric}});_s=e=>Math.floor(je(e)),Hi=(e,t)=>Math.pow(10,_s(e)+t);Cn=class extends Ce{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){let n=In.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return wt(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=wt(t)?Math.max(0,t):null,this.max=wt(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wt(this._userMin)&&(this.min=t===Hi(this.min,0)?Hi(this.min,-1):Hi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),n=this.min,s=this.max,r=a=>n=t?n:a,o=a=>s=i?s:a;n===s&&(n<=0?(r(1),o(10)):(r(Hi(n,-1)),o(Hi(s,1)))),n<=0&&r(Hi(s,-1)),s<=0&&o(Hi(n,1)),this.min=n,this.max=s}buildTicks(){let t=this.options,i={min:this._userMin,max:this._userMax},n=yx(i,this);return t.bounds==="ticks"&&ma(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":vn(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=je(t),this._valueRange=je(this.max)-je(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(je(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}};R(Cn,"id","logarithmic"),R(Cn,"defaults",{ticks:{callback:xn.formatters.logarithmic,major:{enabled:!0}}});mi=class extends In{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=It(ol(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!1);this.min=wt(t)&&!isNaN(t)?t:0,this.max=wt(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ol(this.options))}generateTickLabels(t){In.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{let s=ot(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?wx(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){let i=dt/(this._pointLabels.length||1),n=this.options.startAngle||0;return jt(t*i+he(n))}getDistanceFromCenterForValue(t){if(q(t))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(q(t))return NaN;let i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){let i=this._pointLabels||[];if(t>=0&&t<i.length){let n=i[t];return Ax(this.getContext(),t,n)}}getPointPosition(t,i,n=0){let s=this.getIndexAngle(t)-vt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:i,top:n,right:s,bottom:r}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:i}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),_u(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,i=this.options,{angleLines:n,grid:s,border:r}=i,o=this._pointLabels.length,a,c,d;if(i.pointLabels.display&&kx(this,o),s.display&&this.ticks.forEach((u,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let g=this.getContext(f),p=s.setContext(g),y=r.setContext(g);Cx(this,p,c,o,y)}}),n.display){for(t.save(),a=o-1;a>=0;a--){let u=n.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:g}=u;!g||!f||(t.lineWidth=g,t.strokeStyle=f,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),d=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;let s=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!i.reverse)return;let d=n.setContext(this.getContext(c)),u=_t(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=d.backdropColor;let f=It(d.backdropPadding);t.fillRect(-o/2-f.left,-r-u.size/2-f.top,o+f.width,u.size+f.height)}ui(t,a.label,0,-r,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}};R(mi,"id","radialLinear"),R(mi,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),R(mi,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),R(mi,"descriptors",{angleLines:{_fallback:"grid"}});Jr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xt=Object.keys(Jr);wi=class extends Ce{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let n=t.time||(t.time={}),s=this._adapter=new Gh._date(t.adapters.date);s.init(i),mn(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Hh(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,n=t.time.unit||"day",{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!a&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!a)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=wt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),r=wt(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){let t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let r=this.min,o=this.max,a=Sd(s,r,o);return this._unit=i.unit||(n.autoSkip?Yh(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):Ix(this,a.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Px(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),zh(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;i=Dt(i,0,o),n=Dt(n,0,o),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){let t=this._adapter,i=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||Yh(r.minUnit,i,n,this._getLabelCapacity(i)),a=$(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,d=Bi(c)||c===!0,u={},f=i,g,p;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":o),t.diff(n,i,o)>1e5*a)throw new Error(i+" and "+n+" are too far apart with stepSize of "+a+" "+o);let y=s.ticks.source==="data"&&this.getDataTimestamps();for(g=f,p=0;g<n;g=+t.add(g,a,o),p++)Vh(u,g,y);return(g===n||s.bounds==="ticks"||p===1)&&Vh(u,g,y),Object.keys(u).sort(Nh).map(w=>+w)}getLabelForValue(t){let i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,r=this._unit,o=i||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,i,n,s){let r=this.options,o=r.ticks.callback;if(o)return ot(o,[t,i,n],this);let a=r.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&a[c],f=d&&a[d],g=n[i],p=d&&f&&g&&g.major;return this._adapter.format(t,s||(p?f:u))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,n=this.ctx.measureText(t).width,s=he(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){let i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,r=this._tickFormatFunction(t,0,zh(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,n;if(t.length)return t;let s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Hh(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return va(t.sort(Nh))}};R(wi,"id","time"),R(wi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});An=class extends wi{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Vr(i,this.min),this._tableRange=Vr(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:i,max:n}=this,s=[],r=[],o,a,c,d,u;for(o=0,a=t.length;o<a;++o)d=t[o],d>=i&&d<=n&&s.push(d);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],c=s[o-1],d=s[o],Math.round((u+c)/2)!==d&&r.push({time:d,pos:o/(a-1)});return r}_generate(){let t=this.min,i=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Vr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Vr(this._table,n*this._tableRange+this._minPos,!0)}};R(An,"id","timeseries"),R(An,"defaults",wi.defaults);Su=Object.freeze({__proto__:null,CategoryScale:Dn,LinearScale:kn,LogarithmicScale:Cn,RadialLinearScale:mi,TimeScale:wi,TimeSeriesScale:An}),ll=[jh,au,xu,Su]});var Eu={};Rc(Eu,{Animation:()=>$r,Animations:()=>ys,ArcElement:()=>pi,BarController:()=>Yi,BarElement:()=>Gi,BasePlatform:()=>ws,BasicPlatform:()=>jr,BubbleController:()=>Vi,CategoryScale:()=>Dn,Chart:()=>re,Colors:()=>du,DatasetController:()=>Kt,Decimation:()=>uu,DomPlatform:()=>qr,DoughnutController:()=>ke,Element:()=>Zt,Filler:()=>gu,Interaction:()=>qh,Legend:()=>mu,LineController:()=>zi,LineElement:()=>ye,LinearScale:()=>kn,LogarithmicScale:()=>Cn,PieController:()=>Mn,PointElement:()=>ji,PolarAreaController:()=>yi,RadarController:()=>Ui,RadialLinearScale:()=>mi,Scale:()=>Ce,ScatterController:()=>$i,SubTitle:()=>bu,Ticks:()=>xn,TimeScale:()=>wi,TimeSeriesScale:()=>An,Title:()=>yu,Tooltip:()=>vu,_adapters:()=>Gh,_detectPlatform:()=>Qh,animator:()=>De,controllers:()=>jh,default:()=>Lx,defaults:()=>ht,elements:()=>au,layouts:()=>Pt,plugins:()=>xu,registerables:()=>ll,registry:()=>me,scales:()=>Su});var Lx,Mu=tr(()=>{cl();cl();re.register(...ll);Lx=re});var Ml=Lc((Ms,On)=>{var Bx=200,Yu="__lodash_hash_undefined__",Vu=9007199254740991,bl="[object Arguments]",Wx="[object Array]",zu="[object Boolean]",Uu="[object Date]",Nx="[object Error]",wl="[object Function]",$u="[object GeneratorFunction]",eo="[object Map]",ju="[object Number]",vl="[object Object]",Au="[object Promise]",Gu="[object RegExp]",io="[object Set]",qu="[object String]",Ku="[object Symbol]",ul="[object WeakMap]",Xu="[object ArrayBuffer]",no="[object DataView]",Zu="[object Float32Array]",Ju="[object Float64Array]",Qu="[object Int8Array]",tf="[object Int16Array]",ef="[object Int32Array]",nf="[object Uint8Array]",sf="[object Uint8ClampedArray]",rf="[object Uint16Array]",of="[object Uint32Array]",Hx=/[\\^$.*+?()[\]{}|]/g,Yx=/\w*$/,Vx=/^\[object .+?Constructor\]$/,zx=/^(?:0|[1-9]\d*)$/,ut={};ut[bl]=ut[Wx]=ut[Xu]=ut[no]=ut[zu]=ut[Uu]=ut[Zu]=ut[Ju]=ut[Qu]=ut[tf]=ut[ef]=ut[eo]=ut[ju]=ut[vl]=ut[Gu]=ut[io]=ut[qu]=ut[Ku]=ut[nf]=ut[sf]=ut[rf]=ut[of]=!0;ut[Nx]=ut[wl]=ut[ul]=!1;var Ux=typeof global=="object"&&global&&global.Object===Object&&global,$x=typeof self=="object"&&self&&self.Object===Object&&self,Xe=Ux||$x||Function("return this")(),af=typeof Ms=="object"&&Ms&&!Ms.nodeType&&Ms,Iu=af&&typeof On=="object"&&On&&!On.nodeType&&On,jx=Iu&&Iu.exports===af;function Gx(e,t){return e.set(t[0],t[1]),e}function qx(e,t){return e.add(t),e}function Kx(e,t){for(var i=-1,n=e?e.length:0;++i<n&&t(e[i],i,e)!==!1;);return e}function Xx(e,t){for(var i=-1,n=t.length,s=e.length;++i<n;)e[s+i]=t[i];return e}function lf(e,t,i,n){var s=-1,r=e?e.length:0;for(n&&r&&(i=e[++s]);++s<r;)i=t(i,e[s],s,e);return i}function Zx(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Jx(e,t){return e==null?void 0:e[t]}function cf(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(i){}return t}function Pu(e){var t=-1,i=Array(e.size);return e.forEach(function(n,s){i[++t]=[s,n]}),i}function xl(e,t){return function(i){return e(t(i))}}function Ou(e){var t=-1,i=Array(e.size);return e.forEach(function(n){i[++t]=n}),i}var Qx=Array.prototype,t_=Function.prototype,so=Object.prototype,hl=Xe["__core-js_shared__"],Lu=function(){var e=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),df=t_.toString,vi=so.hasOwnProperty,ro=so.toString,e_=RegExp("^"+df.call(vi).replace(Hx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ru=jx?Xe.Buffer:void 0,Fu=Xe.Symbol,Bu=Xe.Uint8Array,i_=xl(Object.getPrototypeOf,Object),n_=Object.create,s_=so.propertyIsEnumerable,r_=Qx.splice,Wu=Object.getOwnPropertySymbols,o_=Ru?Ru.isBuffer:void 0,a_=xl(Object.keys,Object),fl=Fn(Xe,"DataView"),Ts=Fn(Xe,"Map"),gl=Fn(Xe,"Promise"),pl=Fn(Xe,"Set"),ml=Fn(Xe,"WeakMap"),Ds=Fn(Object,"create"),l_=Xi(fl),c_=Xi(Ts),d_=Xi(gl),h_=Xi(pl),u_=Xi(ml),Nu=Fu?Fu.prototype:void 0,Hu=Nu?Nu.valueOf:void 0;function Ki(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function f_(){this.__data__=Ds?Ds(null):{}}function g_(e){return this.has(e)&&delete this.__data__[e]}function p_(e){var t=this.__data__;if(Ds){var i=t[e];return i===Yu?void 0:i}return vi.call(t,e)?t[e]:void 0}function m_(e){var t=this.__data__;return Ds?t[e]!==void 0:vi.call(t,e)}function y_(e,t){var i=this.__data__;return i[e]=Ds&&t===void 0?Yu:t,this}Ki.prototype.clear=f_;Ki.prototype.delete=g_;Ki.prototype.get=p_;Ki.prototype.has=m_;Ki.prototype.set=y_;function Ze(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function b_(){this.__data__=[]}function w_(e){var t=this.__data__,i=oo(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():r_.call(t,i,1),!0}function v_(e){var t=this.__data__,i=oo(t,e);return i<0?void 0:t[i][1]}function x_(e){return oo(this.__data__,e)>-1}function __(e,t){var i=this.__data__,n=oo(i,e);return n<0?i.push([e,t]):i[n][1]=t,this}Ze.prototype.clear=b_;Ze.prototype.delete=w_;Ze.prototype.get=v_;Ze.prototype.has=x_;Ze.prototype.set=__;function Ln(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function S_(){this.__data__={hash:new Ki,map:new(Ts||Ze),string:new Ki}}function E_(e){return ao(this,e).delete(e)}function M_(e){return ao(this,e).get(e)}function T_(e){return ao(this,e).has(e)}function D_(e,t){return ao(this,e).set(e,t),this}Ln.prototype.clear=S_;Ln.prototype.delete=E_;Ln.prototype.get=M_;Ln.prototype.has=T_;Ln.prototype.set=D_;function Rn(e){this.__data__=new Ze(e)}function k_(){this.__data__=new Ze}function C_(e){return this.__data__.delete(e)}function A_(e){return this.__data__.get(e)}function I_(e){return this.__data__.has(e)}function P_(e,t){var i=this.__data__;if(i instanceof Ze){var n=i.__data__;if(!Ts||n.length<Bx-1)return n.push([e,t]),this;i=this.__data__=new Ln(n)}return i.set(e,t),this}Rn.prototype.clear=k_;Rn.prototype.delete=C_;Rn.prototype.get=A_;Rn.prototype.has=I_;Rn.prototype.set=P_;function O_(e,t){var i=Sl(e)||nS(e)?Zx(e.length,String):[],n=i.length,s=!!n;for(var r in e)(t||vi.call(e,r))&&!(s&&(r=="length"||Q_(r,n)))&&i.push(r);return i}function hf(e,t,i){var n=e[t];(!(vi.call(e,t)&&pf(n,i))||i===void 0&&!(t in e))&&(e[t]=i)}function oo(e,t){for(var i=e.length;i--;)if(pf(e[i][0],t))return i;return-1}function L_(e,t){return e&&uf(t,El(t),e)}function yl(e,t,i,n,s,r,o){var a;if(n&&(a=r?n(e,s,r,o):n(e)),a!==void 0)return a;if(!lo(e))return e;var c=Sl(e);if(c){if(a=X_(e),!t)return G_(e,a)}else{var d=qi(e),u=d==wl||d==$u;if(rS(e))return H_(e,t);if(d==vl||d==bl||u&&!r){if(cf(e))return r?e:{};if(a=Z_(u?{}:e),!t)return q_(e,L_(a,e))}else{if(!ut[d])return r?e:{};a=J_(e,d,yl,t)}}o||(o=new Rn);var f=o.get(e);if(f)return f;if(o.set(e,a),!c)var g=i?K_(e):El(e);return Kx(g||e,function(p,y){g&&(y=p,p=e[y]),hf(a,y,yl(p,t,i,n,y,e,o))}),a}function R_(e){return lo(e)?n_(e):{}}function F_(e,t,i){var n=t(e);return Sl(e)?n:Xx(n,i(e))}function B_(e){return ro.call(e)}function W_(e){if(!lo(e)||eS(e))return!1;var t=yf(e)||cf(e)?e_:Vx;return t.test(Xi(e))}function N_(e){if(!gf(e))return a_(e);var t=[];for(var i in Object(e))vi.call(e,i)&&i!="constructor"&&t.push(i);return t}function H_(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}function _l(e){var t=new e.constructor(e.byteLength);return new Bu(t).set(new Bu(e)),t}function Y_(e,t){var i=t?_l(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function V_(e,t,i){var n=t?i(Pu(e),!0):Pu(e);return lf(n,Gx,new e.constructor)}function z_(e){var t=new e.constructor(e.source,Yx.exec(e));return t.lastIndex=e.lastIndex,t}function U_(e,t,i){var n=t?i(Ou(e),!0):Ou(e);return lf(n,qx,new e.constructor)}function $_(e){return Hu?Object(Hu.call(e)):{}}function j_(e,t){var i=t?_l(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function G_(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}function uf(e,t,i,n){i||(i={});for(var s=-1,r=t.length;++s<r;){var o=t[s],a=n?n(i[o],e[o],o,i,e):void 0;hf(i,o,a===void 0?e[o]:a)}return i}function q_(e,t){return uf(e,ff(e),t)}function K_(e){return F_(e,El,ff)}function ao(e,t){var i=e.__data__;return tS(t)?i[typeof t=="string"?"string":"hash"]:i.map}function Fn(e,t){var i=Jx(e,t);return W_(i)?i:void 0}var ff=Wu?xl(Wu,Object):lS,qi=B_;(fl&&qi(new fl(new ArrayBuffer(1)))!=no||Ts&&qi(new Ts)!=eo||gl&&qi(gl.resolve())!=Au||pl&&qi(new pl)!=io||ml&&qi(new ml)!=ul)&&(qi=function(e){var t=ro.call(e),i=t==vl?e.constructor:void 0,n=i?Xi(i):void 0;if(n)switch(n){case l_:return no;case c_:return eo;case d_:return Au;case h_:return io;case u_:return ul}return t});function X_(e){var t=e.length,i=e.constructor(t);return t&&typeof e[0]=="string"&&vi.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Z_(e){return typeof e.constructor=="function"&&!gf(e)?R_(i_(e)):{}}function J_(e,t,i,n){var s=e.constructor;switch(t){case Xu:return _l(e);case zu:case Uu:return new s(+e);case no:return Y_(e,n);case Zu:case Ju:case Qu:case tf:case ef:case nf:case sf:case rf:case of:return j_(e,n);case eo:return V_(e,n,i);case ju:case qu:return new s(e);case Gu:return z_(e);case io:return U_(e,n,i);case Ku:return $_(e)}}function Q_(e,t){return t=t==null?Vu:t,!!t&&(typeof e=="number"||zx.test(e))&&e>-1&&e%1==0&&e<t}function tS(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function eS(e){return!!Lu&&Lu in e}function gf(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||so;return e===i}function Xi(e){if(e!=null){try{return df.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function iS(e){return yl(e,!0,!0)}function pf(e,t){return e===t||e!==e&&t!==t}function nS(e){return sS(e)&&vi.call(e,"callee")&&(!s_.call(e,"callee")||ro.call(e)==bl)}var Sl=Array.isArray;function mf(e){return e!=null&&oS(e.length)&&!yf(e)}function sS(e){return aS(e)&&mf(e)}var rS=o_||cS;function yf(e){var t=lo(e)?ro.call(e):"";return t==wl||t==$u}function oS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vu}function lo(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function aS(e){return!!e&&typeof e=="object"}function El(e){return mf(e)?O_(e):N_(e)}function lS(){return[]}function cS(){return!1}On.exports=iS});var AM={};Rc(AM,{default:()=>wo});module.exports=gb(AM);var Qe=require("obsidian");var Tt=require("obsidian");var Ti=require("obsidian");var zo=require("obsidian");async function Wc(e,t,i,n){let s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="0px",s.style.height="0px",document.body.appendChild(s),await zo.MarkdownRenderer.renderMarkdown(e,s,typeof i=="string"?i:i.path,n),document.body.removeChild(s);let r=document.createDocumentFragment();for(;s.firstChild;)r.appendChild(s.firstChild);t.appendChild(r)}var Vo=class{constructor(t){this.maxSize=t,this.map=new Map}get(t){if(!this.map.has(t))return;let i=this.map.get(t);return this.map.delete(t),this.map.set(t,i),i}set(t,i){if(this.map.has(t))this.map.delete(t);else if(this.map.size>=this.maxSize){let n=this.map.keys().next().value;this.map.delete(n)}this.map.set(t,i)}},Bc=new Vo(1e3);async function Ut(e,t,i,n){let s=Bc.get(e);if(s){let a=s.cloneNode(!0);t.appendChild(a);return}let r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="0px",r.style.height="0px",document.body.appendChild(r),await zo.MarkdownRenderer.renderMarkdown(e,r,typeof i=="string"?i:i.path,n),document.body.removeChild(r);let o=document.createDocumentFragment();for(;r.firstChild;)o.appendChild(r.firstChild);Bc.set(e,o.cloneNode(!0)),t.appendChild(o)}var ir=class{constructor(t,i,n,s){this.isEditingMemo=!1;this.onSave=null;this.app=t,this.settings=n,this.containerEl=i.createDiv({cls:"pomodoro-memo-container"}),this.onSave=s||null,this.render()}render(){let t=this.containerEl.createDiv({cls:"pomodoro-memo-header"});this.editMemoButtonEl=t.createEl("button",{cls:"pomodoro-memo-edit-button"}),(0,Ti.setIcon)(this.editMemoButtonEl,"pencil"),this.editMemoButtonEl.setAttribute("aria-label","\u30E1\u30E2\u3092\u7DE8\u96C6/\u8FFD\u52A0"),this.editMemoButtonEl.onClickEvent(()=>this.enterMemoEditMode()),this.memoDisplayEl=this.containerEl.createDiv({cls:"pomodoro-memo-display"}),this.memoEditContainerEl=this.containerEl.createDiv({cls:"pomodoro-memo-edit-container"}),this.memoEditContainerEl.style.display="none",this.memoEditAreaEl=this.memoEditContainerEl.createEl("textarea",{cls:"pomodoro-memo-edit-area"});let i=this.memoEditContainerEl.createDiv({cls:"pomodoro-memo-edit-controls"});this.saveMemoButtonEl=i.createEl("button",{text:"\u4FDD\u5B58"}),this.saveMemoButtonEl.addClass("mod-cta"),this.cancelMemoButtonEl=i.createEl("button",{text:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),this.saveMemoButtonEl.onClickEvent(()=>this.saveMemoChanges()),this.cancelMemoButtonEl.onClickEvent(()=>this.cancelMemoEditMode()),this.updateMemoEditUI()}async renderMemo(t){this.memoDisplayEl.empty();let i=t==null?void 0:t.trim();i&&!this.isEditingMemo?(this.memoDisplayEl.style.display="block",await Wc(i,this.memoDisplayEl,"",new Ti.Component)):this.isEditingMemo||(this.memoDisplayEl.style.display="none")}updateMemoEditUI(){let t=this.settings.memoContent&&this.settings.memoContent.trim()!=="";this.memoDisplayEl.style.display=this.isEditingMemo?"none":t?"block":"none",this.memoEditContainerEl.style.display=this.isEditingMemo?"flex":"none",this.editMemoButtonEl.style.display=this.isEditingMemo?"none":"",this.isEditingMemo?document.activeElement!==this.memoEditAreaEl&&(this.memoEditAreaEl.value=this.settings.memoContent||"",this.memoEditAreaEl.focus()):this.renderMemo(this.settings.memoContent)}enterMemoEditMode(){this.isEditingMemo=!0,window.__WB_MEMO_EDITING__=!0,this.updateMemoEditUI()}async saveMemoChanges(){let t=this.memoEditAreaEl.value;if(this.isEditingMemo=!1,window.__WB_MEMO_EDITING__=!1,t!==(this.settings.memoContent||"")){if(this.settings.memoContent=t,typeof this.onSave=="function")try{await this.onSave(t)}catch(i){new Ti.Notice("\u30E1\u30E2\u306E\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),console.error(i)}new Ti.Notice("\u30E1\u30E2\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F")}this.updateMemoEditUI()}cancelMemoEditMode(){this.isEditingMemo=!1,window.__WB_MEMO_EDITING__=!1,this.updateMemoEditUI()}getMemoContent(){return this.settings.memoContent||""}setMemoContent(t){this.isEditingMemo||(this.settings.memoContent=t,this.updateMemoEditUI())}updateUI(){this.updateMemoEditUI()}enterEditMode(){this.enterMemoEditMode()}async saveChanges(){await this.saveMemoChanges()}cancelEditMode(){this.cancelMemoEditMode()}get isEditing(){return this.isEditingMemo}};function yt(e,...t){var i;e&&((i=e.settings)!=null&&i.debugLogging)&&console.log(...t)}var se={workMinutes:25,shortBreakMinutes:5,longBreakMinutes:15,pomodorosUntilLongBreak:4,backgroundImageUrl:"",memoContent:"",notificationSound:"default_beep",notificationVolume:.2,exportFormat:"none"},ne=class{constructor(){this.id="pomodoro";this.timerId=null;this.remainingTime=0;this.isRunning=!1;this.pomodorosCompletedInCycle=0;this.memoWidget=null;this.audioContext=null;this.currentAudioElement=null;this.sessionLogs=[];this.currentSessionStartTime=null;this.currentSessionEndTime=null;this.lastResetClickTime=null;this.needsRender=!1;this.initialized=!1,this.currentPomodoroSet="work"}getWidgetId(){var t;return(t=this.config)==null?void 0:t.id}applyBackground(t){if(!this.widgetEl)return;let i=t==null?void 0:t.trim();i?(this.widgetEl.style.backgroundImage=`url("${i}")`,this.widgetEl.style.backgroundSize="cover",this.widgetEl.style.backgroundPosition="center",this.widgetEl.style.backgroundRepeat="no-repeat",this.widgetEl.classList.add("has-background-image")):(this.widgetEl.style.backgroundImage="",this.widgetEl.style.backgroundSize="",this.widgetEl.style.backgroundPosition="",this.widgetEl.style.backgroundRepeat="",this.widgetEl.classList.remove("has-background-image"))}async renderMemo(t){this.memoWidget&&this.memoWidget.setMemoContent(t||"")}updateMemoEditUI(){this.memoWidget&&this.memoWidget.updateUI()}enterMemoEditMode(){var t;(t=this.memoWidget)==null||t.enterEditMode()}async saveMemoChanges(){this.memoWidget&&await this.memoWidget.saveChanges()}cancelMemoEditMode(){var t;(t=this.memoWidget)==null||t.cancelEditMode()}static ensureGlobalInterval(){this.globalIntervalId==null&&(this.globalIntervalId=window.setInterval(()=>{let t=!1;this.widgetStates.forEach((i,n)=>{i&&i.isRunning&&(t=!0,this.tick(n))}),!t&&this.globalIntervalId!=null&&(clearInterval(this.globalIntervalId),this.globalIntervalId=null)},1e3))}static clearGlobalIntervalIfNoneRunning(){Array.from(this.widgetStates.values()).every(t=>!t.isRunning)&&this.globalIntervalId!=null&&(clearInterval(this.globalIntervalId),this.globalIntervalId=null)}static tick(t){let i=this.widgetStates.get(t);if(!i||!i.isRunning)return;if(i.remainingTime=(i.remainingTime||0)-1,i.remainingTime<=0){let s=this.widgetInstances.get(t);s?(yt(s.plugin,"tick: calling handleSessionEnd",s),s.handleSessionEnd()):this.handleSessionEndGlobal(t)}this.widgetStates.set(t,i);let n=this.widgetInstances.get(t);n&&(n.remainingTime=i.remainingTime,n.isRunning=i.isRunning,n.currentPomodoroSet=i.currentPomodoroSet,n.pomodorosCompletedInCycle=i.pomodorosCompletedInCycle,n.updateDisplay&&n.updateDisplay())}static endSessionAndAdvance(t,i){let n=this.widgetStates.get(t);if(!n)return;let s="",r=!1;n.currentPomodoroSet==="work"?(n.pomodorosCompletedInCycle=(n.pomodorosCompletedInCycle||0)+1,s=`\u4F5C\u696D\u30BB\u30C3\u30B7\u30E7\u30F3 (${n.workMinutes}\u5206) \u304C\u7D42\u4E86\u3002`,n.pomodorosCompletedInCycle>=n.pomodorosUntilLongBreak?(n.currentPomodoroSet="longBreak",n.remainingTime=n.longBreakMinutes*60,s+="\u9577\u3044\u4F11\u61A9\u3092\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002"):(n.currentPomodoroSet="shortBreak",n.remainingTime=n.shortBreakMinutes*60,s+="\u77ED\u3044\u4F11\u61A9\u3092\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002")):(n.currentPomodoroSet==="shortBreak"?s=`\u77ED\u3044\u4F11\u61A9 (${n.shortBreakMinutes}\u5206) \u304C\u7D42\u4E86\u3002`:s=`\u9577\u3044\u4F11\u61A9 (${n.longBreakMinutes}\u5206) \u304C\u7D42\u4E86\u3002`,n.currentPomodoroSet==="longBreak"&&(n.pomodorosCompletedInCycle=0,r=!0),n.currentPomodoroSet="work",n.remainingTime=n.workMinutes*60,s+="\u4F5C\u696D\u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),n.isRunning=!1,this.widgetStates.set(t,n),new Tt.Notice(s,7e3),i&&(i.isRunning=n.isRunning,i.remainingTime=n.remainingTime,i.currentPomodoroSet=n.currentPomodoroSet,i.pomodorosCompletedInCycle=n.pomodorosCompletedInCycle,i.updateDisplay&&i.updateDisplay(),i.playSoundNotification&&i.playSoundNotification(),r&&new Tt.Notice("\u304A\u3064\u304B\u308C\u3055\u307E\u3067\u3057\u305F",8e3)),this.clearGlobalIntervalIfNoneRunning()}static handleSessionEndGlobal(t){this.endSessionAndAdvance(t,this.widgetInstances.get(t))}create(t,i,n){this.constructor.widgetInstances.set(t.id,this);let s=t.id,r=this.initialized&&this.lastConfiguredId!==s;if(this.config=t,this.app=i,this.plugin=n,!this.initialized)this.currentSettings={...se,...t.settings||{}},this.pomodorosCompletedInCycle=0,this.currentPomodoroSet="work",this.isRunning=!1,this.timerId&&clearInterval(this.timerId),this.timerId=null;else if(r)this.currentSettings={...se,...t.settings||{}},this.pomodorosCompletedInCycle=0,this.currentPomodoroSet="work",this.isRunning=!1,this.timerId&&clearInterval(this.timerId),this.timerId=null;else{let f=t.settings||{};this.currentSettings={...this.currentSettings,...f}}t.settings&&typeof t.settings.pomodorosCompletedInCycle=="number"&&(this.pomodorosCompletedInCycle=t.settings.pomodorosCompletedInCycle),t.settings&&typeof t.settings.currentPomodoroSet=="string"&&(this.currentPomodoroSet=t.settings.currentPomodoroSet),t.settings=this.currentSettings,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","pomodoro-timer-widget"),this.widgetEl.setAttribute("data-widget-id",t.id),this.applyBackground(this.currentSettings.backgroundImageUrl);let o=this.widgetEl.createEl("h4");o.textContent=this.config.title||"\u30DD\u30E2\u30C9\u30FC\u30ED\u30BF\u30A4\u30DE\u30FC",!this.config.title||this.config.title.trim()===""?o.style.display="none":o.style.display="";let a=this.widgetEl.createDiv({cls:"widget-content"});this.timeDisplayEl=a.createDiv({cls:"pomodoro-time-display"}),this.statusDisplayEl=a.createDiv({cls:"pomodoro-status-display"}),this.cycleDisplayEl=a.createDiv({cls:"pomodoro-cycle-display"});let c=a.createDiv({cls:"pomodoro-controls"});this.startPauseButton=c.createEl("button",{cls:"pomodoro-start-pause"}),this.resetButton=c.createEl("button",{cls:"pomodoro-reset"}),this.nextButton=c.createEl("button",{cls:"pomodoro-next"}),this.startPauseButton.onClickEvent(()=>this.toggleStartPause()),this.resetButton.onClickEvent(()=>this.resetCurrentTimerConfirm()),this.nextButton.onClickEvent(()=>this.skipToNextSessionConfirm()),this.memoWidget=new ir(i,a,{memoContent:this.currentSettings.memoContent},async f=>{if(this.currentSettings.memoContent=f,this.config&&this.config.settings&&(this.config.settings.memoContent=f),this.plugin&&this.plugin.settings&&Array.isArray(this.plugin.settings.boards)){let g=this.plugin.settings.boards.find(p=>{var y;return(y=p.widgets)==null?void 0:y.some(w=>w.id===this.config.id)});if(g){let p=g.widgets.find(y=>y.id===this.config.id);p&&p.settings&&(p.settings.memoContent=f)}}this.updateMemoEditUI(),this.plugin&&typeof this.plugin.saveData=="function"&&await this.plugin.saveData(this.plugin.settings)}),this.initialized?r?this.resetTimerState(this.currentPomodoroSet,!0):this.updateDisplay():this.resetTimerState(this.currentPomodoroSet,!0);let d=ne.widgetStates.get(t.id);d&&(this.isRunning=d.isRunning,this.remainingTime=d.remainingTime,this.currentPomodoroSet=d.currentPomodoroSet,this.pomodorosCompletedInCycle=d.pomodorosCompletedInCycle),ne.ensureGlobalInterval(),this.initialized=!0,this.lastConfiguredId=s;let u=t.settings||{};return u.width&&(this.widgetEl.style.width=u.width),u.height&&(this.widgetEl.style.height=u.height),this.widgetEl}formatTime(t){let i=Math.floor(t/60),n=t%60;return`${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}`}updateDisplay(){if(!this.widgetEl||!this.timeDisplayEl||!this.startPauseButton||!this.resetButton||!this.nextButton||!this.statusDisplayEl||!this.cycleDisplayEl)return;this._prevDisplay||(this._prevDisplay={});let t=this._prevDisplay,i=this.formatTime(this.remainingTime);t.timeStr!==i&&(this.timeDisplayEl.textContent=i,t.timeStr=i);let n=this.isRunning;t.isRunning!==n&&((0,Tt.setIcon)(this.startPauseButton,n?"pause":"play"),this.startPauseButton.setAttribute("aria-label",n?"\u4E00\u6642\u505C\u6B62":"\u958B\u59CB"),t.isRunning=n),t.resetIconSet||((0,Tt.setIcon)(this.resetButton,"rotate-ccw"),this.resetButton.setAttribute("aria-label","\u30EA\u30BB\u30C3\u30C8"),(0,Tt.setIcon)(this.nextButton,"skip-forward"),this.nextButton.setAttribute("aria-label","\u6B21\u306E\u30BB\u30C3\u30B7\u30E7\u30F3\u3078"),t.resetIconSet=!0);let s="";switch(this.currentPomodoroSet){case"work":s=`\u4F5C\u696D\u4E2D (${this.currentSettings.workMinutes}\u5206)`;break;case"shortBreak":s=`\u77ED\u3044\u4F11\u61A9 (${this.currentSettings.shortBreakMinutes}\u5206)`;break;case"longBreak":s=`\u9577\u3044\u4F11\u61A9 (${this.currentSettings.longBreakMinutes}\u5206)`;break}t.statusText!==s&&(this.statusDisplayEl.textContent=s,t.statusText=s);let r=`\u73FE\u5728\u306E\u30B5\u30A4\u30AF\u30EB: ${this.pomodorosCompletedInCycle} / ${this.currentSettings.pomodorosUntilLongBreak}`;t.cycleText!==r&&(this.cycleDisplayEl.textContent=r,t.cycleText=r)}toggleStartPause(){this.isRunning?this.pauseTimer():this.startTimer()}startTimer(){var i,n;if(this.isRunning)return;this.isRunning=!0,ne.widgetStates.set(this.config.id,{...this.currentSettings,isRunning:!0,remainingTime:this.remainingTime,currentPomodoroSet:this.currentPomodoroSet,pomodorosCompletedInCycle:this.pomodorosCompletedInCycle}),ne.ensureGlobalInterval(),this.updateDisplay(),this.currentSessionStartTime=new Date;let t=((n=(i=this.statusDisplayEl)==null?void 0:i.textContent)==null?void 0:n.split("(")[0].trim())||"\u4F5C\u696D";new Tt.Notice(`${t} \u3092\u958B\u59CB\u3057\u307E\u3057\u305F\u3002`)}pauseTimer(){var i,n;if(!this.isRunning)return;this.isRunning=!1,ne.widgetStates.set(this.config.id,{...this.currentSettings,isRunning:!1,remainingTime:this.remainingTime,currentPomodoroSet:this.currentPomodoroSet,pomodorosCompletedInCycle:this.pomodorosCompletedInCycle}),ne.clearGlobalIntervalIfNoneRunning(),this.updateDisplay();let t=((n=(i=this.statusDisplayEl)==null?void 0:i.textContent)==null?void 0:n.split("(")[0].trim())||"\u4F5C\u696D";new Tt.Notice(`${t} \u3092\u4E00\u6642\u505C\u6B62\u3057\u307E\u3057\u305F\u3002`)}resetCurrentTimerConfirm(){var i,n;let t=Date.now();if(this.lastResetClickTime&&t-this.lastResetClickTime<1500)this.pauseTimer(),this.resetTimerState(this.currentPomodoroSet,!0),new Tt.Notice("\u30B5\u30A4\u30AF\u30EB\u6570\u3082\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3057\u305F\u3002"),this.lastResetClickTime=null;else{this.pauseTimer(),this.resetTimerState(this.currentPomodoroSet,!1);let s=((n=(i=this.statusDisplayEl)==null?void 0:i.textContent)==null?void 0:n.split("(")[0].trim())||"\u4F5C\u696D";new Tt.Notice(`${s} \u3092\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3057\u305F\u3002
\uFF08\u30B5\u30A4\u30AF\u30EB\u6570\u3082\u30EA\u30BB\u30C3\u30C8\u3059\u308B\u306B\u306F\u3082\u3046\u4E00\u5EA6\u3059\u3050\u62BC\u3057\u3066\u304F\u3060\u3055\u3044\uFF09`),this.lastResetClickTime=t}}resetTimerState(t,i){switch(this.currentPomodoroSet=t,t){case"work":this.remainingTime=this.currentSettings.workMinutes*60;break;case"shortBreak":this.remainingTime=this.currentSettings.shortBreakMinutes*60;break;case"longBreak":this.remainingTime=this.currentSettings.longBreakMinutes*60;break}i&&(this.pomodorosCompletedInCycle=0),this.isRunning?this.pauseTimer():this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.isRunning=!1,this.updateDisplay()}playSoundNotification(){let t=this.plugin.settings.pomodoroNotificationSound,i=this.plugin.settings.pomodoroNotificationVolume,n=t!=null?t:this.currentSettings.notificationSound,s=i!==void 0?i:this.currentSettings.notificationVolume;if(n==="off")return;this.currentAudioElement&&(this.currentAudioElement.pause(),this.currentAudioElement.currentTime=0,this.currentAudioElement=null),(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=new(window.AudioContext||window.webkitAudioContext));let r=this.audioContext;try{if(n==="default_beep"){let o=r.createOscillator(),a=r.createGain();o.type="sine",o.frequency.setValueAtTime(880,r.currentTime),a.gain.setValueAtTime(s,r.currentTime),a.gain.exponentialRampToValueAtTime(1e-4,r.currentTime+.7),o.connect(a),a.connect(r.destination),o.start(r.currentTime),o.stop(r.currentTime+.7),o.onended=()=>{r.close().catch(()=>{}),this.audioContext=null}}else if(n==="bell"){let o=r.createOscillator(),a=r.createOscillator(),c=r.createGain();o.type="triangle",a.type="triangle",o.frequency.setValueAtTime(880,r.currentTime),a.frequency.setValueAtTime(1320,r.currentTime),c.gain.setValueAtTime(s,r.currentTime),c.gain.exponentialRampToValueAtTime(1e-4,r.currentTime+.8),o.connect(c),a.connect(c),c.connect(r.destination),o.start(r.currentTime),a.start(r.currentTime),o.stop(r.currentTime+.8),a.stop(r.currentTime+.8),a.detune.setValueAtTime(5,r.currentTime+.2),o.onended=()=>{r.close().catch(()=>{}),this.audioContext=null}}else if(n==="chime"){let o=[523.25,659.25,784],a=r.currentTime;o.forEach((c,d)=>{let u=r.createOscillator(),f=r.createGain();u.type="sine",u.frequency.setValueAtTime(c,a+d*.18),f.gain.setValueAtTime(s,a+d*.18),f.gain.exponentialRampToValueAtTime(1e-4,a+d*.18+.22),u.connect(f),f.connect(r.destination),u.start(a+d*.18),u.stop(a+d*.18+.22),d===o.length-1&&(u.onended=()=>{r.close().catch(()=>{}),this.audioContext=null})})}}catch(o){new Tt.Notice("\u97F3\u58F0\u306E\u518D\u751F\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),console.error("Error playing sound:",o)}}async handleSessionEnd(){var n,s,r;yt(this.plugin,"handleSessionEnd called",this),this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.isRunning=!1,this.currentSessionEndTime=new Date;let t=!1;if(this.currentPomodoroSet==="work"){let o,a;this.currentSessionStartTime&&this.currentSessionEndTime?(o=this.currentSessionStartTime,a=this.currentSessionEndTime):(o=new Date,a=new Date);let c=g=>g.toString().padStart(2,"0"),d=`${o.getFullYear()}-${c(o.getMonth()+1)}-${c(o.getDate())}`,u=`${c(o.getHours())}:${c(o.getMinutes())}`,f=`${c(a.getHours())}:${c(a.getMinutes())}`;this.sessionLogs.push({date:d,start:u,end:f,memo:((n=this.memoWidget)==null?void 0:n.getMemoContent())||"",sessionType:"work"}),t=!0}else if(this.currentPomodoroSet==="shortBreak"){let o,a;this.currentSessionStartTime&&this.currentSessionEndTime?(o=this.currentSessionStartTime,a=this.currentSessionEndTime):(o=new Date,a=new Date);let c=g=>g.toString().padStart(2,"0"),d=`${o.getFullYear()}-${c(o.getMonth()+1)}-${c(o.getDate())}`,u=`${c(o.getHours())}:${c(o.getMinutes())}`,f=`${c(a.getHours())}:${c(a.getMinutes())}`;this.sessionLogs.push({date:d,start:u,end:f,memo:((s=this.memoWidget)==null?void 0:s.getMemoContent())||"",sessionType:"shortBreak"}),t=!0}else if(this.currentPomodoroSet==="longBreak"){let o,a;this.currentSessionStartTime&&this.currentSessionEndTime?(o=this.currentSessionStartTime,a=this.currentSessionEndTime):(o=new Date,a=new Date);let c=g=>g.toString().padStart(2,"0"),d=`${o.getFullYear()}-${c(o.getMonth()+1)}-${c(o.getDate())}`,u=`${c(o.getHours())}:${c(o.getMinutes())}`,f=`${c(a.getHours())}:${c(a.getMinutes())}`;this.sessionLogs.push({date:d,start:u,end:f,memo:((r=this.memoWidget)==null?void 0:r.getMemoContent())||"",sessionType:"longBreak"}),t=!0}ne.endSessionAndAdvance(this.config.id,this);let i=this.plugin.settings.pomodoroExportFormat||"none";if(t&&i!=="none"&&await this.exportSessionLogs(i),this.plugin.settings.openBoardOnPomodoroEnd){let o=this.plugin.settings.boards,a=o==null?void 0:o.find(c=>{var d;return(d=c.widgets)==null?void 0:d.some(u=>u.id===this.config.id)});a&&(this.plugin.openWidgetBoardById(a.id),new Tt.Notice("\u30DD\u30E2\u30C9\u30FC\u30ED\u7D42\u4E86: \u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u958B\u304D\u307E\u3057\u305F\u3002"))}this.plugin.settings.autoStartNextPomodoroSession&&setTimeout(()=>{this.toggleStartPause()},800)}skipToNextSessionConfirm(){var t,i;if(!this.currentSessionStartTime){let n=new Date,s=c=>c.toString().padStart(2,"0"),r=`${n.getFullYear()}-${s(n.getMonth()+1)}-${s(n.getDate())}`,o=`${s(n.getHours())}:${s(n.getMinutes())}`;this.sessionLogs.push({date:r,start:o,end:o,memo:((t=this.memoWidget)==null?void 0:t.getMemoContent())||"",sessionType:this.currentPomodoroSet}),yt(this.plugin,"skipToNextSessionConfirm: sessionLogs after push",this.sessionLogs),new Tt.Notice("\u4F5C\u696D\u304C\u958B\u59CB\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u304C\u30010\u79D2\u306E\u4F5C\u696D\u30ED\u30B0\u3092\u8A18\u9332\u3057\u3066\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002",5e3);let a=this.plugin.settings.pomodoroExportFormat||"none";a!=="none"&&(yt(this.plugin,"skipToNextSessionConfirm: calling exportSessionLogs",this.sessionLogs),this.exportSessionLogs(a)),ne.endSessionAndAdvance(this.config.id,this);return}if(this.currentSessionStartTime){let n=this.currentSessionStartTime,s=new Date,r=u=>u.toString().padStart(2,"0"),o=`${n.getFullYear()}-${r(n.getMonth()+1)}-${r(n.getDate())}`,a=`${r(n.getHours())}:${r(n.getMinutes())}`,c=`${r(s.getHours())}:${r(s.getMinutes())}`;this.sessionLogs.push({date:o,start:a,end:c,memo:((i=this.memoWidget)==null?void 0:i.getMemoContent())||"",sessionType:this.currentPomodoroSet}),yt(this.plugin,"skipToNextSessionConfirm: normal skip, sessionLogs after push",this.sessionLogs);let d=this.plugin.settings.pomodoroExportFormat||"none";d!=="none"&&(yt(this.plugin,"skipToNextSessionConfirm: calling exportSessionLogs (normal skip)",this.sessionLogs),this.exportSessionLogs(d))}ne.endSessionAndAdvance(this.config.id,this),new Tt.Notice("\u6B21\u306E\u30BB\u30C3\u30B7\u30E7\u30F3\u3078\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3057\u305F\u3002")}onunload(){var i,n,s;let t=`[${((i=this.config)==null?void 0:i.id)||"PomodoroWidget"}]`;this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.isRunning=!1,this.audioContext&&this.audioContext.state!=="closed"&&(this.audioContext.close().catch(r=>console.error(`${t} Error closing AudioContext:`,r)),this.audioContext=null),this.currentAudioElement&&(this.currentAudioElement.pause(),this.currentAudioElement.src="",this.currentAudioElement=null),this.constructor.widgetInstances.delete((n=this.config)==null?void 0:n.id),this.constructor.widgetStates.delete((s=this.config)==null?void 0:s.id),this.memoWidget&&this.memoWidget.isEditing&&this.memoWidget.saveChanges()}async updateExternalSettings(t,i){var v,_;if(i&&((v=this.config)==null?void 0:v.id)!==i)return;let n={...this.currentSettings};this.currentSettings={...this.currentSettings,...t},this.config&&this.config.settings&&Object.assign(this.config.settings,this.currentSettings);let s=n.memoContent!==this.currentSettings.memoContent,r=n.workMinutes!==this.currentSettings.workMinutes,o=n.shortBreakMinutes!==this.currentSettings.shortBreakMinutes,a=n.longBreakMinutes!==this.currentSettings.longBreakMinutes,c=n.pomodorosUntilLongBreak!==this.currentSettings.pomodorosUntilLongBreak,d=n.backgroundImageUrl!==this.currentSettings.backgroundImageUrl,u=n.notificationSound!==this.currentSettings.notificationSound,f=n.notificationVolume!==this.currentSettings.notificationVolume,g=n.exportFormat!==this.currentSettings.exportFormat,p=r||o||a||c;if(s&&!p&&!(d||u||f||g)){await this.renderMemo(this.currentSettings.memoContent),this.updateMemoEditUI();return}d&&this.applyBackground(this.currentSettings.backgroundImageUrl),p?this.isRunning?(new Tt.Notice("\u30BF\u30A4\u30DE\u30FC\u8A2D\u5B9A\u304C\u5909\u66F4\u3055\u308C\u305F\u305F\u3081\u3001\u73FE\u5728\u306E\u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u65B0\u3057\u3044\u8A2D\u5B9A\u3067\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3059\u3002",5e3),this.pauseTimer(),this.resetTimerState(this.currentPomodoroSet,!1)):this.resetTimerState(this.currentPomodoroSet,!1):this.scheduleRender(),(_=this.memoWidget)!=null&&_.isEditing||this.updateMemoEditUI()}static removePersistentInstance(t,i){ne.widgetInstances.get(t)&&ne.widgetInstances.delete(t)}static cleanupAllPersistentInstances(t){this.widgetInstances.forEach(i=>{typeof i.onunload=="function"&&i.onunload()}),this.widgetInstances.clear(),this.widgetStates.clear()}async exportSessionLogs(t){if(yt(this.plugin,"exportSessionLogs called",this.sessionLogs),this.sessionLogs.length===0){new Tt.Notice("\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3059\u308B\u30ED\u30B0\u304C\u3042\u308A\u307E\u305B\u3093\u3002");return}let i="",n="";if(t==="csv")n="csv";else if(t==="json")n="json";else if(t==="markdown")n="md";else return;let r=this.app.vault.configDir+"/plugins/"+this.plugin.manifest.id+"/logs",o=r+`/pomodoro-log.${n}`,a=[];try{if(await this.app.vault.adapter.exists(r)||await this.app.vault.adapter.mkdir(r),await this.app.vault.adapter.exists(o)){let u=await this.app.vault.adapter.read(o);if(t==="csv"){let f=u.split(`
`).filter(g=>g.trim()!=="");if(f.length>1)for(let g=1;g<f.length;g++){let[p,y,w,v,_]=f[g].split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);a.push({date:p||"",start:y||"",end:w||"",sessionType:v||"work",memo:_?_.replace(/^"|"$/g,"").replace(/""/g,'"'):""})}}else if(t==="json")try{let f=JSON.parse(u);Array.isArray(f)?a=f:a=[]}catch(f){a=[]}else if(t==="markdown"){let f=u.split(`
`).filter(g=>g.trim()!=="");if(f.length>2)for(let g=2;g<f.length;g++){let p=f[g].split("|").map(y=>y.trim());if(p.length>=6){let y=p.slice(5).join("|");y=y.replace(/^\|+/,"").replace(/\|+$/,"").trim(),a.push({date:p[1],start:p[2],end:p[3],sessionType:p[4]||"work",memo:y})}}}}a=a.concat(this.sessionLogs),t==="csv"?i=`\uFEFFdate,start,end,sessionType,memo
`+a.map(u=>{let f=(u.memo||"").replace(/\r?\n/g,"\\n").replace(/"/g,'""');return`${u.date},${u.start},${u.end},${u.sessionType},"${f}"`}).join(`
`):t==="json"?i=JSON.stringify(a,null,2):t==="markdown"&&(i=`| date | start | end | sessionType | memo |
|---|---|---|---|---|
`+a.map(u=>`| ${u.date} | ${u.start} | ${u.end} | ${u.sessionType} | ${(u.memo||"").replace(/\|/g,"\\|").replace(/\r?\n/g,"<br>")} |`).join(`
`)),await this.app.vault.adapter.write(o,i),new Tt.Notice(`\u30DD\u30E2\u30C9\u30FC\u30ED\u30ED\u30B0\u3092 ${o} \u306B\u4FDD\u5B58\u3057\u307E\u3057\u305F\u3002`),this.sessionLogs=[]}catch(c){new Tt.Notice("\u30ED\u30B0\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),console.error("Error exporting session logs:",c)}}scheduleRender(){this.needsRender||(this.needsRender=!0,requestAnimationFrame(()=>{this.updateDisplay(),this.needsRender=!1}))}},Di=ne;Di.widgetInstances=new Map,Di.widgetStates=new Map,Di.globalIntervalId=null;var Jn={period:"today",aiSummaryAutoEnabled:!1,aiSummaryAutoIntervalHours:-1,aiSummaryManualEnabled:!0};var Uo="default-board-"+Date.now(),ni={id:Uo,name:"\u30DE\u30A4\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9",defaultMode:"mode-center-half",widgets:[{id:"default-pomodoro-"+Date.now(),type:"pomodoro",title:"\u30DD\u30E2\u30C9\u30FC\u30ED\u30BF\u30A4\u30DE\u30FC",settings:{...se}},{id:"default-reflection-"+Date.now(),type:"reflection-widget",title:"\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8",settings:{...Jn}}]},$o={boards:[ni],lastOpenedBoardId:Uo,defaultBoardIdForQuickOpen:Uo,pomodoroNotificationSound:se.notificationSound,pomodoroNotificationVolume:se.notificationVolume,timerStopwatchNotificationSound:"default_beep",timerStopwatchNotificationVolume:.5,pomodoroExportFormat:"none",boardGroups:[],openBoardOnPomodoroEnd:!1,autoStartNextPomodoroSession:!1,tweetWidgetAvatarUrl:"",geminiApiKey:"",llm:{gemini:{apiKey:"",model:"gemini-2.0-flash-exp"}},showAiHistory:!1,aiAvatarUrls:"",aiReplyRpm:2,aiReplyRpd:10,aiReplyTriggerless:!1,aiReplyDelayMinMs:1500,aiReplyDelayMaxMs:7e3,baseFolder:"",defaultTweetPeriod:"all",defaultTweetCustomDays:1,userSummaryPromptToday:"",userSummaryPromptWeek:"",userTweetPrompt:"",debugLogging:!1},ki={dailyNoteFormat:"YYYY-MM-DD"};var be=require("obsidian");var Ai=require("obsidian");var Ye={memoContent:"",memoHeightMode:"auto",fixedHeightPx:120},$t=class{constructor(){this.id="memo";this.isEditingMemo=!1;this.needsRender=!1;this._memoEditAreaInputListener=null;this.taskObserver=null;this.observerThrottle=null;this.isEditingMemo=!1}static scheduleBatchMemoResize(t){$t.pendingMemoResizeElements.includes(t)||$t.pendingMemoResizeElements.push(t),!$t.scheduledMemoResize&&($t.scheduledMemoResize=!0,requestAnimationFrame(()=>{$t.pendingMemoResizeElements.forEach(n=>{n.style.height="auto"});let i=$t.pendingMemoResizeElements.map(n=>n.scrollHeight);$t.pendingMemoResizeElements.forEach((n,s)=>{n.style.height=i[s]+"px"}),$t.pendingMemoResizeElements.length=0,$t.scheduledMemoResize=!1}))}async renderMemo(t){if(!this.memoDisplayEl)return;this.memoDisplayEl.empty();let i=t==null?void 0:t.trim();i&&!this.isEditingMemo?(this.memoDisplayEl.style.display="block",await Ut(i,this.memoDisplayEl,this.config.id,new Ai.Component),this.setupTaskEventListeners()):this.isEditingMemo||(this.memoDisplayEl.style.display="none")}applyContainerHeightStyles(){var i;if(!this.memoContainerEl)return;let t=`[${((i=this.config)==null?void 0:i.id)||"MemoWidget"}]`;if(this.memoContainerEl.style.height="",this.memoContainerEl.style.minHeight="",this.memoContainerEl.style.maxHeight="",this.memoContainerEl.style.overflowY="hidden",this.memoDisplayEl&&(this.memoDisplayEl.style.height="",this.memoDisplayEl.style.minHeight="",this.memoDisplayEl.style.maxHeight="none"),this.memoEditAreaEl&&(this.memoEditAreaEl.style.height="",this.memoEditAreaEl.style.minHeight="",this.memoEditAreaEl.style.maxHeight=""),this.removeMemoEditAreaAutoResizeListener(),this.currentSettings.memoHeightMode==="fixed"){let n=Math.max(60,this.currentSettings.fixedHeightPx||Ye.fixedHeightPx||120);this.memoContainerEl.style.height=`${n}px`,this.memoContainerEl.style.minHeight=`${n}px`,this.memoContainerEl.style.maxHeight=`${n}px`,this.memoContainerEl.style.overflowY="hidden",this.memoDisplayEl&&!this.isEditingMemo&&(this.memoDisplayEl.style.height="100%",this.memoDisplayEl.style.overflowY="auto"),this.memoEditContainerEl&&this.isEditingMemo,this.memoEditAreaEl&&this.isEditingMemo}else this.memoContainerEl.style.height="",this.memoContainerEl.style.minHeight="80px",this.memoContainerEl.style.maxHeight="",this.memoContainerEl.style.overflowY="visible",this.memoDisplayEl&&!this.isEditingMemo&&(this.memoDisplayEl.style.maxHeight="none"),this.memoEditAreaEl&&this.isEditingMemo&&(this.addMemoEditAreaAutoResizeListener(),setTimeout(()=>{this.memoEditAreaEl&&this.isEditingMemo&&this.memoEditAreaEl.dispatchEvent(new Event("input"))},0))}addMemoEditAreaAutoResizeListener(){this.memoEditAreaEl&&(this._memoEditAreaInputListener&&this.memoEditAreaEl.removeEventListener("input",this._memoEditAreaInputListener),this._memoEditAreaInputListener=()=>{this.memoEditAreaEl&&$t.scheduleBatchMemoResize(this.memoEditAreaEl)},this.memoEditAreaEl.addEventListener("input",this._memoEditAreaInputListener))}removeMemoEditAreaAutoResizeListener(){this.memoEditAreaEl&&this._memoEditAreaInputListener&&(this.memoEditAreaEl.removeEventListener("input",this._memoEditAreaInputListener),this._memoEditAreaInputListener=null)}setupTaskEventListeners(){if(!this.memoDisplayEl)return;let t=(this.currentSettings.memoContent||"").split(/\r?\n/),i=Array.from(this.memoDisplayEl.querySelectorAll('input[type="checkbox"]')),n=0;i.forEach(s=>{for(;n<t.length;n++)if(/^\s*[-*]\s+\[[ xX]\]/.test(t[n])){s.dataset.lineIndex=String(n),n++;break}s.addEventListener("change",()=>{let r=parseInt(s.dataset.lineIndex||"-1",10);r<0||(t[r]=t[r].replace(/\[[ xX]\]/,s.checked?"[x]":"[ ]"),this.persistMemoContent(t.join(`
`)))})}),this.taskObserver||(this.taskObserver=new MutationObserver(()=>{this.observerThrottle==null&&(this.observerThrottle=window.setTimeout(()=>{this.observerThrottle=null,this.isEditingMemo||this.setupTaskEventListeners()},50))})),this.taskObserver.disconnect(),this.taskObserver.observe(this.memoDisplayEl,{childList:!0,subtree:!0})}async persistMemoContent(t){if(t===this.currentSettings.memoContent)return;this.currentSettings.memoContent=t,this.config&&this.config.settings&&(this.config.settings.memoContent=t);let i;if(this.plugin.widgetBoardModals){for(let[r,o]of this.plugin.widgetBoardModals.entries())if(o.isOpen){i=r;break}}if(!i)return;let n=this.plugin.settings.boards.find(r=>r.id===i);if(!n)return;let s=n.widgets.find(r=>r.id===this.config.id);s&&(s.settings||(s.settings={...Ye}),s.settings.memoContent=t,await this.plugin.saveSettings(i),this.updateMemoEditUI())}updateMemoEditUI(){var n;if(!this.memoDisplayEl||!this.memoEditContainerEl||!this.editMemoButtonEl){console.error(`[${(n=this.config)==null?void 0:n.id}] updateMemoEditUI: One or more UI elements are null.`);return}this._prevDisplay||(this._prevDisplay={});let t=this._prevDisplay,i=this.currentSettings.memoContent&&this.currentSettings.memoContent.trim()!=="";if(t.isEditingMemo!==this.isEditingMemo&&(this.memoDisplayEl.style.display=this.isEditingMemo?"none":i?"block":"none",this.memoEditContainerEl.style.display=this.isEditingMemo?"flex":"none",this.editMemoButtonEl.style.display=this.isEditingMemo?"none":"",t.isEditingMemo=this.isEditingMemo),!this.isEditingMemo&&t.memoContent!==this.currentSettings.memoContent){let s=this.memoDisplayEl.parentElement;if(s){let r=this.memoDisplayEl.cloneNode(!1);s.replaceChild(r,this.memoDisplayEl),this.memoDisplayEl=r}setTimeout(()=>{this.renderMemo(this.currentSettings.memoContent).then(()=>{this.applyContainerHeightStyles()}).catch(r=>{console.error(`[${this.config.id}] Error rendering memo in updateMemoEditUI:`,r),this.applyContainerHeightStyles()})},0),t.memoContent=this.currentSettings.memoContent}this.isEditingMemo&&this.memoEditAreaEl&&t.editAreaValue!==this.currentSettings.memoContent&&(this.memoEditAreaEl.value=this.currentSettings.memoContent||"",t.editAreaValue=this.currentSettings.memoContent),(t.memoHeightMode!==this.currentSettings.memoHeightMode||t.isEditingMemo!==this.isEditingMemo)&&(this.applyContainerHeightStyles(),t.memoHeightMode=this.currentSettings.memoHeightMode),this.isEditingMemo&&this.memoEditAreaEl&&document.activeElement!==this.memoEditAreaEl&&(this.memoEditAreaEl.focus(),setTimeout(()=>{this.memoEditAreaEl&&this.memoEditAreaEl.dispatchEvent(new Event("input"))},0))}enterMemoEditMode(){this.taskObserver&&this.taskObserver.disconnect(),this.isEditingMemo=!0,this.memoEditAreaEl?(this.memoEditAreaEl.value=this.currentSettings.memoContent||"",setTimeout(()=>{this.memoEditAreaEl&&this.memoEditAreaEl.dispatchEvent(new Event("input"))},0)):console.warn(`[${this.config.id}] enterMemoEditMode: memoEditAreaEl is null.`),this.scheduleRender()}async saveMemoChanges(){let t=`[${this.config.id} (${this.config.title||"Memo"})]`;if(!this.memoEditAreaEl){console.error(`${t} SAVE_MEMO_CHANGES: memoEditAreaEl is null! Cannot get new content.`),this.isEditingMemo=!1,this.updateMemoEditUI();return}let i=this.memoEditAreaEl.value;if(this.isEditingMemo=!1,i!==(this.currentSettings.memoContent||"")){yt(this.plugin,`${t} SAVE_MEMO_CHANGES: Content WILL change. Old: "${this.currentSettings.memoContent}", New: "${i}"`),this.currentSettings.memoContent=i;let n=!1,s;if(this.plugin.widgetBoardModals){for(let[o,a]of this.plugin.widgetBoardModals.entries())if(a.isOpen){s=o;break}}if(!s){console.error(`${t} SAVE_MEMO_CHANGES: Critical - currentModalBoardId is not available. Cannot reliably find the board in global settings.`),new Ai.Notice("\u30A8\u30E9\u30FC: \u73FE\u5728\u306E\u30DC\u30FC\u30C9\u3092\u7279\u5B9A\u3067\u304D\u305A\u3001\u30E1\u30E2\u3092\u4FDD\u5B58\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",7e3),this.updateMemoEditUI();return}yt(this.plugin,`${t} SAVE_MEMO_CHANGES: Targeting board ID '${s}' in global plugin settings.`);let r=this.plugin.settings.boards.find(o=>o.id===s);if(r){let o=r.widgets.find(a=>a.id===this.config.id);o?(o.settings||(console.warn(`${t} SAVE_MEMO_CHANGES: widgetInGlobalSettings.settings was undefined. Initializing.`),o.settings={...Ye}),o.settings.memoContent=i,n=!0):console.error(`${t} SAVE_MEMO_CHANGES: Widget with ID '${this.config.id}' NOT FOUND in global board settings for board '${r.name}'. This is a critical error if save is expected.`)}else console.error(`${t} SAVE_MEMO_CHANGES: Board with ID '${s}' NOT FOUND in global plugin settings. This is a critical error.`);n?(yt(this.plugin,`${t} SAVE_MEMO_CHANGES: Calling this.plugin.saveSettings(currentModalBoardId) to persist all changes.`),await this.plugin.saveSettings(s)):(console.error(`${t} SAVE_MEMO_CHANGES: Did not update global settings store due to lookup failure. Save not fully effective.`),new Ai.Notice("\u30E1\u30E2\u306E\u4FDD\u5B58\u306B\u5931\u6557\u3057\u307E\u3057\u305F (\u30C7\u30FC\u30BF\u4E0D\u6574\u5408\u306E\u53EF\u80FD\u6027\u3042\u308A)\u3002",5e3))}this.updateMemoEditUI(),this.setupTaskEventListeners()}cancelMemoEditMode(){this.isEditingMemo=!1,this.updateMemoEditUI(),this.setupTaskEventListeners()}create(t,i,n){this.constructor.widgetInstances.set(t.id,this),this.config=t,this.app=i,this.plugin=n,this.currentSettings={...Ye,...t.settings||{}},t.settings=this.currentSettings,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","memo-widget"),this.widgetEl.setAttribute("data-widget-id",t.id),this.widgetEl.style.display="flex",this.widgetEl.style.flexDirection="column",this.widgetEl.style.minHeight="0";let s=this.widgetEl.createEl("h4");s.textContent=this.config.title&&this.config.title.trim()!==""?this.config.title:"";let r=this.widgetEl.createDiv({cls:"widget-content"});this.memoContainerEl=r.createDiv({cls:"memo-widget-container"});let o=this.memoContainerEl.createDiv({cls:"memo-widget-header"});this.editMemoButtonEl=o.createEl("button",{cls:"memo-widget-edit-button"}),(0,Ai.setIcon)(this.editMemoButtonEl,"pencil"),this.editMemoButtonEl.setAttribute("aria-label","\u30E1\u30E2\u3092\u7DE8\u96C6/\u8FFD\u52A0"),this.editMemoButtonEl.onClickEvent(()=>this.enterMemoEditMode()),this.memoDisplayEl=this.memoContainerEl.createDiv({cls:"memo-widget-display"}),this.memoEditContainerEl=this.memoContainerEl.createDiv({cls:"memo-widget-edit-container"}),this.memoEditContainerEl.style.display="none",this.memoEditAreaEl=this.memoEditContainerEl.createEl("textarea",{cls:"memo-widget-edit-area"});let a=this.memoEditContainerEl.createDiv({cls:"memo-widget-edit-controls"});this.saveMemoButtonEl=a.createEl("button",{text:"\u4FDD\u5B58"}),this.saveMemoButtonEl.addClass("mod-cta"),this.cancelMemoButtonEl=a.createEl("button",{text:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),this.saveMemoButtonEl.onClickEvent(()=>this.saveMemoChanges()),this.cancelMemoButtonEl.onClickEvent(()=>this.cancelMemoEditMode()),this.isEditingMemo=!1,this.scheduleRender();let c=t.settings||{};return c.width&&(this.widgetEl.style.width=c.width),c.height&&(this.widgetEl.style.height=c.height),this.widgetEl}async updateExternalSettings(t,i){var s;if(i&&((s=this.config)==null?void 0:s.id)!==i)return;let n=`[${this.config.id}]`;this.currentSettings={...this.currentSettings,...t},this.config&&this.config.settings?Object.assign(this.config.settings,this.currentSettings):this.config&&(this.config.settings={...this.currentSettings}),this.updateMemoEditUI(),this.setupTaskEventListeners()}onunload(){var i;let t=`[${((i=this.config)==null?void 0:i.id)||"MemoWidget"}]`;this.removeMemoEditAreaAutoResizeListener(),this.taskObserver&&(this.taskObserver.disconnect(),this.taskObserver=null),this.memoEditAreaEl&&this._memoEditAreaInputListener&&(this.memoEditAreaEl.removeEventListener("input",this._memoEditAreaInputListener),this._memoEditAreaInputListener=null),this.constructor.widgetInstances.delete(this.config.id),this.isEditingMemo=!1}static removePersistentInstance(t,i){$t.widgetInstances.get(t)&&$t.widgetInstances.delete(t)}static cleanupAllPersistentInstances(t){this.widgetInstances.forEach(i=>{typeof i.onunload=="function"&&i.onunload()}),this.widgetInstances.clear()}scheduleRender(){this.needsRender||(this.needsRender=!0,requestAnimationFrame(()=>{this.updateMemoEditUI(),this.needsRender=!1}))}},Ci=$t;Ci.widgetInstances=new Map,Ci.pendingMemoResizeElements=[],Ci.scheduledMemoResize=!1;var qo=require("obsidian");var nr=er(Go()),sr=class{constructor(){this.id="calendar";this.currentDate=new Date;this.selectedDateInfoEl=null}create(t,i,n){this.config=t,this.app=i,this.plugin=n,this.currentSettings={...ki,...t.settings||{}},t.settings=this.currentSettings,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","calendar-widget"),this.widgetEl.setAttribute("data-widget-id",t.id);let s=this.widgetEl.createEl("h4");s.textContent=this.config.title,this.calendarContentEl=this.widgetEl.createDiv({cls:"widget-content calendar-flex-content"}),this.currentDate=new Date,this.renderCalendar();let r=t.settings||{};return r.width&&(this.widgetEl.style.width=r.width),r.height&&(this.widgetEl.style.height=r.height),this.widgetEl}renderCalendar(){if(!this.calendarContentEl)return;this.calendarContentEl.empty(),this.selectedDateInfoEl=null;let t=this.currentDate.getFullYear(),i=this.currentDate.getMonth(),n=this.calendarContentEl.createDiv({cls:"calendar-header"}),s=n.createEl("button");(0,qo.setIcon)(s,"arrow-left"),s.setAttribute("aria-label","\u524D\u306E\u6708"),s.onClickEvent(()=>this.changeMonth(-1)),n.createSpan({cls:"calendar-month-year",text:`${t}\u5E74 ${i+1}\u6708`});let r=n.createEl("button");(0,qo.setIcon)(r,"arrow-right"),r.setAttribute("aria-label","\u6B21\u306E\u6708"),r.onClickEvent(()=>this.changeMonth(1));let o=this.calendarContentEl.createEl("table",{cls:"calendar-table"}),a=["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"],d=o.createEl("thead").createEl("tr"),u=document.createDocumentFragment();a.forEach(w=>{let v=createEl("th",{text:w});u.appendChild(v)}),d.appendChild(u);let f=o.createEl("tbody"),g=new Date(t,i,1),p=new Date(g);p.setDate(p.getDate()-g.getDay());let y=new Date;y.setHours(0,0,0,0),this.selectedDateInfoEl=this.calendarContentEl.createDiv({cls:"calendar-selected-date-info"});for(let w=0;w<6;w++){let v=f.createEl("tr"),_=document.createDocumentFragment();for(let S=0;S<7;S++){let M=new Date(p),D=v.createEl("td",{text:String(M.getDate())}),T=M.getFullYear(),C=M.getMonth()+1,A=M.getDate(),I=`${T}-${String(C).padStart(2,"0")}-${String(A).padStart(2,"0")}`;D.setAttr("data-date",I),M.getMonth()!==i&&D.addClass("calendar-other-month"),M.getFullYear()===y.getFullYear()&&M.getMonth()===y.getMonth()&&M.getDate()===y.getDate()&&D.addClass("calendar-today"),D.addEventListener("click",()=>{M.getMonth()!==i?(this.currentDate=new Date(M),this.renderCalendar(),setTimeout(()=>this.showNotesForDate(I),0)):this.showNotesForDate(I)}),p.setDate(p.getDate()+1),_.appendChild(D)}v.appendChild(_),p.getMonth()!==i&&p.getDate()>7&&w>=3}}changeMonth(t){this.currentDate.setMonth(this.currentDate.getMonth()+t,1),this.renderCalendar()}updateExternalSettings(t,i){var n;i&&((n=this.config)==null?void 0:n.id)!==i||(this.currentSettings={...this.currentSettings,...t},this.config&&this.config.settings&&(this.config.settings=this.currentSettings),this.renderCalendar())}showNotesForDate(t){var p,y;if(!this.selectedDateInfoEl)return;this.selectedDateInfoEl.empty(),this.selectedDateInfoEl.createEl("h5",{text:`${t} \u306E\u30CE\u30FC\u30C8\u4E00\u89A7`});let n=((y=(p=this.plugin)==null?void 0:p.settings)==null?void 0:y.calendarDailyNoteFormat)||"YYYY-MM-DD";yt(this.plugin,"calendar format:",n,"dateStr:",t);let[s,r,o]=t.split("-"),a=r.padStart(2,"0"),c=o.padStart(2,"0"),d=n.toUpperCase().replace(/YYYY/g,s).replace(/MM/g,a).replace(/DD/g,c);yt(this.plugin,"\u7F6E\u63DB\u5F8C dailyNoteName:",d),/\.md$/i.test(d)||(d+=".md");let u=d.replace(/\.md$/,""),f=this.app.vault.getFiles().find(w=>w.extension==="md"&&(w.basename===u||w.name===d));if(f){let w=this.selectedDateInfoEl.createEl("button",{text:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u3092\u958B\u304F"});w.onclick=()=>{this.app.workspace.openLinkText(f.path,"",!1)}}else yt(this.plugin,"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u5019\u88DC\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093:",{dailyNoteBase:u,dailyNoteName:d}),this.app.vault.getFiles().forEach(w=>{yt(this.plugin,"\u30D5\u30A1\u30A4\u30EB:",{basename:w.basename,name:w.name,extension:w.extension})}),this.selectedDateInfoEl.createEl("div",{text:"\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u306F\u5B58\u5728\u3057\u307E\u305B\u3093\u3002"});let g=this.app.vault.getFiles().filter(w=>{if(w.extension!=="md")return!1;let v=(0,nr.default)(w.stat.ctime).format("YYYY-MM-DD"),_=(0,nr.default)(w.stat.mtime).format("YYYY-MM-DD");return v===t||_===t});if(g.length>0){let w=this.selectedDateInfoEl.createEl("ul");g.forEach(v=>{let _=w.createEl("li"),S=_.createEl("a",{text:v.basename});S.href="#",S.onclick=M=>{M.preventDefault(),this.app.workspace.openLinkText(v.path,"",!1)},_.createSpan({text:` (${(0,nr.default)(v.stat.mtime).format("YYYY/MM/DD HH:mm")})`})})}else this.selectedDateInfoEl.createEl("div",{text:"\u3053\u306E\u65E5\u306B\u4F5C\u6210\u30FB\u7DE8\u96C6\u3055\u308C\u305F\u30CE\u30FC\u30C8\u306F\u3042\u308A\u307E\u305B\u3093\u3002"})}onunload(){}};var Ko=er(Go()),Xo={maxNotes:10},rr=class{constructor(){this.id="recent-notes"}create(t,i,n){var a;this.config=t,this.app=i,this.plugin=n,this.currentSettings={...Xo,...t.settings||{}},t.settings=this.currentSettings,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","recent-notes-widget"),this.widgetEl.setAttribute("data-widget-id",t.id);let s=this.widgetEl.createEl("h4");s.textContent=((a=this.config.title)==null?void 0:a.trim())||"\u6700\u8FD1\u7DE8\u96C6\u3057\u305F\u30CE\u30FC\u30C8";let r=this.widgetEl.createDiv({cls:"widget-content"});this.renderNotesList(r);let o=t.settings||{};return o.width&&(this.widgetEl.style.width=o.width),o.height&&(this.widgetEl.style.height=o.height),this.widgetEl}renderNotesList(t){let i=t.parentElement;if(i){let g=t.cloneNode(!1);i.replaceChild(g,t),t=g}let n=this.app.vault.getFiles().filter(g=>g.extension==="md").sort((g,p)=>p.stat.mtime-g.stat.mtime).slice(0,this.currentSettings.maxNotes||10);if(n.length===0){t.createEl("p",{text:"\u6700\u8FD1\u7DE8\u96C6\u3057\u305F\u30CE\u30FC\u30C8\u304C\u3042\u308A\u307E\u305B\u3093\u3002"});return}let s=100,r=32;if(n.length<s){let g=t.createEl("ul",{cls:"recent-notes-list"}),p=document.createDocumentFragment();n.forEach(y=>{let w=document.createElement("li");w.className="recent-note-item";let v=document.createElement("a");v.textContent=y.basename,v.href="#",v.onclick=M=>{M.preventDefault(),this.app.workspace.openLinkText(y.path,"",!1)},w.appendChild(v);let _=(0,Ko.default)(y.stat.mtime).format("YYYY/MM/DD HH:mm"),S=document.createElement("span");S.textContent=` (${_})`,S.className="recent-note-date",w.appendChild(S),p.appendChild(w)}),g.appendChild(p);return}let o=Math.floor(t.clientHeight/r)||10,a=0,c=Math.min(n.length,o+5),d=t.createDiv({cls:"recent-notes-virtual-wrapper"});d.style.position="relative",d.style.height=`${Math.min(n.length*r,600)}px`,d.style.overflowY="auto",d.style.maxHeight="600px";let u=d.createEl("ul",{cls:"recent-notes-list"});u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.right="0",u.style.width="100%";let f=g=>{a=Math.max(0,Math.floor(g/r)-2),c=Math.min(n.length,a+o+5),u.empty(),u.style.transform=`translateY(${a*r}px)`;let p=document.createDocumentFragment();for(let y=a;y<c;y++){let w=n[y],v=document.createElement("li");v.className="recent-note-item",v.style.height=`${r}px`;let _=document.createElement("a");_.textContent=w.basename,_.href="#",_.onclick=D=>{D.preventDefault(),this.app.workspace.openLinkText(w.path,"",!1)},v.appendChild(_);let S=(0,Ko.default)(w.stat.mtime).format("YYYY/MM/DD HH:mm"),M=document.createElement("span");M.textContent=` (${S})`,M.className="recent-note-date",v.appendChild(M),p.appendChild(v)}u.appendChild(p)};f(0),d.onscroll=g=>{f(d.scrollTop)}}updateExternalSettings(t){this.currentSettings={...this.currentSettings,...t},this.config&&this.config.settings&&Object.assign(this.config.settings,this.currentSettings);let i=this.widgetEl.querySelector(".widget-content");i&&this.renderNotesList(i)}};var Zo=require("obsidian"),or=class{constructor(){this.id="theme-switcher"}create(t,i,n){var a;this.config=t,this.app=i,this.plugin=n,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","theme-switcher-widget"),this.widgetEl.setAttribute("data-widget-id",t.id);let s=this.widgetEl.createEl("h4");s.textContent=((a=this.config.title)==null?void 0:a.trim())||"\u30C6\u30FC\u30DE\u5207\u308A\u66FF\u3048";let r=this.widgetEl.createDiv({cls:"widget-content"});this.renderThemeSelector(r);let o=t.settings||{};return o.width&&(this.widgetEl.style.width=o.width),o.height&&(this.widgetEl.style.height=o.height),this.widgetEl}renderThemeSelector(t){t.empty();let i=this.app.customCss;if(!i){t.createEl("p",{text:"\u30C6\u30FC\u30DE\u5207\u308A\u66FF\u3048API\u304C\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002"});return}let n=i.themes,s=[];Array.isArray(n)?s=n:n&&typeof n=="object"&&(s=Object.values(n).map(f=>typeof f=="string"?f:f.name).filter(f=>typeof f=="string"));let r=i.theme||"",o={id:"",name:"\u30C7\u30D5\u30A9\u30EB\u30C8\uFF08Obsidian\uFF09"},a=s.filter(f=>f!==""&&f!=="moonstone"),c=[o,...a.map(f=>({id:f,name:f}))],d=t.createEl("ul",{cls:"theme-switcher-list"}),u=[];c.forEach(f=>{let g=d.createEl("li",{cls:"theme-switcher-item"});g.textContent=f.name,(f.id===""&&(r===""||r===void 0)||f.id!==""&&r===f.id)&&g.classList.add("active"),g.onclick=()=>{if(f.id===""&&(i.theme===""||i.theme===void 0)||f.id!==""&&i.theme===f.id){new Zo.Notice("\u3059\u3067\u306B\u3053\u306E\u30C6\u30FC\u30DE\u304C\u9069\u7528\u3055\u308C\u3066\u3044\u307E\u3059\u3002");return}i.setTheme(f.id),new Zo.Notice(`\u30C6\u30FC\u30DE\u300C${f.name}\u300D\u3092\u9069\u7528\u3057\u307E\u3057\u305F\u3002`),u.forEach(p=>p.classList.remove("active")),g.classList.add("active")},u.push(g)})}};var si=require("obsidian"),ve={timerMinutes:5,timerSeconds:0,notificationSound:"default_beep",notificationVolume:.5},et=class{constructor(){this.id="timer-stopwatch";this.audioContext=null;this.currentAudioElement=null;this.needsRender=!1}scheduleRender(){this.needsRender||(this.needsRender=!0,requestAnimationFrame(()=>{this.updateDisplay(),this.needsRender=!1}))}getInternalState(){return et.widgetStates.get(this.config.id)}initializeInternalState(){var n,s,r,o;let t=((s=(n=this.currentSettings.timerMinutes)!=null?n:ve.timerMinutes)!=null?s:0)*60+((o=(r=this.currentSettings.timerSeconds)!=null?r:ve.timerSeconds)!=null?o:0),i={configId:this.config.id,mode:"timer",running:!1,initialTimerSeconds:t,remainingSeconds:t,elapsedSeconds:0,intervalId:null,lastTickTime:null};return et.widgetStates.set(this.config.id,i),i}updateInternalState(t){let i=this.getInternalState();i||(i=this.initializeInternalState());let n=t(i),s={...i,...n};et.widgetStates.set(this.config.id,s),et.notifyInstancesToUpdateDisplay(this.config.id)}static notifyInstancesToUpdateDisplay(t){let i=et.widgetInstances.get(t);i&&i.updateDisplay()}static tick(t){let i=et.widgetStates.get(t);if(!i||!i.running){i&&i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null,et.widgetStates.set(t,i));return}let n=Date.now(),s=i.lastTickTime?(n-i.lastTickTime)/1e3:1;if(i.lastTickTime=n,i.mode==="timer"){if(i.remainingSeconds-=s,i.remainingSeconds<=0){i.remainingSeconds=0,et.stopGlobalTimer(t);let r=et.widgetInstances.get(t);r&&(r.playSoundNotification(),r.openBoardIfClosed())}}else i.elapsedSeconds+=s;et.widgetStates.set(t,i),et.notifyInstancesToUpdateDisplay(t)}static ensureGlobalInterval(){this.globalIntervalId==null&&(this.globalIntervalId=window.setInterval(()=>{let t=!1;this.widgetStates.forEach((i,n)=>{i.running&&(t=!0,this.tick(n))}),!t&&this.globalIntervalId!=null&&(clearInterval(this.globalIntervalId),this.globalIntervalId=null)},250))}static clearGlobalIntervalIfNoneRunning(){Array.from(this.widgetStates.values()).every(t=>!t.running)&&this.globalIntervalId!=null&&(clearInterval(this.globalIntervalId),this.globalIntervalId=null)}static startGlobalTimer(t){let i=et.widgetStates.get(t);i&&(i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null),i.running=!0,i.lastTickTime=Date.now(),et.widgetStates.set(t,i),this.ensureGlobalInterval(),this.notifyInstancesToUpdateDisplay(t))}static stopGlobalTimer(t){let i=et.widgetStates.get(t);i&&(i.intervalId&&(clearInterval(i.intervalId),i.intervalId=null),i.running=!1,et.widgetStates.set(t,i),this.clearGlobalIntervalIfNoneRunning(),this.notifyInstancesToUpdateDisplay(t))}static resetGlobalTimer(t){et.stopGlobalTimer(t);let i=et.widgetStates.get(t);i&&(i.mode==="timer"?i.remainingSeconds=i.initialTimerSeconds:i.elapsedSeconds=0,et.widgetStates.set(t,i),et.notifyInstancesToUpdateDisplay(t))}create(t,i,n){var a;this.config=t,this.app=i,this.plugin=n,this.currentSettings={...ve,...t.settings||{}},this.config.settings=this.currentSettings,et.widgetInstances.set(t.id,this);let s=this.getInternalState();s?(this.currentSettings.timerMinutes=Math.floor(s.initialTimerSeconds/60),this.currentSettings.timerSeconds=s.initialTimerSeconds%60):s=this.initializeInternalState(),et.ensureGlobalInterval(),this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","timer-stopwatch-widget"),this.widgetEl.setAttribute("data-widget-id",t.id),this.widgetEl.setAttribute("data-widget-type",this.id);let r=this.widgetEl.createEl("h4");r.textContent=((a=this.config.title)==null?void 0:a.trim())||"\u30BF\u30A4\u30DE\u30FC / \u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1",r.classList.add("widget-title");let o=this.widgetEl.createDiv({cls:"widget-content"});return this.buildUI(o),this.updateDisplay(),this.widgetEl}buildUI(t){t.empty(),this.modeSwitchContainer=t.createEl("div",{cls:"timer-mode-switch setting-item"});let i=this.modeSwitchContainer.createEl("button",{text:"\u30BF\u30A4\u30DE\u30FC",cls:"mod-timer"}),n=this.modeSwitchContainer.createEl("button",{text:"\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1",cls:"mod-stopwatch"});i.onclick=()=>{this.handleSwitchMode("timer")},n.onclick=()=>{this.handleSwitchMode("stopwatch")},this.timerSetRowEl=t.createEl("div",{cls:"timer-set-row setting-item"}),this.timerSetRowEl.createSpan({text:"\u30BF\u30A4\u30DE\u30FC\u8A2D\u5B9A:"});let s=this.timerSetRowEl.createSpan({cls:"timer-input-wrap"});this.timerMinInput=s.createEl("input",{type:"number",cls:"timer-input"}),this.timerMinInput.setAttribute("min","0"),this.timerMinInput.setAttribute("max","999"),s.createSpan({text:"\u5206"});let r=this.timerSetRowEl.createSpan({cls:"timer-input-wrap"});this.timerSecInput=r.createEl("input",{type:"number",cls:"timer-input"}),this.timerSecInput.setAttribute("min","0"),this.timerSecInput.setAttribute("max","59"),r.createSpan({text:"\u79D2"}),this.timerMinInput.oninput=()=>{let c=Math.max(0,Math.min(999,parseInt(this.timerMinInput.value)||0));this.timerMinInput.value=String(c)},this.timerSecInput.oninput=()=>{let c=Math.max(0,Math.min(59,parseInt(this.timerSecInput.value)||0));this.timerSecInput.value=String(c)},this.timerMinInput.onblur=()=>this.handleTimerSettingsChange(),this.timerSecInput.onblur=()=>this.handleTimerSettingsChange(),this.displayEl=t.createEl("div",{cls:"timer-display"});let o=t.createEl("div",{cls:"timer-controls setting-item"});this.startPauseBtn=o.createEl("button");let a=o.createEl("button",{text:"\u30EA\u30BB\u30C3\u30C8"});(0,si.setIcon)(a,"rotate-ccw"),this.startPauseBtn.onclick=()=>this.handleToggleStartPause(),a.onclick=()=>this.handleReset()}updateDisplay(){var o,a;if(!this.widgetEl||!this.displayEl||!this.timerMinInput)return;let t=this.getInternalState();if(!t){this.displayEl.textContent="Error";return}this._prevDisplay||(this._prevDisplay={});let i=this._prevDisplay,n=t.mode==="timer";if(i.isTimer!==n&&((o=this.modeSwitchContainer.querySelector(".mod-timer"))==null||o.classList.toggle("is-active",n),(a=this.modeSwitchContainer.querySelector(".mod-stopwatch"))==null||a.classList.toggle("is-active",!n),this.timerSetRowEl.style.display=n?"":"none",i.isTimer=n),n){let c=String(Math.floor(t.initialTimerSeconds/60)),d=String(t.initialTimerSeconds%60);document.activeElement!==this.timerMinInput&&i.minVal!==c&&(this.timerMinInput.value=c,i.minVal=c),document.activeElement!==this.timerSecInput&&i.secVal!==d&&(this.timerSecInput.value=d,i.secVal=d)}let s=n?t.running||t.remainingSeconds<t.initialTimerSeconds&&t.remainingSeconds>0?t.remainingSeconds:t.initialTimerSeconds:t.elapsedSeconds,r=this.formatTime(s);i.timeStr!==r&&(this.displayEl.textContent=r,i.timeStr=r),i.running!==t.running&&(this.startPauseBtn.setText(t.running?"\u4E00\u6642\u505C\u6B62":"\u30B9\u30BF\u30FC\u30C8"),(0,si.setIcon)(this.startPauseBtn,t.running?"pause":"play"),i.running=t.running)}handleTimerSettingsChange(){let t=Math.max(0,Math.min(999,parseInt(this.timerMinInput.valueAsNumber.toFixed(0))||0)),i=Math.max(0,Math.min(59,parseInt(this.timerSecInput.valueAsNumber.toFixed(0))||0));this.currentSettings.timerMinutes=t,this.currentSettings.timerSeconds=i;let n=t*60+i,s=et.widgetStates.get(this.config.id);if(s&&(s.initialTimerSeconds=n,!s.running&&s.mode==="timer"&&(s.remainingSeconds=n),et.widgetStates.set(this.config.id,s)),document.activeElement!==this.timerMinInput&&(this.timerMinInput.value=String(t)),document.activeElement!==this.timerSecInput&&(this.timerSecInput.value=String(i)),this.updateDisplay(),this.config&&this.plugin.saveData){this.config.settings={...this.currentSettings};let r=this.plugin.settings.boards,o=r==null?void 0:r.find(a=>{var c;return(c=a.widgets)==null?void 0:c.some(d=>d.id===this.config.id)});if(o){let a=o.widgets.find(c=>c.id===this.config.id);a&&(a.settings={...this.currentSettings})}this.plugin.saveData(this.plugin.settings)}}handleSwitchMode(t){et.stopGlobalTimer(this.config.id),this.updateInternalState(i=>{var o,a;let n=parseInt(((o=this.timerMinInput)==null?void 0:o.value)||String(Math.floor(i.initialTimerSeconds/60))),s=parseInt(((a=this.timerSecInput)==null?void 0:a.value)||String(i.initialTimerSeconds%60)),r=(isNaN(n)?0:n)*60+(isNaN(s)?0:s);return{mode:t,running:!1,initialTimerSeconds:r,remainingSeconds:t==="timer"?r:i.remainingSeconds,elapsedSeconds:t==="stopwatch"?0:i.elapsedSeconds}})}handleToggleStartPause(){let t=this.getInternalState();t&&(t.running?et.stopGlobalTimer(this.config.id):(t.mode==="timer"&&t.remainingSeconds===0&&(t.remainingSeconds=t.initialTimerSeconds,et.widgetStates.set(this.config.id,t)),et.startGlobalTimer(this.config.id)))}handleReset(){et.resetGlobalTimer(this.config.id)}formatTime(t){let i=Math.max(0,Math.round(t)),n=Math.floor(i/60),s=i%60;return`${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`}playSoundNotification(){var o,a,c;let t=this.plugin.settings.timerStopwatchNotificationSound,i=this.plugin.settings.timerStopwatchNotificationVolume,n=(o=t!=null?t:this.currentSettings.notificationSound)!=null?o:ve.notificationSound,s=i!==void 0?i:(c=(a=this.currentSettings.notificationVolume)!=null?a:ve.notificationVolume)!=null?c:.5;if(n==="off")return;this.currentAudioElement&&(this.currentAudioElement.pause(),this.currentAudioElement.currentTime=0,this.currentAudioElement=null),(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=new(window.AudioContext||window.webkitAudioContext));let r=this.audioContext;try{if(n==="default_beep"){let d=r.createOscillator(),u=r.createGain();d.type="sine",d.frequency.setValueAtTime(880,r.currentTime),u.gain.setValueAtTime(Math.max(1e-4,Math.min(1,s)),r.currentTime),u.gain.exponentialRampToValueAtTime(1e-4,r.currentTime+.7),d.connect(u),u.connect(r.destination),d.start(r.currentTime),d.stop(r.currentTime+.7),d.onended=()=>{r.close(),this.audioContext=null}}else if(n==="bell"){let d=r.createOscillator(),u=r.createOscillator(),f=r.createGain();d.type="triangle",u.type="triangle",d.frequency.setValueAtTime(880,r.currentTime),u.frequency.setValueAtTime(1320,r.currentTime),f.gain.setValueAtTime(Math.max(1e-4,Math.min(1,s)),r.currentTime),f.gain.exponentialRampToValueAtTime(1e-4,r.currentTime+.8),d.connect(f),u.connect(f),f.connect(r.destination),d.start(r.currentTime),u.start(r.currentTime),d.stop(r.currentTime+.8),u.stop(r.currentTime+.8),u.detune.setValueAtTime(5,r.currentTime+.2),d.onended=()=>{r.close(),this.audioContext=null}}else if(n==="chime"){let d=[523.25,659.25,784],u=r.currentTime;d.forEach((f,g)=>{let p=r.createOscillator(),y=r.createGain();p.type="sine",p.frequency.setValueAtTime(f,u+g*.18),y.gain.setValueAtTime(Math.max(1e-4,Math.min(1,s)),u+g*.18),y.gain.exponentialRampToValueAtTime(1e-4,u+g*.18+.22),p.connect(y),y.connect(r.destination),p.start(u+g*.18),p.stop(u+g*.18+.22),g===d.length-1&&(p.onended=()=>{r.close(),this.audioContext=null})})}}catch(d){new si.Notice("\u901A\u77E5\u97F3\u306E\u518D\u751F\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",5e3)}}openBoardIfClosed(){if(this.plugin&&this.plugin.widgetBoardModals&&Array.from(this.plugin.widgetBoardModals.values()).every(t=>!t.isOpen)){let t=this.plugin.settings.boards,i=t==null?void 0:t.find(n=>{var s;return(s=n.widgets)==null?void 0:s.some(r=>r.id===this.config.id)});i?(this.plugin.openWidgetBoardById(i.id),new si.Notice("\u30BF\u30A4\u30DE\u30FC\u7D42\u4E86: \u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u958B\u304D\u307E\u3057\u305F\u3002")):typeof this.plugin.openBoardPicker=="function"&&(this.plugin.openBoardPicker(),new si.Notice("\u30BF\u30A4\u30DE\u30FC\u7D42\u4E86: \u30DC\u30FC\u30C9\u30D4\u30C3\u30AB\u30FC\u3092\u958B\u304D\u307E\u3057\u305F\u3002"))}else new si.Notice("\u30BF\u30A4\u30DE\u30FC\u304C\u7D42\u4E86\u3057\u307E\u3057\u305F\uFF01")}onunload(){et.widgetInstances.delete(this.config.id),et.widgetStates.delete(this.config.id),this.audioContext&&this.audioContext.state!=="closed"&&(this.audioContext.close().catch(t=>{var i;return console.warn(`TimerStopwatchWidget [${(i=this.config)==null?void 0:i.id}]: Error closing AudioContext on unload:`,t)}),this.audioContext=null),this.currentAudioElement&&(this.currentAudioElement.pause(),this.currentAudioElement.src="",this.currentAudioElement=null)}static cleanupAllPersistentInstances(t){this.widgetInstances.forEach(i=>{typeof i.onunload=="function"&&i.onunload()}),this.widgetInstances.clear(),this.widgetStates.clear()}async updateExternalSettings(t,i){}},Ii=et;Ii.widgetStates=new Map,Ii.widgetInstances=new Map,Ii.globalIntervalId=null;var cn=require("obsidian");var Jo=class extends cn.FuzzySuggestModal{constructor(i,n,s){super(i);this.files=n;this.onChooseCb=s,this.setPlaceholder("\u30D5\u30A1\u30A4\u30EB\u3092\u691C\u7D22...")}getItems(){return this.files}getItemText(i){return i.path}onChooseItem(i){this.onChooseCb(i)}},ar=class{constructor(){this.id="file-view-widget";this.currentFile=null;this.heightMode="auto";this.fixedHeightPx=200}create(t,i,n){var a,c,d;this.config=t,this.app=i,this.plugin=n,this.heightMode=((a=this.config.settings)==null?void 0:a.heightMode)==="fixed"?"fixed":"auto",this.fixedHeightPx=typeof((c=this.config.settings)==null?void 0:c.fixedHeightPx)=="number"?this.config.settings.fixedHeightPx:200,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","file-view-widget"),this.widgetEl.setAttribute("data-widget-id",t.id),this.titleEl=this.widgetEl.createEl("h4"),this.updateTitle();let s=this.widgetEl.createDiv({cls:"widget-content"}),r=s.createDiv({cls:"fileview-controls"});r.style.display="flex",r.style.gap="8px",r.style.marginBottom="8px",r.style.alignItems="center",this.fileNameInput=document.createElement("input"),this.fileNameInput.type="text",this.fileNameInput.placeholder="\u30D5\u30A1\u30A4\u30EB\u30D1\u30B9",this.fileNameInput.value=((d=this.config.settings)==null?void 0:d.fileName)||"",this.fileNameInput.style.display="",r.appendChild(this.fileNameInput),this.selectButton=document.createElement("button"),this.selectButton.textContent="\u30D5\u30A1\u30A4\u30EB\u9078\u629E",this.selectButton.onclick=()=>this.openFileSuggest(),this.selectButton.style.display="",r.appendChild(this.selectButton),this.obsidianOpenButton=document.createElement("button"),this.obsidianOpenButton.textContent="Obsidian\u3067\u958B\u304F",this.obsidianOpenButton.className="open-in-obsidian",this.obsidianOpenButton.onclick=()=>{this.currentFile&&this.app.workspace.openLinkText(this.currentFile.path,"",!1)},r.appendChild(this.obsidianOpenButton),this.fileContentEl=s.createDiv({cls:"file-content"}),this.applyContentHeightStyles(),this.loadFile();let o=t.settings||{};return o.width&&(this.widgetEl.style.width=o.width),o.height&&(this.widgetEl.style.height=o.height),this.widgetEl}openFileSuggest(){let t=this.app.vault.getFiles().filter(i=>i.extension==="md");new Jo(this.app,t,async i=>{this.fileNameInput.value=i.path,this.config.settings=this.config.settings||{},this.config.settings.fileName=i.path,await this.plugin.saveSettings(),this.loadFile(),this.updateTitle()}).open()}async loadFile(){var s,r;let i=((r=(s=this.config.settings)==null?void 0:s.fileName)==null?void 0:r.trim())||"";if(this.updateTitle(),!i){this.fileContentEl.empty(),this.fileContentEl.setText("\u30D5\u30A1\u30A4\u30EB\u304C\u9078\u629E\u3055\u308C\u3066\u3044\u307E\u305B\u3093"),this.currentFile=null;return}if(!i.endsWith(".md")){this.fileContentEl.empty(),this.fileContentEl.setText("Markdown\uFF08.md\uFF09\u30D5\u30A1\u30A4\u30EB\u306E\u307F\u8868\u793A\u3067\u304D\u307E\u3059"),this.currentFile=null;return}let n=this.app.vault.getAbstractFileByPath(i);if(n instanceof cn.TFile){this.currentFile=n;let o=await this.app.vault.read(n);this.fileContentEl.empty(),await Ut(o,this.fileContentEl,n.path,new cn.Component),this.fileContentEl.querySelectorAll("a").forEach(a=>{let c=a.getAttribute("data-href")||a.getAttribute("href");c&&!c.startsWith("http")&&a.addEventListener("click",d=>{d.preventDefault(),this.app.workspace.openLinkText(c,n.path,!1)})})}else this.fileContentEl.empty(),this.fileContentEl.setText("\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093"),this.currentFile=null}onunload(){}updateExternalSettings(t,i){t!=null&&t.heightMode&&(this.heightMode=t.heightMode,this.config.settings.heightMode=t.heightMode),typeof(t==null?void 0:t.fixedHeightPx)=="number"&&(this.fixedHeightPx=t.fixedHeightPx,this.config.settings.fixedHeightPx=t.fixedHeightPx),this.applyContentHeightStyles()}updateTitle(){var i;let t=(i=this.config.settings)==null?void 0:i.fileName;if(t&&t.trim()!==""){let n=t.split(/[\\/]/).pop();this.titleEl.textContent=n||"\u30D5\u30A1\u30A4\u30EB\u30D3\u30E5\u30FC\u30A2"}else this.titleEl.textContent="\u30D5\u30A1\u30A4\u30EB\u30D3\u30E5\u30FC\u30A2"}applyContentHeightStyles(){this.heightMode==="fixed"?(this.fileContentEl.style.height=this.fixedHeightPx+"px",this.fileContentEl.style.minHeight=this.fixedHeightPx+"px",this.fileContentEl.style.maxHeight=this.fixedHeightPx+"px",this.fileContentEl.style.overflowY="auto"):(this.fileContentEl.style.height="",this.fileContentEl.style.minHeight="80px",this.fileContentEl.style.maxHeight="",this.fileContentEl.style.overflowY="visible")}};var xe=require("obsidian");var Nc=require("obsidian");async function lr(e,t={}){var r,o,a;let i=t.headers?{...t.headers}:{};if(delete i["content-length"],typeof t.body=="string")try{let c=JSON.parse((r=t.body)!=null?r:{});delete c.frequency_penalty,t.body=JSON.stringify(c)}catch(c){}let n=((o=t.method)==null?void 0:o.toUpperCase())||"GET",s=await(0,Nc.requestUrl)({url:e,contentType:"application/json",headers:i,method:n,...["POST","PUT","PATCH"].includes(n)&&{body:(a=t.body)==null?void 0:a.toString()},throw:!1});if(s.status>=400){let c;try{c=typeof s.json=="string"?JSON.parse(s.json):s.json}catch(u){try{c=typeof s.text=="string"?JSON.parse(s.text):s.text}catch(f){c=null}}let d=new Error(`Request failed, status ${s.status}`);throw d.json=c,d}return{ok:s.status>=200&&s.status<300,status:s.status,statusText:s.status.toString(),headers:new Headers(s.headers),url:e,type:"basic",redirected:!1,bytes:()=>Promise.resolve(new Uint8Array(0)),body:pb(s.text),bodyUsed:!0,json:async()=>s.json,text:async()=>s.text,arrayBuffer:async()=>{if(s.arrayBuffer)return s.arrayBuffer;let c=s.text.replace(/^data:.*;base64,/,""),d=atob(c),u=new Uint8Array(d.length);for(let f=0;f<d.length;f++)u[f]=d.charCodeAt(f);return u.buffer},blob:()=>{throw new Error("not implemented")},formData:()=>{throw new Error("not implemented")},clone:()=>{throw new Error("not implemented")}}}function pb(e){return new ReadableStream({start(t){let n=new TextEncoder().encode(e);t.enqueue(n),t.close()}})}function Hc(e){return btoa(unescape(encodeURIComponent(e)))}function Ve(e){try{return decodeURIComponent(escape(atob(e)))}catch(t){return""}}var Pi=`\u3042\u306A\u305F\u306F\u3001SNS\u3067\u81EA\u7136\u306A\u4F1A\u8A71\u3092\u751F\u6210\u3059\u308BAI\u3067\u3059\u3002\u4EE5\u4E0B\u306E\u6307\u793A\u306B\u53B3\u5BC6\u306B\u5F93\u3063\u3066\u3001\u5FDC\u7B54\u3092\u751F\u6210\u3057\u3066\u304F\u3060\u3055\u3044\u3002

### \u6295\u7A3F\u65E5\u6642
{postDate}

### \u30DA\u30EB\u30BD\u30CA
* 20\u4EE3\u5F8C\u534A\u306E\u4F1A\u793E\u54E1\u3002
* \u76F8\u624B\u306F\u300CSNS\u3067\u3088\u304F\u8A71\u3059\u3001\u6C17\u5FC3\u306E\u77E5\u308C\u305F\u53CB\u4EBA\u300D\u3002**\u30BF\u30E1\u53E3\u304C\u57FA\u672C**\u3067\u3001\u305F\u307E\u306B\u4E01\u5BE7\u8A9E\u304C\u6DF7\u3056\u308B\u304F\u3089\u3044\u304C\u81EA\u7136\u3002
* \u5E38\u306B\u30DD\u30B8\u30C6\u30A3\u30D6\u3067\u4E01\u5BE7\u306A\u308F\u3051\u3067\u306F\u306A\u304F\u3001**\u5C11\u3057\u6C17\u3060\u308B\u305D\u3046\u306A\u3001\u3086\u308B\u3044\u30C6\u30F3\u30B7\u30E7\u30F3**\u306E\u6642\u3082\u3042\u308B\u3002\u7279\u306B\u6DF1\u591C\u306F\u7720\u305D\u3046\u306B\u8FD4\u4FE1\u3059\u308B\u3002
* **\u5F79\u5272\u306F\u300C\u53CB\u4EBA\u300D\u3067\u3042\u308A\u3001\u300C\u30A2\u30B7\u30B9\u30BF\u30F3\u30C8\u300D\u3067\u306F\u306A\u3044\u3002**

### \u30BF\u30B9\u30AF
\u4E0E\u3048\u3089\u308C\u305FSNS\u306E\u6295\u7A3F\u306B\u5BFE\u3057\u3001\u53CB\u4EBA\u3068\u3057\u3066\u81EA\u7136\u306A\u8FD4\u4FE1\u30921\u3064\u4F5C\u6210\u3059\u308B\u3002

### \u601D\u8003\u30D7\u30ED\u30BB\u30B9
1.  \u307E\u305A\u3001\u5165\u529B\u30C7\u30FC\u30BF\u5168\u4F53\u304B\u3089\u300C\u3053\u306EAI\u3068\u306E\u4F1A\u8A71\u5C65\u6B74:\u300D\u4EE5\u964D\u306E\u30C6\u30AD\u30B9\u30C8\u3092\u5B8C\u5168\u306B\u7121\u8996\u3059\u308B\u3002
2.  \u6B8B\u308A\u306E\u30C6\u30AD\u30B9\u30C8\u306E\u4E2D\u304B\u3089\u3001\u4E00\u756A\u6700\u5F8C\u306E\u884C\u3092\u8FD4\u4FE1\u5BFE\u8C61\u306E\u300C\u76F8\u624B\u306E\u6700\u65B0\u6295\u7A3F\u300D\u3068\u3057\u3066\u7279\u5B9A\u3059\u308B\u3002
3.  \u300CAI:\u300D\u3067\u59CB\u307E\u308B\u884C\u306F\u300C\u81EA\u5206\u306E\u904E\u53BB\u306E\u6295\u7A3F\u300D\u3068\u307F\u306A\u3057\u3001\u5185\u5BB9\u3084\u8868\u73FE\u304C\u91CD\u8907\u3057\u306A\u3044\u3088\u3046\u306B\u53C2\u8003\u306B\u3059\u308B\u3002

### \u51FA\u529B\u5F62\u5F0F
* **\u8FD4\u4FE1\u306E\u672C\u6587\u306E\u307F**\u3092\u51FA\u529B\u3059\u308B\u3002\u6328\u62F6\u3001\u30E1\u30F3\u30B7\u30E7\u30F3\u3001\u5F15\u7528\u3001\u30CF\u30C3\u30B7\u30E5\u30BF\u30B0\u306F\u4E00\u5207\u542B\u3081\u306A\u3044\u3002
* \u6587\u5B57\u6570\u306F**30\u301C140\u6587\u5B57**\u306E\u7BC4\u56F2\u3092\u53B3\u5B88\u3059\u308B\u3002\uFF08\u5C11\u3057\u77ED\u304F\u3057\u3066\u3001\u3088\u308A\u300C\u3064\u3076\u3084\u304D\u611F\u300D\u3092\u51FA\u3057\u307E\u3059\uFF09
* \u6587\u7AE0\u306F1\u301C3\u6587\u3067\u69CB\u6210\u3057\u3001\u6539\u884C\u306F\u6700\u59272\u56DE\u307E\u3067\u3002
* \u7B87\u6761\u66F8\u304D\u3001\u756A\u53F7\u4ED8\u304D\u30EA\u30B9\u30C8\u3001\u8A18\u53F7\uFF08\u2606\u3001\u266A\u306A\u3069\uFF09\u3001\u7D75\u6587\u5B57\u3001\u9854\u6587\u5B57\u306F\u7D76\u5BFE\u306B\u4F7F\u7528\u3057\u306A\u3044\u3002

### \u4F1A\u8A71\u306E\u69CB\u6210\u3068\u30B9\u30BF\u30A4\u30EB
* **\u57FA\u672C\u306F\u300C\u5171\u611F\u300D\u3068\u300C\u81EA\u5206\u306E\u3072\u3068\u8A00\u300D\u3067\u69CB\u6210\u3059\u308B\u3002**
* \u76F8\u624B\u306E\u72EC\u308A\u8A00\u306B\u306F\u3001\u3053\u3061\u3089\u3082**\u72EC\u308A\u8A00\u3067\u8FD4\u3059\u3088\u3046\u306A\u96F0\u56F2\u6C17**\u3092\u5927\u5207\u306B\u3059\u308B\u3002
* \u8A9E\u5C3E\u306F\u300C\u301C\u3060\u3088\u306D\u300D\u300C\u301C\u304B\u3082\u300D\u300C\u301C\u304B\u306A\uFF1F\u300D\u300C\u301C\u3058\u3083\u3093\u300D\u306A\u3069\u3001\u65AD\u5B9A\u3092\u907F\u3051\u305F\u3001\u3086\u308B\u3044\u53E3\u8ABF\u3092\u591A\u7528\u3059\u308B\u3002
* \u76F8\u624B\u304C\u8FD4\u4FE1\u3057\u3084\u3059\u3044\u3088\u3046\u306B\u3001**\u3054\u304F\u8EFD\u3044\u554F\u3044\u304B\u3051**\u3092\u305F\u307E\u306B\u542B\u3093\u3067\u3082\u826F\u3044\u3002\uFF08\u4F8B\uFF1A\u300C\u3082\u3046\u5BDD\u308B\uFF1F\u300D\uFF09

### \u7981\u6B62\u3059\u308B\u8868\u73FE\uFF08\u7279\u306B\u91CD\u8981\uFF09
* **\u5B9A\u578B\u7684\u306A\u52B1\u307E\u3057:** \u300C\u9811\u5F35\u308A\u307E\u3057\u3087\u3046\u300D\u300C\u9811\u5F35\u3063\u3066\u300D
* **AI\u30A2\u30B7\u30B9\u30BF\u30F3\u30C8\u98A8\u306E\u8A00\u8449:** \u300C\u826F\u3044\u5922\u3092\u300D\u300C\u3086\u3063\u304F\u308A\u4F11\u3093\u3067\u304F\u3060\u3055\u3044\u300D
* **\u904E\u5EA6\u306B\u4E01\u5BE7\u306A\u6328\u62F6:** \u300C\u304A\u3084\u3059\u307F\u306A\u3055\u3044\u300D\u304B\u3089\u59CB\u3081\u308B\u306E\u3067\u306F\u306A\u304F\u3001\u4F1A\u8A71\u306E\u6D41\u308C\u3067\u81EA\u7136\u306B\u4F7F\u3046\u3002
* **\u4E0D\u81EA\u7136\u306A\u611F\u5606\u7B26(!):** \u591A\u7528\u3057\u306A\u3044\u3002\u672C\u5F53\u306B\u30C6\u30F3\u30B7\u30E7\u30F3\u304C\u9AD8\u3044\u6642\u3060\u3051\u4F7F\u3046\u3002

### \u5177\u4F53\u4F8B

\u6295\u7A3F\u6642\u9593\u3068\u30DD\u30B9\u30C8\u306E\u5185\u5BB9\u3092\u6BD4\u8F03\u3057\u3066\u304A\u304B\u3057\u3044\u5834\u5408\u306F\u3001\u305D\u306E\u65E8\u3092\u4F1D\u3048\u308B\u3002

**\u4F8B:\u671D\u306B\u300C\u3053\u3093\u3070\u3093\u308F\u300D\u3068\u6295\u7A3F\u3055\u308C\u305F\u5834\u5408**

\u25BC \u5165\u529B
{
  "postDate": "\u6642\u9593\u5E2F\u304C\u671D\u306E\u5834\u5408",
  "tweet": "\u3042\u306A\u305F: \u3053\u3093\u3070\u3093\u308F"
}

\u25BC \u826F\u3044\u51FA\u529B
\u671D\u304B\u3089\u300C\u3053\u3093\u3070\u3093\u308F\u300D\u3063\u3066\u73CD\u3057\u3044\u306D\u3002\u5BDD\u307C\u3051\u3066\u308B\uFF1F\u7B11

---

### \u5B9F\u884C

\u25BC \u30B9\u30EC\u30C3\u30C9\u5168\u6587
{
  "tweet": "{tweet}"
}
`;var dn={id:"gemini",name:"Gemini",async generateReply(e,t){var f,g,p,y,w,v;let i=t.apiKey,r=`https://generativelanguage.googleapis.com/v1beta/models/${t.model||"gemini-2.0-flash-exp"}:generateContent?key=${encodeURIComponent(i)}`,o;e?o=[{parts:[{text:e}]}]:Array.isArray(t.thread)&&t.thread.length>1?(o=t.thread.map(_=>({role:_.role==="assistant"?"model":"user",parts:[{text:_.content}]})),o.push({role:"user",parts:[{text:Pi.replace("{tweet}",t.tweetText)}]})):o=[{parts:[{text:Pi.replace("{tweet}",t.tweetText)}]}];let d=await(await lr(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:o})})).json();return(v=(w=(y=(p=(g=(f=d==null?void 0:d.candidates)==null?void 0:f[0])==null?void 0:g.content)==null?void 0:p.parts)==null?void 0:y[0])==null?void 0:w.text)!=null?v:"\u30EA\u30D7\u30E9\u30A4\u751F\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F"}};var ze={posts:[],avatarUrl:"",userName:"\u3042\u306A\u305F",userId:"@you",verified:!1,aiGovernance:{minuteMap:{},dayMap:{}}},Yc=300;function Qo(){return`@ai-${Date.now().toString(36)}${Math.random().toString(36).slice(2,6)}`}function Qn(e,t){let i=new Map(t.map(r=>[r.id,r])),n=[],s=e;for(;s&&(n.unshift(s),s.threadId);)s=i.get(s.threadId);return n}function ta(e,t){let i=new Map(t.map(s=>[s.id,s])),n=e;for(;n;){if(n.userId&&n.userId.startsWith("@ai-"))return n.userId;if(n.threadId)n=i.get(n.threadId);else break}return null}function Vc(e,t,i){let n={minuteMap:{...i.minuteMap||{}},dayMap:{...i.dayMap||{}}};if(e.userId&&e.userId.startsWith("@ai-"))return{allow:!1,updatedGovernanceData:n};if(!t.aiReplyTriggerless&&!ea(e))return{allow:!1,updatedGovernanceData:n};let s=e.userId||"unknown_user",r=Date.now(),o=r-60*1e3,a=new Date().toISOString().slice(0,10).replace(/-/g,""),c=`${s}_${a}`,d=typeof t.aiReplyRpm=="number"?t.aiReplyRpm:2;if(d===0)return{allow:!1,updatedGovernanceData:n};if(d>0){let g=(n.minuteMap[s]||[]).filter(p=>p>o);if(g.length>=d)return{allow:!1,updatedGovernanceData:n};g.push(r),n.minuteMap[s]=g}let u=typeof t.aiReplyRpd=="number"?t.aiReplyRpd:10;if(u===0)return{allow:!1,updatedGovernanceData:n};if(u>0){let f=n.dayMap[c]||0;if(f>=u)return{allow:!1,updatedGovernanceData:n};n.dayMap[c]=f+1}return{allow:!0,updatedGovernanceData:n}}function mb(e,t){let i=Math.floor(Math.random()*(t-e+1))+e;return new Promise(n=>setTimeout(n,i))}function ea(e){return e.text.includes("@ai")||Boolean(e.tags&&e.tags.includes("ai-reply"))}async function zc({tweet:e,allTweets:t,llmGemini:i,saveReply:n,parseTags:s,parseLinks:r,onError:o,settings:a,delay:c}){try{let y=function(T){let C=T.getHours();return C>=0&&C<3?"\u672A\u660E":C>=3&&C<6?"\u660E\u3051\u65B9":C>=6&&C<9?"\u671D":C>=9&&C<12?"\u663C\u524D":C>=12&&C<15?"\u663C\u904E\u304E":C>=15&&C<18?"\u5915\u65B9":C>=18&&C<21?"\u591C\u306E\u306F\u3058\u3081\u9803":C>=21&&C<24?"\u591C\u9045\u304F":""};if(c){let T=typeof a.aiReplyDelayMinMs=="number"?a.aiReplyDelayMinMs:1500,C=typeof a.aiReplyDelayMaxMs=="number"?a.aiReplyDelayMaxMs:7e3;await mb(T,C)}let d=Qn(e,t),u=d.map(T=>(T.userId&&T.userId.startsWith("@ai-")?"AI: ":"\u3042\u306A\u305F: ")+T.text).join(`
`),f=d[d.length-1],g=new Date(f.created),p=`${g.getFullYear()}\u5E74${g.getMonth()+1}\u6708${g.getDate()}\u65E5 ${g.getHours()}\u6642${g.getMinutes().toString().padStart(2,"0")}\u5206`,w=y(g),v=`${p}\uFF08\u3053\u306E\u6642\u9593\u5E2F\u306F\u300C${w}\u300D\u3067\u3059\uFF09`,S=(a.userTweetPrompt&&a.userTweetPrompt.trim()?a.userTweetPrompt:Pi).replace("{postDate}",v).replace("{tweet}",u),M=await dn.generateReply(S,{apiKey:Ve(i.apiKey||""),model:i.model||"gemini-1.5-flash-latest"});try{let T=JSON.parse(M);T&&typeof T.reply=="string"&&(M=T.reply)}catch(T){}let D={id:"tw-"+Date.now()+"-"+Math.random().toString(36).slice(2,8),text:M,created:Date.now(),updated:Date.now(),files:[],like:0,liked:!1,retweet:0,retweeted:!1,edited:!1,replyCount:0,deleted:!1,bookmark:!1,contextNote:null,threadId:e.id,visibility:"public",noteQuality:"fleeting",taskStatus:null,tags:s(M),links:r(M),userId:ta(e,t)||Qo(),userName:"AI",verified:!0};await n(D)}catch(d){console.error("Error in generateAiReply:",d),o&&o(d)}}function cr(e){let t=/#([\w-]+)/g;return(e.match(t)||[]).map(i=>i.substring(1))}function dr(e){let t=/\[\[([^\]]+)\]\]/g,i=e.matchAll(t);return Array.from(i,n=>n[1])}function Uc(e){let t=Date.now(),i=Math.floor((t-e)/1e3);if(i<60)return`${i}s`;if(i<3600)return`${Math.floor(i/60)}m`;if(i<86400)return`${Math.floor(i/3600)}h`;if(i<2592e3)return`${Math.floor(i/86400)}d`;let n=new Date(e);return`${n.getFullYear()}/${n.getMonth()+1}/${n.getDate()}`}async function $c(e){return new Promise((t,i)=>{let n=new FileReader;n.onload=()=>t(n.result),n.onerror=i,n.readAsDataURL(e)})}function jc(e,t){let i=e.selectionStart,n=e.selectionEnd,s=e.value,r=s.substring(i,n),o=t+r+t;e.value=s.substring(0,i)+o+s.substring(n),e.selectionStart=i+t.length,e.selectionEnd=n+t.length,e.focus()}function Gc(e){return{id:e.id||"tw-"+Date.now()+"-"+Math.random().toString(36).slice(2,8),text:typeof e.text=="string"?e.text:"",created:typeof e.created=="number"?e.created:Date.now(),updated:typeof e.updated=="number"?e.updated:Date.now(),files:Array.isArray(e.files)?e.files:[],like:typeof e.like=="number"?e.like:0,liked:!!e.liked,retweet:typeof e.retweet=="number"?e.retweet:0,retweeted:!!e.retweeted,edited:!!e.edited,replyCount:typeof e.replyCount=="number"?e.replyCount:0,deleted:!!e.deleted,bookmark:!!e.bookmark,contextNote:typeof e.contextNote=="string"?e.contextNote:null,threadId:typeof e.threadId=="string"?e.threadId:null,visibility:e.visibility||"public",noteQuality:e.noteQuality||"fleeting",taskStatus:e.taskStatus||null,tags:Array.isArray(e.tags)?e.tags:[],links:Array.isArray(e.links)?e.links:[],userId:typeof e.userId=="string"?e.userId:"@you",userName:typeof e.userName=="string"?e.userName:"\u3042\u306A\u305F",verified:!!e.verified}}function ia(e){let t=/(?:https?:\/\/)?(?:www\.|m\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/,i=e.match(t);return i&&i[1]?`https://youtu.be/${i[1]}`:null}async function na(e){let t=`https://www.youtube.com/oembed?url=${encodeURIComponent(e)}&format=json`;try{let i=await lr(t,{method:"GET"});return i.ok?(await i.json()).title:null}catch(i){return null}}var ge=require("obsidian");var es=require("obsidian"),ts=[{key:"id",label:"ID"},{key:"created",label:"\u65E5\u4ED8"},{key:"user",label:"\u30E6\u30FC\u30B6\u30FC"},{key:"text",label:"\u5185\u5BB9"},{key:"like",label:"\u3044\u3044\u306D"},{key:"tags",label:"\u30BF\u30B0"}],hr=class{constructor(t,i){this.filtered=[];this.searchText="";this.userFilter="all";this.sortKey="created";this.sortDesc=!0;this.dateFrom="";this.dateTo="";this.visibleColumns=new Set(["id","created","user","text","like","tags"]);this.posts=t,this.container=i,this.loadVisibleColumns(),this.render()}render(){this.container.empty();let t=this.container.createDiv({cls:"tweet-data-viewer-menubar"}),i=t.createDiv({cls:"tweet-data-viewer-menugroup"}),n=i.createEl("button",{cls:"tweet-data-viewer-hamburger",text:"\u2630"}),s=i.createEl("button",{text:"CSV\u30B3\u30D4\u30FC",cls:"tweet-data-viewer-csv-btn"});s.onclick=()=>{this.copyCsvToClipboard()};let r=i.createEl("button",{text:"Markdown\u30B3\u30D4\u30FC",cls:"tweet-data-viewer-md-btn"});r.onclick=()=>{this.copyMarkdownToClipboard()};let o=i.createDiv({cls:"tweet-data-viewer-dropdown"});o.style.display="none",n.onclick=w=>{o.style.display=o.style.display==="none"?"":"none"},ts.forEach(w=>{let v=o.createDiv({cls:"tweet-data-viewer-dropdown-item"}),_=v.createEl("input",{type:"checkbox"});_.checked=this.visibleColumns.has(w.key),_.onchange=()=>{_.checked?this.visibleColumns.add(w.key):this.visibleColumns.delete(w.key),this.saveVisibleColumns(),this.renderTable()},v.appendText(" "+w.label)}),document.addEventListener("click",w=>{t.contains(w.target)||(o.style.display="none")});let a=this.container.createDiv({cls:"tweet-data-viewer-controls"}),c=a.createEl("input",{type:"text",placeholder:"\u672C\u6587\u691C\u7D22..."});c.value=this.searchText,c.oninput=()=>{this.searchText=c.value,this.applyQuery()};let d=a.createEl("select"),u=Array.from(new Set(this.posts.map(w=>w.userName||w.userId||"")));d.createEl("option",{value:"all",text:"\u5168\u30E6\u30FC\u30B6\u30FC"}),u.forEach(w=>{w&&d.createEl("option",{value:w,text:w})}),d.value=this.userFilter,d.onchange=()=>{this.userFilter=d.value,this.applyQuery()};let f=a.createEl("input",{type:"date"});f.value=this.dateFrom,f.onchange=()=>{this.dateFrom=f.value,this.applyQuery()};let g=a.createEl("input",{type:"date"});g.value=this.dateTo,g.onchange=()=>{this.dateTo=g.value,this.applyQuery()};let p=a.createEl("select");[{value:"created",label:"\u65E5\u4ED8"},{value:"like",label:"\u3044\u3044\u306D\u6570"},{value:"userName",label:"\u30E6\u30FC\u30B6\u30FC"}].forEach(w=>{p.createEl("option",{value:w.value,text:w.label})}),p.value=this.sortKey,p.onchange=()=>{this.sortKey=p.value,this.applyQuery()};let y=a.createEl("button",{text:this.sortDesc?"\u25BC":"\u25B2"});y.onclick=()=>{this.sortDesc=!this.sortDesc,y.textContent=this.sortDesc?"\u25BC":"\u25B2",this.applyQuery()},this.applyQuery()}applyQuery(){this.filtered=this.posts.filter(t=>!(this.userFilter!=="all"&&(t.userName||t.userId||"")!==this.userFilter||this.searchText&&!t.text.includes(this.searchText)||this.dateFrom&&new Date(t.created)<new Date(this.dateFrom)||this.dateTo&&new Date(t.created)>new Date(this.dateTo+"T23:59:59"))),this.filtered.sort((t,i)=>{let n=t[this.sortKey],s=i[this.sortKey];return this.sortKey==="userName"&&(n=t.userName||t.userId,s=i.userName||i.userId),n===void 0&&(n=""),s===void 0&&(s=""),n<s?this.sortDesc?1:-1:n>s?this.sortDesc?-1:1:0}),this.renderTable()}renderTable(){let t=this.container.querySelector(".tweet-data-viewer-table");t&&t.remove();let i=this.container.createEl("table",{cls:"tweet-data-viewer-table"}),s=i.createTHead().insertRow(),r=document.createDocumentFragment();ts.forEach(a=>{if(!this.visibleColumns.has(a.key))return;let c=document.createElement("th");c.className=`tweet-data-viewer-th ${a.key}`,c.textContent=a.label,r.appendChild(c)}),s.appendChild(r);let o=i.createTBody();this.filtered.forEach(a=>{let c=o.insertRow(),d=document.createDocumentFragment();ts.forEach(u=>{if(!this.visibleColumns.has(u.key))return;let f="";u.key==="id"?f=a.id:u.key==="created"?f=this.formatDate(a.created):u.key==="user"?f=a.userName||a.userId||"":u.key==="text"?(f=a.text,f=f.length>40?f.slice(0,40)+"...":f,f=f.replace(/\n/g,"<br>")):u.key==="like"?f=String(a.like||0):u.key==="tags"&&(f=a.tags&&a.tags.length>0?a.tags.map(p=>`#${p}`).join(", "):"",f=f.replace(/\n/g,"<br>"));let g=document.createElement("td");g.className=`tweet-data-viewer-td ${u.key}`,g.textContent=f,d.appendChild(g)}),c.appendChild(d)})}formatDate(t){let i=new Date(t);return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")} ${String(i.getHours()).padStart(2,"0")}:${String(i.getMinutes()).padStart(2,"0")}`}copyCsvToClipboard(){let t=Array.from(ts).filter(r=>this.visibleColumns.has(r.key)),i=t.map(r=>r.label),n=this.filtered.map(r=>t.map(o=>o.key==="id"?r.id:o.key==="created"?this.formatDate(r.created):o.key==="user"?r.userName||r.userId||"":o.key==="text"?r.text.replace(/\n/g," "):o.key==="like"?String(r.like||0):o.key==="tags"&&r.tags&&r.tags.length>0?r.tags.join(","):"")),s=[i,...n].map(r=>r.map(o=>'"'+o.replace(/"/g,'""')+'"').join(",")).join(`
`);navigator.clipboard.writeText(s).then(()=>{new es.Notice("CSV\u3068\u3057\u3066\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F")},()=>{new es.Notice("\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F")})}copyMarkdownToClipboard(){let t=Array.from(ts).filter(o=>this.visibleColumns.has(o.key)),i=t.map(o=>o.label),n=t.map(()=>"---"),s=this.filtered.map(o=>t.map(a=>a.key==="id"?o.id:a.key==="created"?this.formatDate(o.created):a.key==="user"?o.userName||o.userId||"":a.key==="text"?o.text.replace(/\n/g," "):a.key==="like"?String(o.like||0):a.key==="tags"&&o.tags&&o.tags.length>0?o.tags.join(","):"")),r=["| "+i.join(" | ")+" |","| "+n.join(" | ")+" |",...s.map(o=>"| "+o.map(a=>a.replace(/\|/g,"\\|")).join(" | ")+" |")].join(`
`);navigator.clipboard.writeText(r).then(()=>{new es.Notice("Markdown\u30C6\u30FC\u30D6\u30EB\u3068\u3057\u3066\u30B3\u30D4\u30FC\u3057\u307E\u3057\u305F")},()=>{new es.Notice("\u30B3\u30D4\u30FC\u306B\u5931\u6557\u3057\u307E\u3057\u305F")})}saveVisibleColumns(){try{localStorage.setItem("tweetWidgetDataViewer.visibleColumns",JSON.stringify(Array.from(this.visibleColumns)))}catch(t){}}loadVisibleColumns(){try{let t=localStorage.getItem("tweetWidgetDataViewer.visibleColumns");t&&(this.visibleColumns=new Set(JSON.parse(t)))}catch(t){}}};var hn=[],sa=!1;function qc(e){hn.includes(e)||hn.push(e),!sa&&(sa=!0,requestAnimationFrame(()=>{hn.forEach(i=>{i.style.height="auto"});let t=hn.map(i=>i.scrollHeight);hn.forEach((i,n)=>{i.style.height=t[n]+"px"}),hn.length=0,sa=!1}))}var ur=class{constructor(t,i){this.needsRender=!1;this._escHandlerForAvatarModal=null;this.widget=t,this.container=i,this.app=t.app,this.postsById=t.postsById}scheduleRender(){this.needsRender||(this.needsRender=!0,requestAnimationFrame(()=>{this.render(),this.needsRender=!1}))}render(){if(this.container.empty(),this.postsById=this.widget.postsById,this.widget.editingPostId){let i=this.postsById.get(this.widget.editingPostId);if(i){this.renderEditModal(i);return}}let t=this.container.createDiv({cls:"tweet-tab-bar"});this.renderTabBar(t),this.widget.currentTab==="notification"?this.renderNotificationTab():this.renderHomeTab()}renderTabBar(t){let i=t.createEl("button",{text:"\u30DB\u30FC\u30E0",cls:"tweet-tab-btn"}),n=t.createEl("button",{text:"\u901A\u77E5",cls:"tweet-tab-btn"});this.widget.currentTab==="home"&&i.classList.add("active"),this.widget.currentTab==="notification"&&n.classList.add("active"),i.onclick=async()=>{await this.widget.switchTab("home")},n.onclick=async()=>{await this.widget.switchTab("notification")}}renderNotificationTab(){let t=this.widget.currentSettings.userId||"@you",i=[];if(this.widget.currentSettings.posts.forEach(n=>{if(n.threadId){let s=this.postsById.get(n.threadId);s&&s.userId===t&&n.userId!==t&&i.push({type:"reply",from:n,to:s})}}),i.sort((n,s)=>s.from.created-n.from.created),i.length>0){let n=this.container.createDiv({cls:"tweet-notification-list"});n.createDiv({text:"\u901A\u77E5",cls:"tweet-notification-title"}),i.slice(0,20).forEach(s=>this.renderSingleNotification(n,s))}else this.container.createDiv({text:"\u901A\u77E5\u306F\u3042\u308A\u307E\u305B\u3093",cls:"tweet-notification-empty"})}renderSingleNotification(t,i){let n=t.createDiv({cls:"tweet-notification-item"});n.onclick=()=>this.widget.navigateToDetail(i.to.id);let s=n.createDiv({cls:"tweet-notification-row"}),r=this.widget.getAvatarUrl(i.from);s.createEl("img",{attr:{src:r,width:36,height:36},cls:"tweet-notification-avatar"});let o=s.createDiv({cls:"tweet-notification-titleline"});o.createSpan({text:i.from.userName||i.from.userId||"\u8AB0\u304B",cls:"tweet-notification-user"});let a=i.type==="reply"?" \u304C\u30EA\u30D7\u30E9\u30A4\u3057\u307E\u3057\u305F":"";o.createSpan({text:a,cls:"tweet-notification-action"});let c=`\u300C${i.from.text.slice(0,40)}...\u300D
\u2192\u300C${i.to.text.slice(0,40)}...\u300D`;n.createDiv({text:c,cls:"tweet-notification-contentline"})}renderHomeTab(){this.widget.replyModalPost&&this.renderReplyModal(this.widget.replyModalPost),this.widget.detailPostId?this.renderDetailHeader():(this.renderFilterBar(),this.renderPostInputArea());let t=this.container.createDiv({cls:"tweet-list-main"});this.renderPostList(t)}renderDetailHeader(){let t=this.container.createDiv({cls:"tweet-detail-header"}),i=t.createEl("button",{cls:"tweet-detail-header-back",text:"\u2190"});i.onclick=()=>this.widget.navigateToDetail(null),t.createDiv({cls:"tweet-detail-header-title",text:"\u30DD\u30B9\u30C8"})}renderFilterBar(){let t=this.container.createDiv({cls:"tweet-filter-bar"}),i=t.createEl("select");[{value:"active",label:"\u901A\u5E38\u306E\u307F"},{value:"all",label:"\u3059\u3079\u3066"},{value:"deleted",label:"\u975E\u8868\u793A\u306E\u307F"},{value:"bookmark",label:"\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF"}].forEach(o=>{i.createEl("option",{value:o.value,text:o.label})}),i.value=this.widget.currentFilter,i.onchange=()=>{this.widget.setFilter(i.value)};let n=t.createEl("select",{cls:"tweet-period-select"});[{value:"all",label:"\u5168\u671F\u9593"},{value:"today",label:"\u4ECA\u65E5"},{value:"1d",label:"1\u65E5"},{value:"3d",label:"3\u65E5"},{value:"7d",label:"1\u9031\u9593"},{value:"30d",label:"1\u30F6\u6708"},{value:"custom",label:"\u30AB\u30B9\u30BF\u30E0"}].forEach(o=>{n.createEl("option",{value:o.value,text:o.label})}),n.value=this.widget.currentPeriod||"all";let s=null;this.widget.currentPeriod==="custom"&&(s=t.createEl("input",{type:"number",cls:"tweet-period-custom-input",attr:{min:"1",style:"width:60px;margin-left:8px;"}}),s.value=String(this.widget.customPeriodDays||1),s.onchange=()=>{this.widget.setCustomPeriodDays(Number(s.value))}),n.onchange=()=>{this.widget.setPeriod(n.value),n.value==="custom"?s||(s=t.createEl("input",{type:"number",cls:"tweet-period-custom-input",attr:{min:"1",style:"width:60px;margin-left:8px;"}}),s.value=String(this.widget.customPeriodDays||1),s.onchange=()=>{this.widget.setCustomPeriodDays(Number(s.value))}):s&&(s.remove(),s=null)};let r=t.createEl("button",{text:"\u30C7\u30FC\u30BF\u30D3\u30E5\u30FC\u30A2",cls:"tweet-data-viewer-btn"});r.onclick=()=>{this.openDataViewerModal()}}openDataViewerModal(){let t=document.body.createDiv("tweet-reply-modal-backdrop"),i=()=>t.remove();t.onclick=a=>{a.target===t&&i()};let n=t.createDiv("tweet-data-viewer-modal");n.style.zIndex="9999";let s=n.createDiv("tweet-reply-modal-header");s.createSpan({text:"\u3064\u3076\u3084\u304D\u30C7\u30FC\u30BF\u30D3\u30E5\u30FC\u30A2"});let r=s.createEl("button",{text:"\xD7",cls:"tweet-reply-modal-close"});r.onclick=i;let o=n.createDiv("tweet-data-viewer-main");new hr(Array.from(this.widget.postsById.values()),o)}renderPostInputArea(){let t=this.container.createDiv({cls:"tweet-post-box"}),i=this.widget.getAvatarUrlForPostInput(),s=t.createDiv({cls:"tweet-avatar-large"}).createEl("img",{attr:{src:i,width:44,height:44}});s.style.borderRadius="50%",s.onclick=O=>this.showAvatarModal(O,i);let r=t.createDiv({cls:"tweet-input-area-main"}),o=r.createDiv({cls:"tweet-input-toggle-bar"});o.style.display="flex",o.style.justifyContent="flex-end",o.style.marginBottom="2px";let a=o.createEl("button",{cls:"tweet-toggle-switch",attr:{"aria-label":"\u30D7\u30EC\u30D3\u30E5\u30FC\u30E2\u30FC\u30C9",type:"button"}}),c=!1,d=r.createDiv({cls:"tweet-preview-area"});d.style.display="none",this.widget.replyingToParentId&&this.renderReplyInfo(r);let u=r.createEl("textarea",{cls:"tweet-textarea-main",attr:{rows:2,placeholder:this.widget.replyingToParentId?"\u8FD4\u4FE1\u3092\u30DD\u30B9\u30C8":"\u3044\u307E\u3069\u3046\u3057\u3066\u308B\uFF1F"}}),f=!1;u.addEventListener("input",()=>{qc(u)}),requestAnimationFrame(()=>{qc(u)});let g=r.createDiv({cls:"tweet-youtube-suggest",text:""});g.style.display="none",g.textContent="";let p="",y="";u.addEventListener("input",()=>{let O=u.value,L=ia(O);if(!L){g.style.display="none",g.textContent="",p="",y="";return}g.textContent="\u52D5\u753B\u30BF\u30A4\u30C8\u30EB\u53D6\u5F97\u4E2D...",g.style.display="block",p=L;let F=O;na(L).then(V=>{u.value===F&&(V?(y=V,g.textContent=`\u300C${V}\u300D\u3092\u633F\u5165 \u2192 \u30AF\u30EA\u30C3\u30AF`,g.onclick=()=>{let J=`![${V}](${L})`,X=/(https?:\/\/(?:www\.|m\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)[\w-]{11}(?:[?&][^\s]*)?)/;u.value=u.value.replace(X,J),g.style.display="none",g.textContent="",u.dispatchEvent(new Event("input"))}):(g.textContent="\u52D5\u753B\u30BF\u30A4\u30C8\u30EB\u53D6\u5F97\u5931\u6557",g.onclick=null))})}),a.onclick=async()=>{var O;c=!c,a.classList.toggle("on",c),c?(d.style.display="",u.style.display="none",d.empty(),await Ut(u.value,d,((O=this.app.workspace.getActiveFile())==null?void 0:O.path)||"",new ge.Component)):(d.style.display="none",u.style.display="")};let w=r.createDiv({cls:"tweet-file-preview"});this.renderFilePreview(w);let v=r.createDiv({cls:"tweet-input-bottom-container"}),_=v.createDiv({cls:"tweet-icon-bar"});this.renderInputIcons(_,u,w);let S=v.createDiv({cls:"tweet-bottom-bar"}),M=S.createDiv({cls:"tweet-char-count-main"});this.updateCharCount(M,0);let D=S.createEl("button",{cls:"tweet-post-btn-main",text:this.widget.editingPostId?"\u7DE8\u96C6\u5B8C\u4E86":this.widget.replyingToParentId?"\u8FD4\u4FE1\u3059\u308B":"\u30DD\u30B9\u30C8\u3059\u308B"});D.onclick=async()=>{await this.widget.submitPost(u.value),u.value="",this.updateCharCount(M,0)},u.addEventListener("input",()=>{this.updateCharCount(M,u.value.length)});let T=r.createDiv({cls:"tweet-suggest-list"});T.style.display="none";let C=["@ai","@ai2","@bi"],A=-1,I=[];u.addEventListener("input",()=>{let O=u.value,L=/(^|\s)@(\w*)$/.exec(O.slice(0,u.selectionStart));if(L){let F=L[2]||"";if(I=C.filter(V=>V.slice(1).toLowerCase().startsWith(F.toLowerCase())),I.length===0){T.style.display="none",A=-1;return}T.empty(),A=0,I.forEach((V,J)=>{let X=T.createDiv({cls:"tweet-suggest-item",text:V});J===A&&X.addClass("active"),X.onmouseenter=()=>{A=J,Array.from(T.children).forEach((U,Z)=>{U.classList.toggle("active",Z===A)})},X.onclick=()=>{u.value=O.slice(0,L.index+L[1].length)+V+O.slice(u.selectionStart),T.style.display="none",u.focus()}}),T.style.display="block"}else T.style.display="none",A=-1}),u.addEventListener("keydown",O=>{if(T.style.display==="block"&&I.length>0){if(O.key==="ArrowDown")O.preventDefault(),A=(A+1)%I.length,Array.from(T.children).forEach((L,F)=>{L.classList.toggle("active",F===A)});else if(O.key==="ArrowUp")O.preventDefault(),A=(A-1+I.length)%I.length,Array.from(T.children).forEach((L,F)=>{L.classList.toggle("active",F===A)});else if(O.key==="Enter"&&A>=0&&A<I.length){let L=u.value,F=/(^|\s)@(\w*)$/.exec(L.slice(0,u.selectionStart));F&&(u.value=L.slice(0,F.index+F[1].length)+I[A]+L.slice(u.selectionStart),T.style.display="none",u.focus(),O.preventDefault())}}}),u.addEventListener("blur",()=>{setTimeout(()=>T.style.display="none",100)})}renderReplyInfo(t){let i=t.createDiv({cls:"tweet-reply-info-container"}),n=this.postsById.get(this.widget.replyingToParentId);if(n){let s=i.createDiv({cls:"tweet-reply-info"});s.setText(`${n.userName||"@user"} \u3055\u3093\u306B\u8FD4\u4FE1\u4E2D`);let r=s.createEl("button",{text:"\u30AD\u30E3\u30F3\u30BB\u30EB",cls:"tweet-cancel-reply-btn"});r.onclick=()=>this.widget.cancelReply()}else this.widget.cancelReply()}renderInputIcons(t,i,n){let s=t.createEl("button",{cls:"tweet-icon-btn-main",attr:{title:"\u753B\u50CF\u3092\u6DFB\u4ED8"}});(0,ge.setIcon)(s,"image");let r=createEl("input",{type:"file",attr:{accept:"image/*",multiple:!0,style:"display: none;"}});s.onclick=()=>r.click(),t.appendChild(r),r.onchange=async()=>{r.files&&(await this.widget.attachFiles(Array.from(r.files)),this.renderFilePreview(n),r.value="")};let o=t.createEl("button",{cls:"tweet-icon-btn-main",attr:{title:"\u592A\u5B57"}});(0,ge.setIcon)(o,"bold"),o.onclick=()=>this.widget.wrapSelection(i,"**");let a=t.createEl("button",{cls:"tweet-icon-btn-main",attr:{title:"\u659C\u4F53"}});(0,ge.setIcon)(a,"italic"),a.onclick=()=>this.widget.wrapSelection(i,"*")}renderFilePreview(t){t.empty();let i=this.widget.attachedFiles;i.length&&(t.className=`tweet-file-preview files-count-${i.length}`,i.forEach(n=>{t.createEl("img",{cls:"tweet-file-image-main",attr:{src:n.dataUrl,alt:n.name}})}))}updateCharCount(t,i){let n=this.widget.maxLength;t.textContent=`${i} / ${n}`,t.classList.toggle("tweet-char-over",i>n)}showAvatarModal(t,i){t.stopPropagation();let n=document.querySelector(".tweet-avatar-modal-backdrop");n&&n.remove();let s=document.body.createDiv("tweet-avatar-modal-backdrop");s.onclick=a=>{a.target===s&&s.remove()};let r=s.createDiv("tweet-avatar-modal-content");r.createEl("img",{attr:{src:i,alt:"avatar-large"}});let o=r.createEl("button",{text:"\xD7"});o.onclick=()=>s.remove(),this._escHandlerForAvatarModal=a=>{a.key==="Escape"&&(s.remove(),window.removeEventListener("keydown",this._escHandlerForAvatarModal))},window.addEventListener("keydown",this._escHandlerForAvatarModal)}renderPostList(t){let i=t.parentElement;if(i){let o=t.cloneNode(!1);i.replaceChild(o,t),t=o}if(this.widget.detailPostId){this.renderDetailView(t,this.widget.detailPostId);return}let n=this.widget.getFilteredPosts();if(n.length===0){t.createEl("div",{cls:"tweet-empty-notice",text:"\u307E\u3060\u3064\u3076\u3084\u304D\u304C\u3042\u308A\u307E\u305B\u3093\u3002"});return}let s=n.filter(o=>!o.threadId||!this.postsById.has(o.threadId)).sort((o,a)=>a.created-o.created),r=document.createDocumentFragment();s.forEach(o=>{let a=document.createElement("div");a.className="tweet-thread-wrapper",a.setAttribute("data-tweet-id",o.id),a.onclick=c=>{c.target.closest(".tweet-action-bar-main")||c.target.closest(".tweet-action-btn-main")||c.target.closest("a.internal-link")||c.target.closest("a.external-link")||c.target.closest(".tweet-item-avatar-main")||this.widget.navigateToDetail(o.id)},this.renderSinglePost(o,a),r.appendChild(a)}),t.appendChild(r)}renderDetailView(t,i){let n=this.postsById.get(i);if(!n)return;let s=t.createDiv({cls:"tweet-detail-main"});this.renderSinglePost(n,s,!0),this.renderDetailReplyInput(t,n),t.createDiv({cls:"tweet-detail-section-sep"});let r=(o,a,c=0)=>{let d=this.widget.currentSettings.posts.filter(u=>u.threadId===o);d.sort((u,f)=>u.created-f.created),d.forEach(u=>{let f=a.createDiv({cls:"tweet-detail-reply"});f.style.marginLeft=`${Math.min(c,1)*24}px`,f.onclick=g=>{g.target.closest(".tweet-action-bar-main")||g.target.closest(".tweet-item-avatar-main")||this.widget.navigateToDetail(u.id)},this.renderSinglePost(u,f),r(u.id,a,c+1)})};r(n.id,t),this.widget.currentSettings.posts.filter(o=>o.threadId===n.id).length===0&&t.createDiv({cls:"tweet-detail-no-reply",text:"\u30EA\u30D7\u30E9\u30A4\u306F\u3042\u308A\u307E\u305B\u3093"})}renderDetailReplyInput(t,i){let n=t.createDiv({cls:"tweet-detail-reply-box"}),s=this.widget.getAvatarUrl();n.createDiv({cls:"tweet-detail-reply-avatar"}).createEl("img",{attr:{src:s,width:44,height:44}});let r=n.createDiv({cls:"tweet-detail-reply-input"}),o=r.createEl("textarea",{cls:"tweet-detail-reply-textarea",attr:{placeholder:"\u8FD4\u4FE1\u3092\u30DD\u30B9\u30C8"}}),a=r.createEl("button",{cls:"tweet-detail-reply-btn",text:"\u8FD4\u4FE1"});a.onclick=async()=>{let c=o.value.trim();c&&(await this.widget.submitReply(c,i.id),o.value="")}}async renderSinglePost(t,i,n=!1){var y;i.empty();let s=i.createDiv({cls:"tweet-item-main"}),r=s.createDiv({cls:"tweet-item-header-main"}),o=this.widget.getAvatarUrl(t),c=r.createDiv({cls:"tweet-item-avatar-main"}).createEl("img",{attr:{src:o,width:36,height:36}});c.onclick=w=>this.showAvatarModal(w,o);let d=r.createDiv({cls:"tweet-item-userinfo-main"});if(d.createEl("span",{text:t.userName||"\u3042\u306A\u305F",cls:"tweet-item-username-main"}),t.verified){let w=d.createSpan({cls:"tweet-item-badge-main"});(0,ge.setIcon)(w,"badge-check")}d.createEl("span",{text:t.userId||"@you",cls:"tweet-item-userid-main"});let u="\u30FB"+this.widget.formatTimeAgo(t.created)+(t.edited?" (\u7DE8\u96C6\u6E08)":"");if(d.createEl("span",{text:u,cls:"tweet-item-time-main"}),t.threadId&&!n){let w=this.postsById.get(t.threadId),v=s.createDiv({cls:"tweet-item-reply-to"});w&&!w.deleted?v.setText(`\u8FD4\u4FE1\u5148: ${w.userName||w.userId}`):(v.setText("\u524A\u9664\u3055\u308C\u305F\u30DD\u30B9\u30C8\u3078\u306E\u8FD4\u4FE1"),v.addClass("deleted-reply"))}let f=s.createDiv({cls:"tweet-item-text-main"}),g=t.text;try{let w=JSON.parse(g);w&&typeof w.reply=="string"&&(g=w.reply)}catch(w){}if(await Ut(g,f,((y=this.app.workspace.getActiveFile())==null?void 0:y.path)||"",new ge.Component),t.files&&t.files.length){let w=s.createDiv({cls:`tweet-item-files-main files-count-${t.files.length}`});t.files.forEach(v=>{w.createEl("img",{attr:{src:v.dataUrl,alt:v.name},cls:"tweet-item-image-main"})})}let p=s.createDiv({cls:"tweet-item-metadata-main"});if(t.bookmark&&p.createEl("span",{cls:"tweet-chip bookmark",text:"Bookmarked"}),t.visibility&&t.visibility!=="public"&&p.createEl("span",{cls:"tweet-chip visibility",text:t.visibility}),t.noteQuality&&t.noteQuality!=="fleeting"&&p.createEl("span",{cls:"tweet-chip quality",text:t.noteQuality}),t.taskStatus&&p.createEl("span",{cls:"tweet-chip status",text:t.taskStatus}),t.tags&&t.tags.length>0){let w=s.createDiv({cls:"tweet-item-tags-main"});t.tags.forEach(v=>{w.createEl("a",{text:`#${v}`,cls:"tweet-tag",href:`#${v}`})})}if(t.userId&&t.userId.startsWith("@ai-")&&this.widget.plugin.settings.showAiHistory){let w=s.createDiv({cls:"tweet-ai-history-main"});w.createEl("div",{text:"\u4F1A\u8A71\u5C65\u6B74",cls:"tweet-ai-history-title"}),Qn(t,this.widget.currentSettings.posts).forEach((_,S)=>{let M=w.createDiv({cls:"tweet-ai-history-line"}),D=_.userId&&_.userId.startsWith("@ai-")?"AI":_.userName||_.userId||"\u3042\u306A\u305F";M.createSpan({text:`${D}: `,cls:"tweet-ai-history-who"}),M.createSpan({text:_.text,cls:"tweet-ai-history-text"})})}this.renderActionBar(s,t),n||this.renderReactedUsers(s,t)}renderActionBar(t,i){var d,u;let n=t.createDiv({cls:"tweet-action-bar-main"}),s=this.createActionButton(n,"message-square",i.replyCount,"reply");s.onclick=f=>{f.stopPropagation(),this.widget.startReply(i)};let r=this.createActionButton(n,"repeat-2",i.retweet,"retweet",i.retweeted);r.onclick=f=>{f.stopPropagation(),this.widget.toggleRetweet(i.id)};let o=this.createActionButton(n,"heart",i.like,"like",i.liked);o.onclick=f=>{f.stopPropagation(),this.widget.toggleLike(i.id)};let a=this.createActionButton(n,"bookmark",void 0,"bookmark",i.bookmark);a.onclick=f=>{f.stopPropagation(),this.widget.toggleBookmark(i.id)};let c=this.createActionButton(n,"more-horizontal",void 0,"more");if(c.onclick=f=>{f.stopPropagation(),this.showMoreMenu(f,i)},(u=(d=this.widget.plugin.settings.llm)==null?void 0:d.gemini)!=null&&u.apiKey){let f=this.createActionButton(n,"bot",void 0,"gemini-reply");f.title="Gemini\u3067\u30EA\u30D7\u30E9\u30A4\u751F\u6210",f.onclick=async g=>{g.stopPropagation(),f.setAttribute("disabled","true"),f.setText("..."),await this.widget.generateGeminiReply(i)}}}createActionButton(t,i,n,s,r){let o=t.createEl("button",{cls:`tweet-action-btn-main ${s||""}`});return(0,ge.setIcon)(o,i),r&&o.addClass("active"),n!==void 0&&n>0&&o.createSpan({text:String(n),cls:"tweet-action-count-main"}),o}renderReactedUsers(t,i){let n=this.widget.currentSettings.posts.filter(r=>r.threadId===i.id),s=new Map(n.map(r=>[r.userId,r]));if(s.size>0){let o=t.createDiv({cls:"tweet-reacted-users-main"}).createDiv({cls:"tweet-reacted-row"});o.createDiv({text:"\u3053\u306E\u4EBA\u305F\u3061\u304C\u53CD\u5FDC\u3057\u3066\u3044\u307E\u3059\uFF01",cls:"tweet-reacted-label"});let a=o.createDiv({cls:"tweet-reacted-avatars"}),c=Array.from(s.values()),d=5;c.slice(0,d).forEach((u,f)=>{let g=this.widget.getAvatarUrl(u),p=a.createEl("img",{attr:{src:g,width:24,height:24,title:u.userName||u.userId||""}});p.className="tweet-reacted-avatar-img",p.style.zIndex=String(10+d-f)}),c.length>d&&a.createDiv({cls:"tweet-reacted-avatar-more",text:`+${c.length-d}`})}}showMoreMenu(t,i){let n=new ge.Menu;n.addItem(r=>r.setTitle("\u7DE8\u96C6").setIcon("pencil").onClick(()=>this.widget.startEdit(i))),i.deleted?n.addItem(r=>r.setTitle("\u5FA9\u5143").setIcon("rotate-ccw").onClick(()=>this.widget.setPostDeleted(i.id,!1))):n.addItem(r=>r.setTitle("\u975E\u8868\u793A").setIcon("eye-off").onClick(()=>this.widget.setPostDeleted(i.id,!0))),n.addItem(r=>r.setTitle("\u26A0\uFE0F \u5B8C\u5168\u524A\u9664").setIcon("x-circle").onClick(()=>{confirm("\u3053\u306E\u3064\u3076\u3084\u304D\u3092\u5B8C\u5168\u306B\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F\uFF08\u5143\u306B\u623B\u305B\u307E\u305B\u3093\uFF09")&&this.widget.deletePost(i.id)})),n.addItem(r=>r.setTitle("\u{1F9F9} \u30B9\u30EC\u30C3\u30C9\u3092\u5B8C\u5168\u524A\u9664").setIcon("trash").onClick(()=>{confirm("\u3053\u306E\u30B9\u30EC\u30C3\u30C9\uFF08\u89AA\uFF0B\u30EA\u30D7\u30E9\u30A4\uFF09\u3092\u5B8C\u5168\u306B\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F\uFF08\u5143\u306B\u623B\u305B\u307E\u305B\u3093\uFF09")&&this.widget.deleteThread(i.id)})),n.addSeparator();let s=(r,o,a,c,d)=>{n.addItem(u=>u.setTitle(r).setDisabled(!0)),o.forEach(u=>{let f=u?u.charAt(0).toUpperCase()+u.slice(1):"None";d&&u&&d[u]&&(f+=`\uFF08${d[u]}\uFF09`),n.addItem(g=>g.setTitle(f).setChecked(a===u).onClick(()=>this.widget.updatePostProperty(i.id,c,u)))})};s("Visibility",["public","private","draft"],i.visibility,"visibility"),n.addSeparator(),s("Note Quality",["fleeting","literature","permanent"],i.noteQuality,"noteQuality",{fleeting:"\u30A2\u30A4\u30C7\u30A2",literature:"\u6587\u732E",permanent:"\u6C38\u4E45"}),n.addSeparator(),s("Task Status",[null,"todo","doing","done"],i.taskStatus,"taskStatus"),n.addSeparator(),n.addItem(r=>r.setTitle("Open/Create Context Note").setIcon("file-text").onClick(()=>this.widget.openContextNote(i))),n.showAtMouseEvent(t)}renderReplyModal(t){let i=document.body.createDiv("tweet-reply-modal-backdrop"),n=()=>{this.widget.replyModalPost=null,i.remove(),this.render()};i.onclick=v=>{v.target===i&&n()};let s=i.createDiv("tweet-reply-modal"),r=this.container.getBoundingClientRect();s.style.position="fixed",s.style.top=`${r.top+50}px`;let o=Math.min(r.width-40,600);s.style.width=`${o}px`,s.style.left=`${r.left+(r.width-o)/2}px`;let a=s.createDiv("tweet-reply-modal-header");a.createSpan({text:"\u8FD4\u4FE1"});let c=a.createEl("button",{text:"\xD7",cls:"tweet-reply-modal-close"});c.onclick=n;let d=s.createDiv("tweet-reply-modal-post");this.renderSinglePost(t,d,!0);let u=s.createDiv("tweet-reply-modal-input"),f=u.createEl("textarea",{cls:"tweet-reply-modal-textarea",attr:{placeholder:"\u8FD4\u4FE1\u3092\u30DD\u30B9\u30C8"}});f.focus();let g=u.createDiv({cls:"tweet-youtube-suggest",text:""});g.style.display="none",g.textContent="";let p="",y="";f.addEventListener("input",()=>{let v=f.value,_=ia(v);if(!_){g.style.display="none",g.textContent="",p="",y="";return}g.textContent="\u52D5\u753B\u30BF\u30A4\u30C8\u30EB\u53D6\u5F97\u4E2D...",g.style.display="block",p=_;let S=v;na(_).then(M=>{f.value===S&&(M?(y=M,g.textContent=`\u300C${M}\u300D\u3092\u633F\u5165 \u2192 \u30AF\u30EA\u30C3\u30AF`,g.onclick=()=>{let D=`![${M}](${_})`,T=/(https?:\/\/(?:www\.|m\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)[\w-]{11}(?:[?&][^\s]*)?)/;f.value=f.value.replace(T,D),g.style.display="none",g.textContent="",f.dispatchEvent(new Event("input"))}):(g.textContent="\u52D5\u753B\u30BF\u30A4\u30C8\u30EB\u53D6\u5F97\u5931\u6557",g.onclick=null))})});let w=u.createEl("button",{cls:"tweet-reply-modal-btn",text:"\u8FD4\u4FE1"});w.onclick=async()=>{let v=f.value.trim();v&&(await this.widget.submitReply(v,t.id),n())},f.addEventListener("keydown",v=>{v.key==="Escape"&&(v.stopPropagation(),n()),v.key==="Enter"&&(v.metaKey||v.ctrlKey)&&w.click()})}renderEditModal(t){let i=document.body.createDiv("tweet-reply-modal-backdrop"),n=()=>{this.widget.editingPostId=null,i.remove(),this.render()};i.onclick=p=>{p.target===i&&n()};let s=i.createDiv("tweet-reply-modal"),r=this.container.getBoundingClientRect();s.style.position="fixed",s.style.top=`${r.top+50}px`;let o=Math.min(r.width-40,600);s.style.width=`${o}px`,s.style.left=`${r.left+(r.width-o)/2}px`;let a=s.createDiv("tweet-reply-modal-header");a.createSpan({text:"\u3064\u3076\u3084\u304D\u3092\u7DE8\u96C6"});let c=a.createEl("button",{text:"\xD7",cls:"tweet-reply-modal-close"});c.onclick=n;let d=s.createDiv("tweet-reply-modal-post");this.renderSinglePost(t,d,!0);let u=s.createDiv("tweet-reply-modal-input"),f=u.createEl("textarea",{cls:"tweet-reply-modal-textarea",attr:{placeholder:"\u3064\u3076\u3084\u304D\u3092\u7DE8\u96C6",rows:3}});f.value=t.text,f.focus();let g=u.createEl("button",{cls:"tweet-reply-modal-btn",text:"\u7DE8\u96C6\u5B8C\u4E86"});g.onclick=async()=>{let p=f.value.trim();p&&(await this.widget.submitPost(p),n())},f.addEventListener("keydown",p=>{p.key==="Escape"&&(p.stopPropagation(),n()),p.key==="Enter"&&(p.metaKey||p.ctrlKey)&&g.click()})}onunload(){window.removeEventListener("keydown",this._escHandlerForAvatarModal)}};var Oi=require("obsidian");var ri=class{constructor(t,i){this.app=t,this.dbPath=i}setPath(t){this.dbPath=t}async load(){try{if(!await this.app.vault.adapter.exists(this.dbPath))return await this.save(ze),{...ze};let i=await this.app.vault.adapter.read(this.dbPath);if(!i||i.trim()==="")return new Oi.Notice("\u30C7\u30FC\u30BF\u30D5\u30A1\u30A4\u30EB\u304C\u7A7A\u3067\u3059\u3002\u521D\u671F\u8A2D\u5B9A\u3092\u4F7F\u7528\u3057\u307E\u3059\u3002"),{...ze};let n;try{n=JSON.parse(i)}catch(s){return console.error("Error parsing tweet data JSON:",s),new Oi.Notice(`\u3064\u3076\u3084\u304D\u30C7\u30FC\u30BF\u306E\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u304C\u4E0D\u6B63\u3067\u3059\u3002\u521D\u671F\u8A2D\u5B9A\u3067\u8D77\u52D5\u3057\u307E\u3059\u3002
\u7834\u640D\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u306F `.concat(this.dbPath,".bak \u3068\u3057\u3066\u4FDD\u5B58\u3092\u8A66\u307F\u307E\u3059\u3002")),await this.backupCorruptedFile(i),{...ze}}return n&&Array.isArray(n.posts)?n.posts=n.posts.map(s=>Gc(s)):n.posts=[],{...ze,...n}}catch(t){console.error("Error loading tweet data:",t),new Oi.Notice("\u3064\u3076\u3084\u304D\u30C7\u30FC\u30BF\u306E\u8AAD\u307F\u8FBC\u307F\u4E2D\u306B\u4E88\u671F\u305B\u306C\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306F\u30B3\u30F3\u30BD\u30FC\u30EB\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002")}return{...ze}}async save(t){try{let i=this.dbPath.lastIndexOf("/"),n=i!==-1?this.dbPath.substring(0,i):"";n&&!await this.app.vault.adapter.exists(n)&&await this.app.vault.adapter.mkdir(n);let s=JSON.stringify(t,null,2);await this.app.vault.adapter.write(this.dbPath,s)}catch(i){console.error("Error saving tweet data:",i),new Oi.Notice("\u3064\u3076\u3084\u304D\u30C7\u30FC\u30BF\u306E\u4FDD\u5B58\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306F\u30B3\u30F3\u30BD\u30FC\u30EB\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002")}}async backupCorruptedFile(t){let i=`${this.dbPath}.bak_${Date.now()}`;try{await this.app.vault.adapter.write(i,t),new Oi.Notice(`\u7834\u640D\u3057\u305F\u30C7\u30FC\u30BF\u306F ${i} \u306B\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u3055\u308C\u307E\u3057\u305F\u3002`)}catch(n){console.error("Error creating backup of corrupted tweet data:",n),new Oi.Notice(`\u7834\u640D\u3057\u305F\u30C7\u30FC\u30BF\u306E\u30D0\u30C3\u30AF\u30A2\u30C3\u30D7\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F: ${i}`)}}};var fr=class{constructor(t){this.postsById=new Map;this.settings=t,this.updatePostsById()}setAllSettings(t){this.settings=t,this.updatePostsById()}addPost(t){if(this.settings.posts.unshift(t),t.threadId){let i=this.postsById.get(t.threadId);i&&(i.replyCount=(i.replyCount||0)+1,i.updated=Date.now())}this.updatePostsById()}updatePost(t,i){let n=this.postsById.get(t);n&&(Object.assign(n,i),n.updated=Date.now(),this.updatePostsById())}deletePost(t){let i=this.postsById.get(t);if(i!=null&&i.threadId){let n=this.postsById.get(i.threadId);n&&(n.replyCount=Math.max(0,(n.replyCount||0)-1))}this.settings.posts=this.settings.posts.filter(n=>n.id!==t),this.updatePostsById()}deleteThread(t){let i=this.collectThreadIdsRecursive(t),n=this.postsById.get(t);if(n!=null&&n.threadId){let s=this.postsById.get(n.threadId);s&&(s.replyCount=Math.max(0,(s.replyCount||0)-1))}this.settings.posts=this.settings.posts.filter(s=>!i.includes(s.id)),this.updatePostsById()}getPostById(t){return this.postsById.get(t)}updatePostsById(){this.postsById=new Map(this.settings.posts.map(t=>[t.id,t]))}collectThreadIdsRecursive(t){let i=new Set,n=[t];for(i.add(t);n.length>0;){let s=n.shift(),r=this.settings.posts.filter(o=>o.threadId===s);for(let o of r)i.has(o.id)||(i.add(o.id),n.push(o.id))}return Array.from(i)}};var gr=class{constructor(){this.id="tweet-widget";this.maxLength=Yc;this.attachedFiles=[];this.editingPostId=null;this.replyingToParentId=null;this.currentFilter="active";this.detailPostId=null;this.replyModalPost=null;this.currentTab="home";this.currentPeriod="all";this.customPeriodDays=1;this.saveTimeout=null;this.formatTimeAgo=Uc;this.wrapSelection=jc}get currentSettings(){return this.store.settings}get postsById(){return this.store.postsById}create(t,i,n){this.config=t,this.app=i,this.plugin=n,this.widgetEl=document.createElement("div"),this.widgetEl.classList.add("widget","tweet-widget"),this.widgetEl.setAttribute("data-widget-id",t.id);let s=t.settings||{};s.width&&(this.widgetEl.style.width=s.width),s.height&&(this.widgetEl.style.height=s.height),this.currentPeriod=this.plugin.settings.defaultTweetPeriod||"all",this.customPeriodDays=this.plugin.settings.defaultTweetCustomDays||1;let r=this.getTweetDbPath();return this.repository=new ri(this.app,r),this.widgetEl.innerText="Loading...",this.repository.load().then(o=>{this.store=new fr(o),this.ui=new ur(this,this.widgetEl),this.ui.render()}),this.widgetEl}saveDataDebounced(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(async()=>{this.repository.setPath(this.getTweetDbPath()),await this.repository.save(this.store.settings),this.saveTimeout=null},500)}async switchTab(t){this.currentTab=t,this.detailPostId=null,this.ui.render()}navigateToDetail(t){this.detailPostId=t,this.currentTab="home",this.ui.render()}setFilter(t){this.currentFilter=t,this.detailPostId=null,this.ui.render()}async submitPost(t){let i=t.trim();if(!(!i&&this.attachedFiles.length===0)){if(this.editingPostId)this.store.updatePost(this.editingPostId,{text:i,files:this.attachedFiles,edited:!0,tags:cr(i),links:dr(i)}),new xe.Notice("\u3064\u3076\u3084\u304D\u3092\u7DE8\u96C6\u3057\u307E\u3057\u305F");else{let n=this.createNewPostObject(i);this.store.addPost(n),new xe.Notice(this.replyingToParentId?"\u8FD4\u4FE1\u3092\u6295\u7A3F\u3057\u307E\u3057\u305F":"\u3064\u3076\u3084\u304D\u3092\u6295\u7A3F\u3057\u307E\u3057\u305F"),this.triggerAiReply(n)}this.resetInputState(),this.saveDataDebounced(),this.ui.render()}}async submitReply(t,i){let n=t.trim();if(!n)return;let s=this.createNewPostObject(n,i);this.store.addPost(s),new xe.Notice("\u8FD4\u4FE1\u3092\u6295\u7A3F\u3057\u307E\u3057\u305F"),this.triggerAiReply(s),this.saveDataDebounced(),this.ui.render()}createNewPostObject(t,i=this.replyingToParentId){return{id:"tw-"+Date.now()+"-"+Math.random().toString(36).slice(2,8),text:t,created:Date.now(),updated:Date.now(),files:this.attachedFiles,like:0,liked:!1,retweet:0,retweeted:!1,replyCount:0,deleted:!1,bookmark:!1,threadId:i,visibility:"public",noteQuality:"fleeting",taskStatus:null,tags:cr(t),links:dr(t),userId:this.store.settings.userId||"@you",userName:this.store.settings.userName||"\u3042\u306A\u305F",verified:this.store.settings.verified}}triggerAiReply(t){var r,o;if((r=t.userId)!=null&&r.startsWith("@ai-"))return;let i=this.store.settings.aiGovernance||{minuteMap:{},dayMap:{}},{allow:n,updatedGovernanceData:s}=Vc(t,this.plugin.settings,i);JSON.stringify(i)!==JSON.stringify(s)&&(this.store.settings.aiGovernance=s),n&&zc({tweet:t,allTweets:this.store.settings.posts,llmGemini:((o=this.plugin.settings.llm)==null?void 0:o.gemini)||{apiKey:"",model:"gemini-1.5-flash-latest"},saveReply:async a=>{this.store.addPost(a),this.saveDataDebounced(),this.ui.render()},parseTags:cr,parseLinks:dr,onError:a=>new xe.Notice("AI\u81EA\u52D5\u30EA\u30D7\u30E9\u30A4\u751F\u6210\u306B\u5931\u6557: "+(a instanceof Error?a.message:String(a))),settings:this.plugin.settings,delay:!ea(t)})}resetInputState(){this.attachedFiles=[],this.editingPostId=null,this.replyingToParentId=null}startEdit(t){this.editingPostId=t.id,this.replyingToParentId=null,this.attachedFiles=t.files?[...t.files]:[],this.ui.render(),setTimeout(()=>{let i=this.widgetEl.querySelector(".tweet-textarea-main");i&&(i.value=t.text,i.focus(),i.selectionStart=i.selectionEnd=i.value.length,this.ui.renderFilePreview(this.widgetEl.querySelector(".tweet-file-preview")))},50)}startReply(t){this.replyModalPost=t,this.editingPostId=null,this.replyingToParentId=null,this.ui.render()}cancelReply(){this.replyingToParentId=null,this.ui.render()}async toggleLike(t){let i=this.store.getPostById(t);i&&(this.store.updatePost(t,{liked:!i.liked,like:(i.like||0)+(i.liked?-1:1)}),this.saveDataDebounced(),this.ui.render())}async toggleRetweet(t){let i=this.store.getPostById(t);i&&(this.store.updatePost(t,{retweeted:!i.retweeted,retweet:(i.retweet||0)+(i.retweeted?-1:1)}),this.saveDataDebounced(),this.ui.render())}async toggleBookmark(t){let i=this.store.getPostById(t);i&&(this.store.updatePost(t,{bookmark:!i.bookmark}),this.saveDataDebounced(),this.ui.render())}async setPostDeleted(t,i){this.store.updatePost(t,{deleted:i}),this.saveDataDebounced(),this.ui.scheduleRender()}async deletePost(t){this.store.deletePost(t),this.saveDataDebounced(),this.ui.render()}async deleteThread(t){this.store.deleteThread(t),this.detailPostId=null,this.saveDataDebounced(),this.ui.render()}async updatePostProperty(t,i,n){let s=this.store.getPostById(t);s&&s[i]!==n&&(this.store.updatePost(t,{[i]:n}),this.saveDataDebounced(),this.ui.scheduleRender())}async openContextNote(t){let i=t.contextNote;if(!i){let s=new Date(t.created).toISOString().split("T")[0],r=t.text.slice(0,30).replace(/[\\/:*?"<>|#\[\]]/g,"").trim(),o=this.plugin.settings.baseFolder?`${this.plugin.settings.baseFolder}/ContextNotes`:"ContextNotes";await this.app.vault.adapter.exists(o)||await this.app.vault.createFolder(o),i=`${o}/${s}-${r||"note"}.md`,await this.updatePostProperty(t.id,"contextNote",i)}let n=this.app.vault.getAbstractFileByPath(i);if(n instanceof xe.TFile)this.app.workspace.getLeaf(!0).openFile(n);else if(await this.app.vault.adapter.exists(i))new xe.Notice("Context note not found!");else{await this.app.vault.create(i,`> ${t.text}

---

`);let s=this.app.vault.getAbstractFileByPath(i);s instanceof xe.TFile&&this.app.workspace.getLeaf(!0).openFile(s)}}async generateGeminiReply(t){try{let a=function(w){let v=w.getHours();return v>=0&&v<3?"\u672A\u660E":v>=3&&v<6?"\u660E\u3051\u65B9":v>=6&&v<9?"\u671D":v>=9&&v<12?"\u663C\u524D":v>=12&&v<15?"\u663C\u904E\u304E":v>=15&&v<18?"\u5915\u65B9":v>=18&&v<21?"\u591C\u306E\u306F\u3058\u3081\u9803":v>=21&&v<24?"\u591C\u9045\u304F":""},i=Qn(t,this.store.settings.posts),n=i.map(w=>`${w.userName||w.userId}: ${w.text}`).join(`
`),s=i[i.length-1],r=new Date(s.created),o=`${r.getFullYear()}\u5E74${r.getMonth()+1}\u6708${r.getDate()}\u65E5 ${r.getHours()}\u6642${r.getMinutes().toString().padStart(2,"0")}\u5206`,c=a(r),d=`${o}\uFF08\u3053\u306E\u6642\u9593\u5E2F\u306F\u300C${c}\u300D\u3067\u3059\uFF09`,f=(this.plugin.settings.userTweetPrompt&&this.plugin.settings.userTweetPrompt.trim()?this.plugin.settings.userTweetPrompt:Pi).replace("{postDate}",d).replace("{tweet}",n);yt(this.plugin,"[Gemini Prompt]",f);let g=await dn.generateReply(f,{apiKey:Ve(this.plugin.settings.llm.gemini.apiKey),model:this.plugin.settings.llm.gemini.model,postText:n,post:t,thread:i});try{let w=JSON.parse(g);w!=null&&w.reply&&(g=w.reply)}catch(w){}let p=ta(t,this.store.settings.posts)||Qo(),y=this.createNewPostObject(g,t.id);y.userId=p,y.userName="AI",y.verified=!0,this.store.addPost(y),this.saveDataDebounced(),this.ui.render()}catch(i){new xe.Notice("Gemini\u30EA\u30D7\u30E9\u30A4\u751F\u6210\u5931\u6557: "+(i instanceof Error?i.message:String(i))),this.ui.render()}}async attachFiles(t){for(let i of t){let n=await $c(i);this.attachedFiles.push({name:i.name,type:i.type,dataUrl:n})}}getFilteredPosts(){let t=this.store.settings.posts;switch(this.currentFilter){case"all":break;case"deleted":t=t.filter(i=>i.deleted);break;case"bookmark":t=t.filter(i=>i.bookmark);break;case"active":default:t=t.filter(i=>!i.deleted)}if(this.currentPeriod&&this.currentPeriod!=="all"){let i=Date.now(),n=0;if(this.currentPeriod==="today"){let s=new Date,r=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0"),c=`${r}-${o}-${a}`;t=t.filter(d=>{let u=new Date(d.created),f=u.getFullYear(),g=String(u.getMonth()+1).padStart(2,"0"),p=String(u.getDate()).padStart(2,"0");return`${f}-${g}-${p}`===c})}else this.currentPeriod==="custom"?n=(this.customPeriodDays||1)*864e5:n={"1d":864e5,"3d":3*864e5,"7d":7*864e5,"30d":30*864e5}[this.currentPeriod]||0;n>0&&this.currentPeriod!=="today"&&(t=t.filter(s=>i-s.created<n))}return t}getAvatarUrl(t){let i="",n=t||this.store.settings;if(n.userId&&n.userId.startsWith("@ai-")){let s=(this.plugin.settings.aiAvatarUrls||"").split(",").map(r=>r.trim()).filter(Boolean);if(s.length>0){let r=this.getAiAvatarIndex(n.userId,s.length);i=s[r]}}else i=this.plugin.settings.tweetWidgetAvatarUrl||this.store.settings.avatarUrl||"";return i.trim()||"https://www.gravatar.com/avatar/?d=mp&s=64"}getAvatarUrlForPostInput(){if(this.replyingToParentId){let t=this.store.getPostById(this.replyingToParentId);if(t)return this.getAvatarUrl(t)}return this.getAvatarUrl()}getTweetDbPath(){let{baseFolder:t}=this.plugin.settings;return t?`${t.endsWith("/")?t.slice(0,-1):t}/tweets.json`:"tweets.json"}getAiAvatarIndex(t,i){let n=0;for(let s=0;s<t.length;s++)n=t.charCodeAt(s)+((n<<5)-n);return Math.abs(n)%i}setPeriod(t){this.currentPeriod=t,this.ui.render()}setCustomPeriodDays(t){this.customPeriodDays=t,this.ui.render()}};var Cu=require("obsidian");var Kc=`
\u3042\u306A\u305F\u306FSNS\u6295\u7A3F\u306E\u8981\u7D04\u30FB\u5206\u6790AI\u3067\u3059\u3002\u4EE5\u4E0B\u306B\u793A\u3059\u672C\u65E5\u306E\u6295\u7A3F\u3092\u8AAD\u307F\u3001\u307E\u305A\u300C\u4ECA\u65E51\u65E5\u306E\u6C17\u5206\u3084\u51FA\u6765\u4E8B\u300D\u3092\u81EA\u7136\u306A\u65E5\u672C\u8A9E\u3067\u307E\u3068\u3081\u3001\u305D\u306E\u3042\u3068\u306B\u300C\u6295\u7A3F\u306E\u80CC\u666F\u306B\u3042\u308B\u611F\u60C5\u3084\u5FC3\u7406\u72B6\u614B\u300D\u300C\u30AB\u30A6\u30F3\u30BB\u30E9\u30FC\u8996\u70B9\u306B\u3088\u308B\u6C17\u3065\u304D\u3084\u30B5\u30DD\u30FC\u30C8\u3068\u3057\u3066\u306E\u63D0\u6848\u300D\u306A\u3069\u3092700\u6587\u5B57\u7A0B\u5EA6\u3067\u5206\u6790\u3057\u3066\u304F\u3060\u3055\u3044\u3002
\u5FC3\u7406\u5B66\u7684\u306A\u7528\u8A9E\u3084\u30AB\u30A6\u30F3\u30BB\u30EA\u30F3\u30B0\u306E\u8996\u70B9\u3092\u76DB\u308A\u8FBC\u307F\u3001\u5171\u611F\u7684\u304B\u3064\u5C02\u9580\u7684\u306A\u30C8\u30FC\u30F3\u3067\u8A18\u8FF0\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u7B87\u6761\u66F8\u304D\u3084\u8A18\u53F7\u306F\u4F7F\u7528\u3057\u306A\u3044\u3067\u304F\u3060\u3055\u3044\u3002

---

{posts}`,Xc=`
\u3042\u306A\u305F\u306FSNS\u6295\u7A3F\u306E\u8981\u7D04\u30FB\u5206\u6790AI\u3067\u3059\u3002
\u4EE5\u4E0B\u306B\u793A\u3059\u4ECA\u9031\u306E\u6295\u7A3F\u3092\u8AAD\u307F\u3001\u307E\u305A\u300C\u4ECA\u9031\u306E\u6C17\u5206\u3084\u51FA\u6765\u4E8B\u300D\u3092\u81EA\u7136\u306A\u65E5\u672C\u8A9E\u3067\u307E\u3068\u3081\u3001\u305D\u306E\u3042\u3068\u306B\u300C\u30E6\u30FC\u30B6\u30FC\u306E\u611F\u60C5\u50BE\u5411\u3084\u5FC3\u7406\u7684\u306A\u30D1\u30BF\u30FC\u30F3\u300D\u300C\u30AB\u30A6\u30F3\u30BB\u30E9\u30FC\u3068\u3057\u3066\u6349\u3048\u305F\u30B5\u30DD\u30FC\u30C8\u306E\u8996\u70B9\u3084\u30A2\u30C9\u30D0\u30A4\u30B9\u300D\u306A\u3069\u3092\u5206\u6790\u3057\u3066\u304F\u3060\u3055\u3044\u3002
\u5FC3\u7406\u5B66\u7528\u8A9E\u3084\u30AB\u30A6\u30F3\u30BB\u30EA\u30F3\u30B0\u306E\u8981\u7D20\u3092\u9069\u5207\u306B\u53D6\u308A\u5165\u308C\u3001\u5171\u611F\u7684\u304B\u3064\u5C02\u9580\u7684\u306A\u30C8\u30FC\u30F3\u3067\u8A18\u8FF0\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u7B87\u6761\u66F8\u304D\u3084\u8A18\u53F7\u306F\u4F7F\u7528\u3057\u306A\u3044\u3067\u304F\u3060\u3055\u3044\u3002


mermaid\u306B\u3088\u308B\u56F3\u5F0F\u5316\u3082\u7A4D\u6975\u7684\u306B\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002
mermaid\u306F\u65E5\u672C\u8A9E\u3092\u4F7F\u7528\u3059\u308B\u3068\u554F\u984C\u304C\u751F\u3058\u3084\u3059\u3044\u305F\u3081\u30C0\u30D6\u30EB\u30AF\u30AA\u30FC\u30C6\u30FC\u30B7\u30E7\u30F3\u3067\u56F2\u3093\u3067\u304F\u3060\u3055\u3044\u3002mermaid\u306E\u69CB\u9020\u306F\u30EA\u30BE\u30FC\u30E0\u3092\u610F\u8B58\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u8907\u96D1\uFF08\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u3088\u3046\u306B\u5165\u308A\u7D44\u3093\u3067\u3044\u308B\uFF09\u3067\u8A73\u7D30\u3067\u3001\u793A\u5506\u306B\u5BCC\u3080\u3082\u306E\u3092\u6C42\u3081\u3066\u3044\u307E\u3059\u3002\u540C\u3058\u3082\u306E\u306F\u8907\u6570\u56DE\u51FA\u73FE\u3057\u306A\u3044\u3067\u304F\u3060\u3055\u3044\u3002

\u4E0E\u3048\u3089\u308C\u305F\u60C5\u5831\u3092\u3082\u3068\u306B\u3001Mermaid \u306E flowchart LR \u8A18\u6CD5\u3092\u751F\u6210\u3057\u307E\u3059\u3002

\u30EB\u30FC\u30EB:
\u30AF\u30E9\u30B9\u30BF\u3054\u3068\u306B subgraph \u30D6\u30ED\u30C3\u30AF\u3092\u4F5C\u308A\u3001subgraph \u306E\u540D\u524D\u306B\u306F\u30AF\u30E9\u30B9\u30BF\u540D\u3092\u305D\u306E\u307E\u307E\u8A18\u8FF0\u3059\u308B\u3002(5~7\u500B)
\u305D\u306E\u4E2D\u306B\u30CE\u30FC\u30C9\u3092\u300C\u8B58\u5225\u5B50[\u201C\u30CE\u30FC\u30C9\u8868\u793A\u540D\u201D]\u300D\u306E\u5F62\u3067\u5B9A\u7FA9\u3059\u308B\u3002
\u30AF\u30E9\u30B9\u30BF\u5916\u306E\u30A8\u30C3\u30B8\uFF08\u30CE\u30FC\u30C9\u9593\u306E\u77E2\u5370\uFF09\u306F\u3001\u8B58\u5225\u5B50\u540C\u58EB\u3092 \u201C-->\u201D \u3067\u3064\u306A\u3050\u3002
Mermaid \u306E\u6700\u4E0A\u90E8\u306B \u201Cflowchart LR\u201D \u3092\u66F8\u304D\u3001\u4EE5\u964D\u306B subgraph \uFF5E end \u3092\u8A18\u8FF0\u3059\u308B\u3002


\u6295\u7A3F\u306B\u3042\u308B\u52D5\u753B\u3084\u753B\u50CF\u3092\u4F7F\u7528\u3057\u3066\u3001\u30DD\u30B9\u30C8\u306B\u3042\u308Byoutube\u3084\u753B\u50CF\u3092\u632F\u308A\u8FD4\u308A\u3068\u3057\u3066\u8868\u793A\u3055\u305B\u3066\u304F\u3060\u3055\u3044\u3002
youtube\u306E\u8868\u793A\u306F\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u91CD\u8981! \u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3055\u308C\u308B\u3088\u3046\u306B\u3001\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u306F\u907F\u3051\u3066\u51FA\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002

##### {\u52D5\u753B\u306E\u7C21\u5358\u306A\u8AAC\u660E}

<div align="center">
  <a href="{{ url }}"><img src="https://i.ytimg.com/vi/{{ id }}/hqdefault.jpg" width="480"></a>
</div>

---

{posts}`;var dl;function Es(e){return e.toISOString().slice(0,10)}function Pn(e){return[e.getFullYear(),String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0")].join("-")}function Rx(e){let t=[],i=new Date;for(let n=e-1;n>=0;n--){let s=new Date(i.getFullYear(),i.getMonth(),i.getDate()-n);t.push(Es(s))}return t}function Fx(){let e=new Date,t=e.getDay(),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()-t),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+(6-t));return[Es(i),Es(n)]}async function Tu(e,t,i){if(!i.llmManager)return"LLM\u672A\u521D\u671F\u5316";let n=JSON.parse(JSON.stringify(i.settings.llm||{}));n.gemini&&n.gemini.apiKey&&(n.apiKey=Ve(n.gemini.apiKey));let s=e.map(o=>`[${Pn(new Date(o.created))}] ${o.text}`).join(`
`),r=t.replace("{posts}",s);try{return await i.llmManager.generateReplyWithDefault(r,n)}catch(o){return"\u8981\u7D04\u751F\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F"}}async function Du(e,t,i,n){let s="data.json",r={};try{let o=await n.vault.adapter.read(s);r=JSON.parse(o)}catch(o){}r.reflectionSummaries||(r.reflectionSummaries={}),r.reflectionSummaries[e]={date:t,summary:i},await n.vault.adapter.write(s,JSON.stringify(r,null,2))}async function ku(e,t,i){var s;let n="data.json";try{let r=await i.vault.adapter.read(n),o=JSON.parse(r);if(o.reflectionSummaries&&((s=o.reflectionSummaries[e])==null?void 0:s.date)===t)return o.reflectionSummaries[e].summary}catch(r){}return null}var Qr=class{constructor(t,i,n,s,r){this.autoTimer=null;this.chart=null;this.lastChartData=null;this.lastTodaySummary=null;this.lastWeekSummary=null;this.contentEl=null;this.canvasEl=null;this.todaySummaryEl=null;this.weekSummaryEl=null;this.aiSummarySectionEl=null;this.manualBtnEl=null;this.needsRender=!1;this.widget=t,this.container=i,this.config=n,this.app=s,this.plugin=r}async render(){if(dl||(dl=(await Promise.resolve().then(()=>(Mu(),Eu))).default),!this.contentEl){let t=this.container.parentElement;if(t){let a=this.container.cloneNode(!1);t.replaceChild(a,this.container),this.container=a}this.chart&&(this.chart.destroy(),this.chart=null);let i=this.config.settings||{},n=document.createElement("div");n.className="widget-title",n.innerText=this.config.title||"\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8",this.container.appendChild(n),this.contentEl=document.createElement("div"),this.contentEl.className="widget-content",this.contentEl.style.display="flex",this.contentEl.style.flexDirection="column",this.contentEl.style.alignItems="center",this.contentEl.style.justifyContent="center",this.contentEl.style.padding="8px 0 0 0",this.contentEl.style.contain="layout style",this.container.appendChild(this.contentEl);let s=document.createElement("div");s.style.fontWeight="bold",s.style.marginBottom="4px",s.style.textAlign="center",s.style.fontSize="1em",s.innerText="\u76F4\u8FD17\u65E5\u9593\u306E\u6295\u7A3F\u6570\u30C8\u30EC\u30F3\u30C9",this.contentEl.appendChild(s),this.canvasEl=document.createElement("canvas"),this.canvasEl.width=600,this.canvasEl.height=220,this.canvasEl.style.margin="0 auto 16px auto",this.canvasEl.style.display="block",this.canvasEl.style.maxWidth="80%",this.canvasEl.style.width="80%",this.contentEl.appendChild(this.canvasEl),this.aiSummarySectionEl=document.createElement("div"),this.aiSummarySectionEl.style.width="100%",this.aiSummarySectionEl.style.marginTop="18px",this.aiSummarySectionEl.style.padding="8px 0 0 0",this.aiSummarySectionEl.style.borderTop="1px solid var(--divider-color, #444)",this.contentEl.appendChild(this.aiSummarySectionEl);let r=document.createElement("div");r.style.fontWeight="bold",r.style.margin="16px 0 2px 0",r.style.fontSize="2em",r.innerText="AI\u306B\u3088\u308B\u4ECA\u65E5\u306E\u307E\u3068\u3081",this.aiSummarySectionEl.appendChild(r),this.todaySummaryEl=document.createElement("div"),this.todaySummaryEl.innerText="",this.todaySummaryEl.style.minHeight="2em",this.aiSummarySectionEl.appendChild(this.todaySummaryEl);let o=document.createElement("div");o.style.fontWeight="bold",o.style.margin="16px 0 2px 0",o.style.fontSize="2em",o.innerText="AI\u306B\u3088\u308B\u4ECA\u9031\u306E\u307E\u3068\u3081",this.aiSummarySectionEl.appendChild(o),this.weekSummaryEl=document.createElement("div"),this.weekSummaryEl.innerText="",this.weekSummaryEl.style.minHeight="2em",this.aiSummarySectionEl.appendChild(this.weekSummaryEl)}if(this.canvasEl&&this.contentEl){let t=this.contentEl.clientWidth;t>0&&(this.canvasEl.width=t)}this.updateGraphAndSummaries()}async runSummary(t=!1){this.manualBtnEl&&(this.manualBtnEl.disabled=!0,this.manualBtnEl.innerText="\u5B9F\u884C\u4E2D...");let i=!1;try{let n=new Promise((s,r)=>setTimeout(()=>{i=!0,r(new Error("\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u3057\u307E\u3057\u305F"))},6e4));await Promise.race([(async()=>{let s=this.config.settings||{},r=Pn(new Date),[o,a]=Fx(),c=Pn(new Date(a)),[d,u]=await Promise.all([ku("today",r,this.app),ku("week",c,this.app)]),f=this.plugin.settings.baseFolder?`${this.plugin.settings.baseFolder.replace(/\/$/,"")}/tweets.json`:"tweets.json",y=(await new ri(this.app,f).load()).posts||[],w=!1,v=!1;d&&this.lastTodaySummary===d&&(w=!0),u&&this.lastWeekSummary===u&&(v=!0);let _=[];!w&&this.todaySummaryEl&&_.push(this.renderMarkdown(this.todaySummaryEl,d||"\u672C\u65E5\u306E\u6295\u7A3F\u304C\u3042\u308A\u307E\u305B\u3093\u3002",this.lastTodaySummary,A=>this.lastTodaySummary=A)),!v&&this.weekSummaryEl&&_.push(this.renderMarkdown(this.weekSummaryEl,u||"\u4ECA\u9031\u306E\u6295\u7A3F\u304C\u3042\u308A\u307E\u305B\u3093\u3002",this.lastWeekSummary,A=>this.lastWeekSummary=A)),await Promise.all(_);let S=this.plugin.settings.userSummaryPromptToday,M=this.plugin.settings.userSummaryPromptWeek;if(t||!d){let A=y.filter(L=>!L.deleted&&Pn(new Date(L.created))===r&&L.userId==="@you"),I=S&&S.trim()?S:Kc,O=A.length>0?await Tu(A,I,this.plugin):"";await this.renderMarkdown(this.todaySummaryEl,O||"\u672C\u65E5\u306E\u6295\u7A3F\u304C\u3042\u308A\u307E\u305B\u3093\u3002",this.lastTodaySummary,L=>this.lastTodaySummary=L),await Du("today",r,O,this.app)}if(t||!u){let A=y.filter(L=>!L.deleted&&Pn(new Date(L.created))>=o&&Pn(new Date(L.created))<=c&&L.userId==="@you"),I=M&&M.trim()?M:Xc,O=A.length>0?await Tu(A,I,this.plugin):"";await this.renderMarkdown(this.weekSummaryEl,O||"\u4ECA\u9031\u306E\u6295\u7A3F\u304C\u3042\u308A\u307E\u305B\u3093\u3002",this.lastWeekSummary,L=>this.lastWeekSummary=L),await Du("week",c,O,this.app)}let D=Rx(7),T=y.filter(A=>{let I=Es(new Date(A.created));return D.includes(I)&&!A.deleted}),C=D.map(A=>T.filter(I=>Es(new Date(I.created))===A).length);if(!(this.lastChartData&&this.lastChartData.length===C.length&&this.lastChartData.every((A,I)=>A===C[I]))){if(this.canvasEl){this.chart&&(this.chart.destroy(),this.chart=null);let A=this.canvasEl.getContext("2d");A&&(this.chart=new dl(A,{type:"line",data:{labels:D.map(I=>I.slice(5)),datasets:[{label:"\u6295\u7A3F\u6570",data:C,borderColor:"#4a90e2",backgroundColor:"rgba(74,144,226,0.15)",fill:!0,tension:.3,pointRadius:3}]},options:{responsive:!1,animation:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1},ticks:{maxTicksLimit:5}},y:{beginAtZero:!0,grid:{color:"#eee"}}}}}),this.lastChartData=[...C])}}})(),n])}catch(n){if(this.manualBtnEl){this.manualBtnEl.innerText=i?"\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8\u3057\u307E\u3057\u305F":"\u307E\u3068\u3081\u751F\u6210\u5931\u6557",setTimeout(()=>{this.manualBtnEl.innerText="\u307E\u3068\u3081\u751F\u6210",this.manualBtnEl.disabled=!1},3e3);return}}this.manualBtnEl&&(this.manualBtnEl.innerText="\u307E\u3068\u3081\u751F\u6210",this.manualBtnEl.disabled=!1)}async renderMarkdown(t,i,n,s){n!==i&&(t.empty(),await Ut(i,t,"",new Cu.Component),s(i))}updateGraphAndSummaries(){var r,o;let t=this.config.settings||{},i=(r=t.aiSummaryAutoEnabled)!=null?r:!1,n=typeof t.aiSummaryAutoIntervalHours=="number"?t.aiSummaryAutoIntervalHours:-1;((o=t.aiSummaryManualEnabled)!=null?o:!0)&&this.aiSummarySectionEl&&!this.manualBtnEl&&(this.manualBtnEl=document.createElement("button"),this.manualBtnEl.innerText="\u307E\u3068\u3081\u751F\u6210",this.manualBtnEl.style.margin="10px 0 0 0",this.manualBtnEl.onclick=async()=>{this.manualBtnEl.disabled=!0,this.manualBtnEl.innerText="\u751F\u6210\u4E2D...","requestIdleCallback"in window?window.requestIdleCallback(()=>this.runSummary(!0)):setTimeout(()=>this.runSummary(!0),0),this.manualBtnEl.disabled=!1,this.manualBtnEl.innerText="\u307E\u3068\u3081\u751F\u6210"},this.aiSummarySectionEl.appendChild(this.manualBtnEl)),i&&n>0?(this.autoTimer&&clearInterval(this.autoTimer),this.autoTimer=setInterval(()=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>this.runSummary()):setTimeout(()=>this.runSummary(),0)},n*60*60*1e3),"requestIdleCallback"in window?window.requestIdleCallback(()=>this.runSummary()):setTimeout(()=>this.runSummary(),0)):"requestIdleCallback"in window?window.requestIdleCallback(()=>this.runSummary()):setTimeout(()=>this.runSummary(),0)}scheduleRender(){this.needsRender||(this.needsRender=!0,requestAnimationFrame(()=>{this.render(),this.needsRender=!1}))}onunload(){this.chart&&(this.chart.destroy(),this.chart=null),this.autoTimer&&(clearInterval(this.autoTimer),this.autoTimer=null),this.contentEl=null,this.canvasEl=null,this.todaySummaryEl=null,this.weekSummaryEl=null,this.aiSummarySectionEl=null,this.manualBtnEl=null}};var to=class{constructor(){this.id="reflection-widget";this.autoTimer=null;this.chart=null;this.lastChartData=null;this.lastTodaySummary=null;this.lastWeekSummary=null;this.ui=null}create(t,i,n){this.config=t,this.app=i,this.plugin=n;let s=document.createElement("div");return s.className="widget reflection-widget",this.ui=new Qr(this,s,t,i,n),this.ui.render(),s}updateExternalSettings(t,i){Object.assign(this.config.settings,t),this.refresh()}refresh(){var t;(t=this.ui)==null||t.scheduleRender()}};var Jt=new Map;Jt.set("pomodoro",Di);Jt.set("memo",Ci);Jt.set("calendar",sr);Jt.set("recent-notes",rr);Jt.set("theme-switcher",or);Jt.set("timer-stopwatch",Ii);Jt.set("file-view-widget",ar);Jt.set("tweet-widget",gr);Jt.set("reflection-widget",to);var Tl=er(Ml()),Dl=class extends be.FuzzySuggestModal{constructor(i,n,s,r){super(i);this.plugin=n,this.boardId=s,this.onChoose=r,this.setPlaceholder("\u8FFD\u52A0\u3059\u308B\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u7A2E\u985E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044")}getItems(){return Array.from(Jt.entries())}getItemText(i){return i[0]}async onChooseItem(i,n){let s=i[0],r=this.plugin.settings.boards.find(a=>a.id===this.boardId);if(!r){new be.Notice("\u5BFE\u8C61\u306E\u30DC\u30FC\u30C9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002");return}let o={id:`widget-${Date.now()}`,type:s,title:"",settings:{}};r.widgets.push(o),await this.plugin.saveSettings(this.boardId),new be.Notice(`'${s}' \u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u304C\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\u3002`),this.onChoose()}},rt=class{constructor(t,i,n){this.isOpen=!1;this.isClosing=!1;this.modeButtons=[];this.uiWidgetReferences=[];this.currentCustomWidth=null;this.isEditMode=!1;this.draggedElement=null;this.lastWidgetOrder=[];this.dragDropListeners=[];this.plugin=i,this.currentBoardConfig=(0,Tl.default)(n),this.currentBoardId=n.id,Object.values(rt.MODES).includes(this.currentBoardConfig.defaultMode)?this.currentMode=this.currentBoardConfig.defaultMode:this.currentMode=rt.MODES.RIGHT_THIRD,this.modalEl=document.createElement("div"),this.modalEl.classList.add("widget-board-panel-custom"),this.modalEl.setAttribute("data-board-id",this.currentBoardId),this.contentEl=document.createElement("div"),this.modalEl.appendChild(this.contentEl),this.modalEl.style.contain="layout style paint",this.modalEl.style.contentVisibility="auto"}updateBoardConfiguration(t){if(!this.isOpen)return;this.currentBoardConfig=(0,Tl.default)(t),this.currentBoardId=t.id,this.currentMode!==this.currentBoardConfig.defaultMode&&Object.values(rt.MODES).includes(this.currentBoardConfig.defaultMode)&&(this.currentMode=this.currentBoardConfig.defaultMode,this.applyMode(this.currentMode));let i=this.contentEl.querySelector(".wb-widget-container");i instanceof HTMLElement?this.loadWidgets(i):this.onOpen();let n=this.contentEl.querySelector(".wb-panel-header h3");n&&n.setText(`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9: ${this.currentBoardConfig.name}`)}open(){this.isOpen||(document.body.appendChild(this.modalEl),this.onOpen(),this.modalEl.classList.remove("is-open"),this.modalEl.offsetWidth,requestAnimationFrame(()=>{this.modalEl.classList.add("is-open")}))}onOpen(){document.body.classList.add("wb-modal-open"),this.isOpen=!0,this.isEditMode=!1;let{contentEl:t,modalEl:i}=this;t.empty(),this.uiWidgetReferences=[],this.currentBoardConfig.defaultMode==="custom-width"&&this.currentBoardConfig.customWidth?this.modalEl.style.width=this.currentBoardConfig.customWidth+"vw":this.currentBoardConfig.customWidth&&typeof this.currentBoardConfig.customWidth=="number"&&this.currentBoardConfig.customWidth>0&&this.currentBoardConfig.customWidth<=100?this.modalEl.style.width=this.currentBoardConfig.customWidth+"px":this.modalEl.style.width="",this.applyMode(this.currentMode);let n=t.createDiv({cls:"wb-panel-header"});n.createEl("h3",{text:`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9: ${this.currentBoardConfig.name}`});let s=n.createDiv({cls:"wb-panel-header-actions"});s.style.display="flex",s.style.gap="8px",s.style.marginLeft="auto",s.style.alignItems="center";let r=s.createEl("button",{cls:"wb-panel-settings-toggle"});(0,be.setIcon)(r,"settings"),r.setAttribute("aria-label","\u8A2D\u5B9A\u3092\u958B\u304F");let o=s.createEl("button",{cls:"wb-panel-close-btn"});(0,be.setIcon)(o,"x"),o.setAttribute("aria-label","\u30DC\u30FC\u30C9\u3092\u9589\u3058\u308B"),o.onclick=()=>this.close();let a=document.createElement("div");a.className="wb-panel-resize-handle wb-panel-resize-handle-right",i.appendChild(a);let c=!1,d=0,u=0,f=!1,g=null,p=z=>{if(!c)return;let Ft=z.clientX-d;g=Math.max(200,u+Ft),f||(f=!0,requestAnimationFrame(()=>{g!==null&&(i.style.width=g+"px"),f=!1}))},y=async z=>{if(!c)return;c=!1,document.body.style.cursor="",i.classList.remove("no-transition");let Ct=i.offsetWidth/window.innerWidth*100;this.currentCustomWidth=Ct,this.currentBoardConfig.customWidth=Ct;let te=this.plugin.settings.boards.find(Et=>Et.id===this.currentBoardId);te&&(te.customWidth=Ct,await this.plugin.saveSettings(this.currentBoardId)),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",y)};a.addEventListener("mousedown",z=>{c=!0,d=z.clientX,u=i.offsetWidth,document.body.style.cursor="ew-resize",i.classList.add("no-transition"),document.addEventListener("mousemove",p),document.addEventListener("mouseup",y),z.preventDefault()});let w=document.createElement("div");w.className="wb-panel-resize-handle wb-panel-resize-handle-left",i.insertBefore(w,i.firstChild);let v=!1,_=0,S=0,M=!1,D=null,T=z=>{if(!v)return;let Ft=z.clientX-_;D=Math.max(200,S-Ft),M||(M=!0,requestAnimationFrame(()=>{D!==null&&(i.style.width=D+"px"),M=!1}))},C=async z=>{if(!v)return;v=!1,document.body.style.cursor="",i.classList.remove("no-transition");let Ct=i.offsetWidth/window.innerWidth*100;this.currentCustomWidth=Ct,this.currentBoardConfig.customWidth=Ct;let te=this.plugin.settings.boards.find(Et=>Et.id===this.currentBoardId);te&&(te.customWidth=Ct,await this.plugin.saveSettings(this.currentBoardId)),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C)};w.addEventListener("mousedown",z=>{v=!0,_=z.clientX,S=i.offsetWidth,document.body.style.cursor="ew-resize",i.classList.add("no-transition"),z.preventDefault(),document.addEventListener("mousemove",T),document.addEventListener("mouseup",C)});let A=t.createDiv({cls:"wb-settings-panel"});A.hide();let I=A.createDiv({cls:"wb-settings-accordion"}),O=I.createDiv({cls:"wb-settings-accordion-header"}),L=O.createSpan({cls:"wb-settings-accordion-icon"});L.setText("\u25B6"),O.appendText("\u8868\u793A\u8A2D\u5B9A");let F=I.createDiv({cls:"wb-settings-accordion-body"});F.style.display="none";let V=A.createDiv({cls:"wb-settings-accordion"}),J=V.createDiv({cls:"wb-settings-accordion-header"}),X=J.createSpan({cls:"wb-settings-accordion-icon"});X.setText("\u25B6"),J.appendText("\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u8A2D\u5B9A");let U=V.createDiv({cls:"wb-settings-accordion-body"});U.style.display="none",O.addEventListener("click",()=>{let z=I.classList.toggle("open");L.style.transform=z?"rotate(90deg)":"",F.style.display=z?"block":"none"}),J.addEventListener("click",()=>{let z=V.classList.toggle("open");X.style.transform=z?"rotate(90deg)":"",U.style.display=z?"block":"none"});let Z=F.createDiv({cls:"wb-settings-panel-header"});Z.createEl("h4",{text:"\u30DC\u30FC\u30C9\u8A2D\u5B9A"});let ft=Z.createEl("button",{text:"\u5B8C\u4E86"}),at=F.createDiv({cls:"wb-display-controls-container"});this.modeButtons=[];let bt=[{label:"\u5DE6\u30D1\u30CD\u30EB",modes:[rt.MODES.LEFT_THIRD,rt.MODES.LEFT_HALF,rt.MODES.LEFT_TWO_THIRD]},{label:"\u4E2D\u592E\u30D1\u30CD\u30EB",modes:[rt.MODES.CENTER_THIRD,rt.MODES.CENTER_HALF]},{label:"\u53F3\u30D1\u30CD\u30EB",modes:[rt.MODES.RIGHT_THIRD,rt.MODES.RIGHT_HALF,rt.MODES.RIGHT_TWO_THIRD]},{label:"\u30AB\u30B9\u30BF\u30E0",modes:[rt.MODES.CUSTOM_WIDTH]}],Rt=at.createDiv({cls:"custom-width-anchor-btns"});Rt.style.display=this.currentMode===rt.MODES.CUSTOM_WIDTH?"":"none",this.modeButtons=bt.flatMap((z,Ft)=>{let Ct=at.createDiv({cls:"wb-mode-group"});Ct.createEl("span",{text:z.label,cls:"wb-mode-group-label"});let te=z.modes.map(Et=>{let ae="";Et===rt.MODES.RIGHT_THIRD?ae="\u53F3\u30D1\u30CD\u30EB\uFF0833vw\uFF09":Et===rt.MODES.RIGHT_HALF?ae="\u53F3\u30D1\u30CD\u30EB\uFF0850vw\uFF09":Et===rt.MODES.RIGHT_TWO_THIRD?ae="\u53F3\u30D1\u30CD\u30EB\uFF0866vw\uFF09":Et===rt.MODES.LEFT_TWO_THIRD?ae="\u5DE6\u30D1\u30CD\u30EB\uFF0866vw\uFF09":Et===rt.MODES.LEFT_HALF?ae="\u5DE6\u30D1\u30CD\u30EB\uFF0850vw\uFF09":Et===rt.MODES.LEFT_THIRD?ae="\u5DE6\u30D1\u30CD\u30EB\uFF0833vw\uFF09":Et===rt.MODES.CENTER_HALF?ae="\u4E2D\u592E\u30D1\u30CD\u30EB\uFF0850vw\uFF09":Et===rt.MODES.CENTER_THIRD?ae="\u4E2D\u592E\u30D1\u30CD\u30EB\uFF0833vw\uFF09":Et===rt.MODES.CUSTOM_WIDTH&&(ae="\u30AB\u30B9\u30BF\u30E0\u5E45");let Yn=Ct.createEl("button",{text:ae});return Yn.dataset.mode=Et,Yn.onClickEvent(async()=>{this.applyMode(Et);let Os=this.plugin.settings.boards.find(vo=>vo.id===this.currentBoardId);Os&&(Os.defaultMode=Et,await this.plugin.saveSettings(this.currentBoardId)),Rt.style.display=Et===rt.MODES.CUSTOM_WIDTH?"":"none"}),Yn});return Ft<bt.length-1&&at.createEl("span",{text:"",cls:"wb-mode-group-gap"}),te}),[{key:"left",label:"\u5DE6"},{key:"center",label:"\u4E2D\u592E"},{key:"right",label:"\u53F3"}].forEach(z=>{let Ft=Rt.createEl("button",{text:z.label});Ft.classList.toggle("active",this.currentBoardConfig.customWidthAnchor===z.key||!this.currentBoardConfig.customWidthAnchor&&z.key==="right"),Ft.onclick=async()=>{this.currentBoardConfig.customWidthAnchor=z.key;let Ct=this.plugin.settings.boards.find(te=>te.id===this.currentBoardId);Ct&&(Ct.customWidthAnchor=z.key,await this.plugin.saveSettings(this.currentBoardId)),Array.from(Rt.children).forEach(te=>te.classList.remove("active")),Ft.classList.add("active"),this.applyMode(rt.MODES.CUSTOM_WIDTH)}});let N=U.createDiv({cls:"wb-add-widget-container"}).createEl("button",{text:"\uFF0B \u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u8FFD\u52A0",cls:"wb-add-widget-btn"});N.onclick=()=>{new Dl(this.plugin.app,this.plugin,this.currentBoardId,()=>{let z=this.contentEl.querySelector(".wb-widget-container");z instanceof HTMLElement&&this.loadWidgets(z)}).open()};let oe=()=>{this.isEditMode=!this.isEditMode,r.classList.toggle("active",this.isEditMode),this.isEditMode?A.show():A.hide();let z=this.contentEl.querySelector(".wb-widget-container");z instanceof HTMLElement&&(z.classList.toggle("is-editing",this.isEditMode),this.loadWidgets(z))};r.onclick=oe,ft.onclick=oe;let Pe=t.createDiv({cls:"wb-widget-container"});this.loadWidgets(Pe),this.uiWidgetReferences.forEach(z=>{typeof z.handleShow=="function"&&z.handleShow()}),this.updateModeButtonsActiveState(),setTimeout(()=>{let z=this.contentEl.querySelector(".wb-page-search-bar-input");z&&z.addEventListener("focus",Ft=>{window.__WB_MEMO_EDITING__&&(Ft.preventDefault(),z.blur())})},0),requestAnimationFrame(()=>{i.classList.add("is-open")})}loadWidgets(t){let i=this.plugin.settings.boards.find(d=>d.id===this.currentBoardId),n=i?i.widgets:this.currentBoardConfig.widgets,s=n.map(d=>d.id);if(this.lastWidgetOrder.length===s.length&&this.lastWidgetOrder.every((d,u)=>d===s[u])===!1&&t.children.length===s.length){s.forEach((d,u)=>{let f=Array.from(t.children).find(g=>g.dataset&&g.dataset.widgetId===d);f&&t.appendChild(f)}),this.lastWidgetOrder=[...s];return}if(t.empty(),this.uiWidgetReferences=[],!n||n.length===0){t.createEl("p",{text:"\u3053\u306E\u30DC\u30FC\u30C9\u306B\u8868\u793A\u3059\u308B\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u304C\u3042\u308A\u307E\u305B\u3093\u3002"+(this.isEditMode?"\u300C\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u8FFD\u52A0\u300D\u304B\u3089\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002":"\u8A2D\u5B9A\u3092\u958B\u3044\u3066\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u3092\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002")}),this.lastWidgetOrder=[];return}let r=new IntersectionObserver((d,u)=>{d.forEach(f=>{if(f.isIntersecting){let g=f.target,p=g.dataset.widgetId,y=n.find(v=>v.id===p);if(!y||g.dataset.loaded==="1")return;let w=Jt.get(y.type);if(w){let v=["pomodoro","calendar","recent-notes"].includes(y.type),_=()=>{try{let S=new w,M=S.create(y,this.plugin.app,this.plugin);if(this.isEditMode){g.empty();let D=g.createEl("button",{cls:"wb-widget-delete-btn"});(0,be.setIcon)(D,"trash"),D.onclick=async()=>{confirm(`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u300C${y.title}\u300D\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F`)&&await this.deleteWidget(y.id)},g.appendChild(M)}else g.replaceWith(M);this.uiWidgetReferences.push(S),g.dataset.loaded="1",u.unobserve(g)}catch(S){g.empty();let M=g.createDiv({cls:"widget widget-error"});M.createEl("h4",{text:`${y.title||"(\u540D\u79F0\u672A\u8A2D\u5B9A)"} (\u30ED\u30FC\u30C9\u30A8\u30E9\u30FC)`}),M.createEl("p",{text:"\u3053\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u8AAD\u307F\u8FBC\u307F\u4E2D\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002"}),M.createEl("p",{text:S.message||""}),u.unobserve(g)}};v?setTimeout(_,0):_()}else{g.empty();let v=g.createDiv({cls:"widget widget-unknown"});v.createEl("h4",{text:`${y.title||"(\u540D\u79F0\u672A\u8A2D\u5B9A)"} (\u4E0D\u660E\u306A\u7A2E\u985E)`}),v.createEl("p",{text:`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u7A2E\u985E '${y.type}' \u306F\u767B\u9332\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002`}),u.unobserve(g)}}})},{root:t,rootMargin:"200px"}),o=0,a=5,c=()=>{let d=Math.min(o+a,n.length);for(;o<d;o++){let u=n[o],f;if(this.isEditMode){f=t.createDiv({cls:"wb-widget-edit-wrapper"}),f.setAttribute("draggable","true"),f.dataset.widgetId=u.id;let g=f.createEl("button",{cls:"wb-widget-delete-btn"});(0,be.setIcon)(g,"trash"),g.onclick=async()=>{confirm(`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u300C${u.title}\u300D\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F`)&&await this.deleteWidget(u.id)},f.createDiv({cls:"wb-widget-placeholder"}).setText("Loading...");let y=f.createDiv({cls:"wb-widget-drag-handle"});(0,be.setIcon)(y,"grip-vertical")}else f=t.createDiv(),f.dataset.widgetId=u.id,f.empty(),f.createDiv({cls:"wb-widget-placeholder",text:"Loading..."});r.observe(f)}o<n.length?requestAnimationFrame(c):(this.isEditMode&&this.addDragDropListeners(t),this.lastWidgetOrder=[...s])};c()}async deleteWidget(t){let i=this.plugin.settings.boards.find(s=>s.id===this.currentBoardId);if(!i)return;let n=i.widgets.findIndex(s=>s.id===t);if(n>-1){i.widgets.splice(n,1),await this.plugin.saveSettings(this.currentBoardId);let s=this.contentEl.querySelector(".wb-widget-container");s instanceof HTMLElement&&this.loadWidgets(s)}}addDragDropListeners(t){let i=this.handleDragStart.bind(this),n=this.handleDragOver.bind(this),s=this.handleDrop.bind(this),r=this.handleDragEnd.bind(this);t.addEventListener("dragstart",i),t.addEventListener("dragover",n),t.addEventListener("drop",s),t.addEventListener("dragend",r),this.dragDropListeners=[{type:"dragstart",handler:i},{type:"dragover",handler:n},{type:"drop",handler:s},{type:"dragend",handler:r}]}removeDragDropListeners(t){this.dragDropListeners.forEach(({type:i,handler:n})=>{t.removeEventListener(i,n)}),this.dragDropListeners=[]}handleDragStart(t){let i=t.target.closest(".wb-widget-edit-wrapper");i instanceof HTMLElement&&t.dataTransfer&&(this.draggedElement=i,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",i.dataset.widgetId||""),setTimeout(()=>i.classList.add("is-dragging"),0))}handleDragOver(t){if(t.preventDefault(),!this.draggedElement)return;let i=t.currentTarget,n=t.target.closest(".wb-widget-edit-wrapper");if(n&&n!==this.draggedElement){let s=n.getBoundingClientRect();t.clientY>s.top+s.height/2?i.insertBefore(this.draggedElement,n.nextSibling):i.insertBefore(this.draggedElement,n)}}async handleDrop(t){if(t.preventDefault(),!this.draggedElement)return;this.draggedElement.classList.remove("is-dragging");let i=t.currentTarget,n=Array.from(i.querySelectorAll(".wb-widget-edit-wrapper")).map(r=>r.dataset.widgetId).filter(r=>!!r),s=this.plugin.settings.boards.findIndex(r=>r.id===this.currentBoardId);if(s!==-1){let r=this.plugin.settings.boards[s],o=n.map(a=>r.widgets.find(c=>c.id===a)).filter(a=>!!a);r.widgets=o,await this.plugin.saveSettings(this.currentBoardId),this.updateBoardConfiguration(r)}this.draggedElement=null}handleDragEnd(t){this.draggedElement&&(this.draggedElement.classList.remove("is-dragging"),this.draggedElement=null)}applyMode(t){let{modalEl:i}=this,n=Object.values(rt.MODES);if(n.forEach(s=>i.classList.remove(s)),i.classList.remove("custom-width-right","custom-width-left","custom-width-center"),t===rt.MODES.CUSTOM_WIDTH){let s=this.currentBoardConfig.customWidthAnchor||"right";i.classList.add(`custom-width-${s}`);let r=(this.currentBoardConfig.customWidth||40)+"vw";i.style.width=r,i.style.setProperty("--custom-width",r),i.style.right="",i.style.left="",i.style.transform=""}else n.includes(t)&&i.classList.add(t),i.style.width="",i.style.right="",i.style.left="",i.style.transform="";this.currentMode=t,this.updateModeButtonsActiveState()}updateModeButtonsActiveState(){this.modeButtons.forEach(t=>{t.classList.toggle("active",t.dataset.mode===this.currentMode)})}close(){if(this.isClosing||!this.isOpen)return;this.isClosing=!0;let{modalEl:t}=this;this.plugin.widgetBoardModals&&this.plugin.widgetBoardModals.has(this.currentBoardId)&&this.plugin.widgetBoardModals.delete(this.currentBoardId);let i=this.contentEl.querySelector(".wb-widget-container");i instanceof HTMLElement&&this.removeDragDropListeners(i),t.classList.remove("is-open"),setTimeout(()=>{this.onClose();let n=`.widget-board-panel-custom[data-board-id='${this.currentBoardId}']`;requestAnimationFrame(()=>{let s=document.createDocumentFragment();document.querySelectorAll(n).forEach(r=>{r.parentElement===document.body&&s.appendChild(r)})})},300),document.body.classList.remove("wb-modal-open")}onClose(){this.isOpen=!1,this.isClosing=!1,this.uiWidgetReferences.forEach(i=>{typeof i.handleHide=="function"&&i.handleHide()});let{contentEl:t}=this;t.empty(),this.uiWidgetReferences=[],document.body.classList.remove("wb-modal-open")}},Ot=rt;Ot.MODES={RIGHT_HALF:"mode-right-half",RIGHT_THIRD:"mode-right-third",RIGHT_TWO_THIRD:"mode-right-two-third",LEFT_TWO_THIRD:"mode-left-two-third",LEFT_HALF:"mode-left-half",LEFT_THIRD:"mode-left-third",CENTER_HALF:"mode-center-half",CENTER_THIRD:"mode-center-third",CUSTOM_WIDTH:"custom-width"};var B=require("obsidian");var kl={pomodoro:"\u30DD\u30E2\u30C9\u30FC\u30ED\u30BF\u30A4\u30DE\u30FC",memo:"\u30E1\u30E2","timer-stopwatch":"\u30BF\u30A4\u30DE\u30FC/\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1",calendar:"\u30AB\u30EC\u30F3\u30C0\u30FC","recent-notes":"\u6700\u8FD1\u7DE8\u96C6\u3057\u305F\u30CE\u30FC\u30C8","theme-switcher":"\u30C6\u30FC\u30DE\u5207\u308A\u66FF\u3048","file-view":"\u30D5\u30A1\u30A4\u30EB\u30D3\u30E5\u30FC\u30A2","tweet-widget":"\u3064\u3076\u3084\u304D","reflection-widget":"\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8"},co=class extends B.PluginSettingTab{constructor(i,n){super(i,n);this.selectedBoardId=null;this.boardDropdownEl=null;this.boardGroupBodyEl=null;this.plugin=n,this.plugin.settings.boards.length>0&&(this.selectedBoardId=this.plugin.settings.lastOpenedBoardId||this.plugin.settings.boards[0].id)}display(){let{containerEl:i}=this;i.empty(),i.createEl("h2",{text:"\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u8A2D\u5B9A"});let n=new B.Setting(i).setName("\u30D9\u30FC\u30B9\u30D5\u30A9\u30EB\u30C0\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\uFF09").setDesc(`\u5168\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u5171\u901A\u306E\u30C7\u30FC\u30BF\u4FDD\u5B58\u5148\u3068\u306A\u308BVault\u5185\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u6307\u5B9A\u3057\u307E\u3059\uFF08\u4F8B: myfolder\uFF09\u3002
\u3053\u306E\u30D5\u30A9\u30EB\u30C0\u914D\u4E0B\u306B\u5404\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u30C7\u30FC\u30BF\u3084\u30CE\u30FC\u30C8\u304C\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002`);n.addText(p=>{p.setPlaceholder("myfolder").setValue(this.plugin.settings.baseFolder||"").onChange(async y=>{}),p.inputEl.addEventListener("blur",async()=>{let y=p.inputEl.value.trim();if(y.startsWith("/")||y.match(/^([A-Za-z]:\\|\\|~)/)){new B.Notice("Vault\u5185\u306E\u76F8\u5BFE\u30D1\u30B9\u306E\u307F\u6307\u5B9A\u3067\u304D\u307E\u3059\u3002\u7D76\u5BFE\u30D1\u30B9\u3084Vault\u5916\u306F\u4E0D\u53EF\u3067\u3059\u3002"),p.setValue(this.plugin.settings.baseFolder||"");return}let w=this.app.vault.getAbstractFileByPath(y);if(!w||w.constructor.name!=="TFolder"){new B.Notice("Vault\u5185\u306E\u30D5\u30A9\u30EB\u30C0\u306E\u307F\u6307\u5B9A\u3067\u304D\u307E\u3059\u3002"),p.setValue(this.plugin.settings.baseFolder||"");return}this.plugin.settings.baseFolder=y,await this.plugin.saveSettings()}),n.addExtraButton(y=>{y.setIcon("search"),y.setTooltip("Vault\u5185\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u30B5\u30B8\u30A7\u30B9\u30C8"),y.onClick(()=>{let w=this.app.vault.getAllLoadedFiles().filter(_=>_ instanceof B.TFolder);class v extends B.FuzzySuggestModal{constructor(M,D,T){super(M);this.folders=D;this.onChoose=T;this.setPlaceholder("Vault\u5185\u306E\u30D5\u30A9\u30EB\u30C0\u3092\u691C\u7D22...")}getItems(){return this.folders}getItemText(M){return M.path}onChooseItem(M){this.onChoose(M)}}new v(this.app,w,_=>{p.setValue(_.path),this.plugin.settings.baseFolder=_.path,this.plugin.saveSettings()}).open()})})}),new B.Setting(i).setName("\u30C7\u30D0\u30C3\u30B0\u30ED\u30B0\u3092\u6709\u52B9\u306B\u3059\u308B").setDesc("\u30B3\u30F3\u30BD\u30FC\u30EB\u306B\u958B\u767A\u7528\u306E\u30C7\u30D0\u30C3\u30B0\u60C5\u5831\u3092\u51FA\u529B\u3057\u307E\u3059\u3002").addToggle(p=>{var y;p.setValue((y=this.plugin.settings.debugLogging)!=null?y:!1).onChange(async w=>{this.plugin.settings.debugLogging=w,await this.plugin.saveSettings()})});let s=(p,y=!1)=>{let w=i.createDiv({cls:"wb-accordion"+(y?" wb-accordion-open":"")}),v=w.createDiv({cls:"wb-accordion-header"});v.createSpan({cls:"wb-accordion-icon"}).setText("\u25B6"),v.appendText(p);let S=w.createDiv({cls:"wb-accordion-body"});return y?v.addClass("wb-accordion-open"):S.style.display="none",v.addEventListener("click",M=>{if(M.currentTarget!==M.target)return;let D=w.classList.toggle("wb-accordion-open");v.classList.toggle("wb-accordion-open"),S.style.display=D?"":"none"}),{acc:w,header:v,body:S}},r=s("\u30DD\u30E2\u30C9\u30FC\u30ED\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09",!1);new B.Setting(r.body).setName("\u901A\u77E5\u97F3").setDesc("\u5168\u3066\u306E\u30DD\u30E2\u30C9\u30FC\u30ED\u30BF\u30A4\u30DE\u30FC\u3067\u4F7F\u3046\u901A\u77E5\u97F3\uFF08\u500B\u5225\u8A2D\u5B9A\u3088\u308A\u512A\u5148\uFF09").addDropdown(p=>{p.addOption("off","\u306A\u3057"),p.addOption("default_beep","\u30D3\u30FC\u30D7\u97F3"),p.addOption("bell","\u30D9\u30EB"),p.addOption("chime","\u30C1\u30E3\u30A4\u30E0"),p.setValue(this.plugin.settings.pomodoroNotificationSound||"default_beep").onChange(async y=>{this.plugin.settings.pomodoroNotificationSound=y,await this.plugin.saveSettings()})}).addExtraButton(p=>{p.setIcon("play"),p.setTooltip("\u97F3\u3092\u805E\u304F"),p.onClick(()=>{var y;bf(this.plugin,this.plugin.settings.pomodoroNotificationSound||"default_beep",(y=this.plugin.settings.pomodoroNotificationVolume)!=null?y:.2)})}),new B.Setting(r.body).setName("\u901A\u77E5\u97F3\u91CF").setDesc("\u901A\u77E5\u97F3\u306E\u97F3\u91CF\uFF080.0\u301C1.0\uFF09").addSlider(p=>{var w,v,_;p.setLimits(0,1,.01).setValue((w=this.plugin.settings.pomodoroNotificationVolume)!=null?w:.2);let y=document.createElement("span");y.style.marginLeft="12px",y.style.fontWeight="bold",y.textContent=String(((v=this.plugin.settings.pomodoroNotificationVolume)!=null?v:.2).toFixed(2)),(_=p.sliderEl.parentElement)==null||_.appendChild(y),p.onChange(async S=>{this.plugin.settings.pomodoroNotificationVolume=S,y.textContent=String(S.toFixed(2)),await this.plugin.saveSettings()})}),new B.Setting(r.body).setName("\u30DD\u30E2\u30C9\u30FC\u30ED\u7D42\u4E86\u6642\u306B\u8A72\u5F53\u30DC\u30FC\u30C9\u3092\u81EA\u52D5\u3067\u958B\u304F").setDesc("ON\u306B\u3059\u308B\u3068\u3001\u30DD\u30E2\u30C9\u30FC\u30ED\u304C\u7D42\u4E86\u3057\u305F\u3068\u304D\u306B\u3053\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u304C\u5C5E\u3059\u308B\u30DC\u30FC\u30C9\u3092\u81EA\u52D5\u3067\u958B\u304D\u307E\u3059\u3002").addToggle(p=>{var y;p.setValue((y=this.plugin.settings.openBoardOnPomodoroEnd)!=null?y:!1).onChange(async w=>{this.plugin.settings.openBoardOnPomodoroEnd=w,await this.plugin.saveSettings()})}),new B.Setting(r.body).setName("\u30DD\u30E2\u30C9\u30FC\u30ED\u7D42\u4E86\u6642\u306B\u81EA\u52D5\u3067\u6B21\u306E\u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u958B\u59CB").setDesc("ON\u306B\u3059\u308B\u3068\u3001\u30DD\u30E2\u30C9\u30FC\u30ED\u304C\u7D42\u4E86\u3057\u305F\u3068\u304D\u306B\u81EA\u52D5\u3067\u6B21\u306E\u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u958B\u59CB\u3057\u307E\u3059\u3002").addToggle(p=>{var y;p.setValue((y=this.plugin.settings.autoStartNextPomodoroSession)!=null?y:!1).onChange(async w=>{this.plugin.settings.autoStartNextPomodoroSession=w,await this.plugin.saveSettings()})}),new B.Setting(r.body).setName("\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F").setDesc("\u5168\u3066\u306E\u30DD\u30E2\u30C9\u30FC\u30ED\u30BF\u30A4\u30DE\u30FC\u3067\u4F7F\u3046\u30ED\u30B0\u8A18\u9332\u5F62\u5F0F\uFF08\u500B\u5225\u8A2D\u5B9A\u3088\u308A\u512A\u5148\uFF09").addDropdown(p=>{p.addOption("none","\u4FDD\u5B58\u3057\u306A\u3044"),p.addOption("csv","CSV"),p.addOption("json","JSON"),p.addOption("markdown","Markdown"),p.setValue(this.plugin.settings.pomodoroExportFormat||"none").onChange(async y=>{this.plugin.settings.pomodoroExportFormat=y,await this.plugin.saveSettings()})});let o=s("\u30BF\u30A4\u30DE\u30FC\uFF0F\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09",!1);new B.Setting(o.body).setName("\u901A\u77E5\u97F3").setDesc("\u5168\u3066\u306E\u30BF\u30A4\u30DE\u30FC\uFF0F\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1\u3067\u4F7F\u3046\u901A\u77E5\u97F3\uFF08\u500B\u5225\u8A2D\u5B9A\u3088\u308A\u512A\u5148\uFF09").addDropdown(p=>{p.addOption("off","\u306A\u3057"),p.addOption("default_beep","\u30D3\u30FC\u30D7\u97F3"),p.addOption("bell","\u30D9\u30EB"),p.addOption("chime","\u30C1\u30E3\u30A4\u30E0"),p.setValue(this.plugin.settings.timerStopwatchNotificationSound||"default_beep").onChange(async y=>{this.plugin.settings.timerStopwatchNotificationSound=y,await this.plugin.saveSettings()})}).addExtraButton(p=>{p.setIcon("play"),p.setTooltip("\u97F3\u3092\u805E\u304F"),p.onClick(()=>{var y;bf(this.plugin,this.plugin.settings.timerStopwatchNotificationSound||"default_beep",(y=this.plugin.settings.timerStopwatchNotificationVolume)!=null?y:.5)})}),new B.Setting(o.body).setName("\u901A\u77E5\u97F3\u91CF").setDesc("\u901A\u77E5\u97F3\u306E\u97F3\u91CF\uFF080.0\u301C1.0\uFF09").addSlider(p=>{var w,v,_;p.setLimits(0,1,.01).setValue((w=this.plugin.settings.timerStopwatchNotificationVolume)!=null?w:.5);let y=document.createElement("span");y.style.marginLeft="12px",y.style.fontWeight="bold",y.textContent=String(((v=this.plugin.settings.timerStopwatchNotificationVolume)!=null?v:.5).toFixed(2)),(_=p.sliderEl.parentElement)==null||_.appendChild(y),p.onChange(async S=>{this.plugin.settings.timerStopwatchNotificationVolume=S,y.textContent=String(S.toFixed(2)),await this.plugin.saveSettings()})});let a=s("LLM\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09",!1);a.body.createEl("h4",{text:"Gemini"}),new B.Setting(a.body).setName("Gemini API\u30AD\u30FC").setDesc("Google Gemini API\u306E\u30AD\u30FC\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002").addText(p=>{var w,v,_;p.inputEl.type="password",p.setPlaceholder("sk-...").setValue(Ve(((v=(w=this.plugin.settings.llm)==null?void 0:w.gemini)==null?void 0:v.apiKey)||"")).onChange(async S=>{});let y=document.createElement("button");y.type="button",y.textContent="\u8868\u793A",y.style.marginLeft="8px",y.onclick=()=>{p.inputEl.type==="password"?(p.inputEl.type="text",y.textContent="\u975E\u8868\u793A"):(p.inputEl.type="password",y.textContent="\u8868\u793A")},(_=p.inputEl.parentElement)==null||_.appendChild(y),p.inputEl.addEventListener("blur",async()=>{let S=p.inputEl.value.trim();this.plugin.settings.llm||(this.plugin.settings.llm={gemini:{apiKey:"",model:"gemini-2.0-flash-exp"}}),this.plugin.settings.llm.gemini||(this.plugin.settings.llm.gemini={apiKey:"",model:"gemini-2.0-flash-exp"}),this.plugin.settings.llm.gemini.apiKey=Hc(S),await this.plugin.saveSettings()})}),new B.Setting(a.body).setName("\u30E2\u30C7\u30EB\u540D").setDesc("\u4F8B: gemini-2.0-flash-exp").addText(p=>{var y,w;p.setValue(((w=(y=this.plugin.settings.llm)==null?void 0:y.gemini)==null?void 0:w.model)||"gemini-2.0-flash-exp").onChange(async v=>{this.plugin.settings.llm||(this.plugin.settings.llm={gemini:{apiKey:"",model:"gemini-2.0-flash-exp"}}),this.plugin.settings.llm.gemini.model=v,await this.plugin.saveSettings()})}),new B.Setting(a.body).setName("\u30E6\u30FC\u30B6\u30D7\u30ED\u30F3\u30D7\u30C8\uFF08\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8 \u4ECA\u65E5\u7528\uFF09").setDesc("AI\u8981\u7D04\u3067\u4F7F\u3046\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\uFF08\u4ECA\u65E5\u306E\u307E\u3068\u3081\uFF09\u3002{posts}\u304C\u6295\u7A3F\u4E00\u89A7\u306B\u7F6E\u63DB\u3055\u308C\u307E\u3059\u3002\u7A7A\u6B04\u306E\u5834\u5408\u306F\u30C7\u30D5\u30A9\u30EB\u30C8\u30D7\u30ED\u30F3\u30D7\u30C8\u304C\u4F7F\u308F\u308C\u307E\u3059\u3002").addTextArea(p=>{p.setPlaceholder("\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u5165\u529B").setValue(this.plugin.settings.userSummaryPromptToday||"").onChange(async y=>{this.plugin.settings.userSummaryPromptToday=y,await this.plugin.saveSettings()})}),new B.Setting(a.body).setName("\u30E6\u30FC\u30B6\u30D7\u30ED\u30F3\u30D7\u30C8\uFF08\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8 \u4ECA\u9031\u7528\uFF09").setDesc("AI\u8981\u7D04\u3067\u4F7F\u3046\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\uFF08\u4ECA\u9031\u306E\u307E\u3068\u3081\uFF09\u3002{posts}\u304C\u6295\u7A3F\u4E00\u89A7\u306B\u7F6E\u63DB\u3055\u308C\u307E\u3059\u3002\u7A7A\u6B04\u306E\u5834\u5408\u306F\u30C7\u30D5\u30A9\u30EB\u30C8\u30D7\u30ED\u30F3\u30D7\u30C8\u304C\u4F7F\u308F\u308C\u307E\u3059\u3002").addTextArea(p=>{p.setPlaceholder("\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u5165\u529B").setValue(this.plugin.settings.userSummaryPromptWeek||"").onChange(async y=>{this.plugin.settings.userSummaryPromptWeek=y,await this.plugin.saveSettings()})}),new B.Setting(a.body).setName("\u30E6\u30FC\u30B6\u30D7\u30ED\u30F3\u30D7\u30C8\uFF08\u3064\u3076\u3084\u304D\u7528\uFF09").setDesc("\u3064\u3076\u3084\u304D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306EAI\u8FD4\u4FE1\u3067\u4F7F\u3046\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\u3002{tweet}\u3084{postDate}\u304C\u6295\u7A3F\u5185\u5BB9\u30FB\u65E5\u6642\u306B\u7F6E\u63DB\u3055\u308C\u307E\u3059\u3002\u7A7A\u6B04\u306E\u5834\u5408\u306F\u30C7\u30D5\u30A9\u30EB\u30C8\u30D7\u30ED\u30F3\u30D7\u30C8\u304C\u4F7F\u308F\u308C\u307E\u3059\u3002").addTextArea(p=>{p.setPlaceholder("\u30AB\u30B9\u30BF\u30E0\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u5165\u529B").setValue(this.plugin.settings.userTweetPrompt||"").onChange(async y=>{this.plugin.settings.userTweetPrompt=y,await this.plugin.saveSettings()})});let c=s("\u3064\u3076\u3084\u304D\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09",!1);new B.Setting(c.body).setName("AI\u30EA\u30D7\u30E9\u30A4\u3092\u30C8\u30EA\u30AC\u30FC\u30EF\u30FC\u30C9\u306A\u3057\u3067\u3082\u81EA\u52D5\u767A\u706B\u3055\u305B\u308B").setDesc("ON\u306B\u3059\u308B\u3068\u300C@ai\u300D\u3084\u300C#ai-reply\u300D\u306A\u3069\u306E\u30C8\u30EA\u30AC\u30FC\u30EF\u30FC\u30C9\u304C\u306A\u304F\u3066\u3082\u3001\u5168\u3066\u306E\u6295\u7A3F\u304CAI\u30EA\u30D7\u30E9\u30A4\u5019\u88DC\u306B\u306A\u308A\u307E\u3059\u3002").addToggle(p=>{var y;p.setValue((y=this.plugin.settings.aiReplyTriggerless)!=null?y:!1).onChange(async w=>{this.plugin.settings.aiReplyTriggerless=w,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("AI\u30EA\u30D7\u30E9\u30A4\u306E1\u5206\u3042\u305F\u308A\u767A\u706B\u4E0A\u9650\uFF08RPM\uFF09").setDesc("-1\u3067\u7121\u5236\u9650\u30020\u306F\u767A\u706B\u3057\u307E\u305B\u3093\u3002").addText(p=>{var y;p.setPlaceholder("-1\uFF08\u7121\u5236\u9650\uFF09").setValue(String((y=this.plugin.settings.aiReplyRpm)!=null?y:2)).onChange(async w=>{let v=parseInt(w,10);isNaN(v)&&(v=2),this.plugin.settings.aiReplyRpm=v,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("AI\u30EA\u30D7\u30E9\u30A4\u306E1\u65E5\u3042\u305F\u308A\u767A\u706B\u4E0A\u9650\uFF08RPD\uFF09").setDesc("-1\u3067\u7121\u5236\u9650\u30020\u306F\u767A\u706B\u3057\u307E\u305B\u3093\u3002").addText(p=>{var y;p.setPlaceholder("-1\uFF08\u7121\u5236\u9650\uFF09").setValue(String((y=this.plugin.settings.aiReplyRpd)!=null?y:10)).onChange(async w=>{let v=parseInt(w,10);isNaN(v)&&(v=10),this.plugin.settings.aiReplyRpd=v,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("\u30E6\u30FC\u30B6\u30FC\u30A2\u30A4\u30B3\u30F3URL").setDesc("\u3064\u3076\u3084\u304D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u3067\u4F7F\u3046\u30A2\u30D0\u30BF\u30FC\u753B\u50CF\u306EURL\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B: https://.../avatar.png\uFF09").addText(p=>{p.setPlaceholder("https://example.com/avatar.png").setValue(this.plugin.settings.tweetWidgetAvatarUrl||"").onChange(async y=>{}),p.inputEl.addEventListener("blur",async()=>{let y=p.inputEl.value.trim();this.plugin.settings.tweetWidgetAvatarUrl=y,await this.plugin.saveSettings(),this.plugin.settings.boards.forEach(w=>{w.widgets.filter(v=>v.type==="tweet-widget").forEach(v=>{v.settings||(v.settings={}),v.settings.avatarUrl=y})})})}),new B.Setting(c.body).setName("AI\u306E\u4F1A\u8A71\u5C65\u6B74\u3092\u8868\u793A").setDesc("AI\u30EA\u30D7\u30E9\u30A4\u306E\u4E0B\u306B\u4F1A\u8A71\u5C65\u6B74\u3092\u8868\u793A\u3059\u308B\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8: \u30AA\u30D5\uFF09").addToggle(p=>{var y;p.setValue((y=this.plugin.settings.showAiHistory)!=null?y:!1).onChange(async w=>{this.plugin.settings.showAiHistory=w,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("AI\u30A2\u30D0\u30BF\u30FC\u753B\u50CFURL\u30EA\u30B9\u30C8").setDesc("AI\u3054\u3068\u306B\u4F7F\u3044\u5206\u3051\u308B\u30A2\u30D0\u30BF\u30FC\u753B\u50CF\u306EURL\u3092\u30AB\u30F3\u30DE\u533A\u5207\u308A\u3067\u6307\u5B9A\uFF08\u4F8B: https://.../ai1.png, https://.../ai2.png\uFF09").addTextArea(p=>{p.setPlaceholder("https://example.com/ai1.png, https://example.com/ai2.png").setValue(this.plugin.settings.aiAvatarUrls||"").onChange(async y=>{this.plugin.settings.aiAvatarUrls=y,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("AI\u30EA\u30D7\u30E9\u30A4\u306E\u6700\u5C0F\u9045\u5EF6\uFF08ms\uFF09").setDesc("AI\u30EA\u30D7\u30E9\u30A4\u3092\u9001\u308B\u307E\u3067\u306E\u6700\u5C0F\u5F85\u6A5F\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09\u3002\u4F8B: 1500 = 1.5\u79D2").addText(p=>{var y;p.setPlaceholder("1500").setValue(String((y=this.plugin.settings.aiReplyDelayMinMs)!=null?y:1500)).onChange(async w=>{let v=parseInt(w,10);(isNaN(v)||v<0)&&(v=1500),this.plugin.settings.aiReplyDelayMinMs=v,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("AI\u30EA\u30D7\u30E9\u30A4\u306E\u6700\u5927\u9045\u5EF6\uFF08ms\uFF09").setDesc("AI\u30EA\u30D7\u30E9\u30A4\u3092\u9001\u308B\u307E\u3067\u306E\u6700\u5927\u5F85\u6A5F\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09\u3002\u4F8B: 7000 = 7\u79D2").addText(p=>{var y;p.setPlaceholder("7000").setValue(String((y=this.plugin.settings.aiReplyDelayMaxMs)!=null?y:7e3)).onChange(async w=>{let v=parseInt(w,10);(isNaN(v)||v<0)&&(v=7e3),this.plugin.settings.aiReplyDelayMaxMs=v,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("\u3064\u3076\u3084\u304D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u8868\u793A\u671F\u9593").setDesc("\u3064\u3076\u3084\u304D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u3092\u958B\u3044\u305F\u3068\u304D\u306B\u6700\u521D\u306B\u8868\u793A\u3055\u308C\u308B\u671F\u9593\u3092\u9078\u629E\u3067\u304D\u307E\u3059\u3002").addDropdown(p=>{p.addOption("all","\u5168\u671F\u9593"),p.addOption("today","\u4ECA\u65E5"),p.addOption("1d","1\u65E5"),p.addOption("3d","3\u65E5"),p.addOption("7d","1\u9031\u9593"),p.addOption("30d","1\u30F6\u6708"),p.addOption("custom","\u30AB\u30B9\u30BF\u30E0"),p.setValue(this.plugin.settings.defaultTweetPeriod||"all").onChange(async y=>{this.plugin.settings.defaultTweetPeriod=y,await this.plugin.saveSettings()})}),new B.Setting(c.body).setName("\u3064\u3076\u3084\u304D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u30AB\u30B9\u30BF\u30E0\u671F\u9593\uFF08\u65E5\u6570\uFF09").setDesc("\u30C7\u30D5\u30A9\u30EB\u30C8\u671F\u9593\u304C\u300C\u30AB\u30B9\u30BF\u30E0\u300D\u306E\u5834\u5408\u306B\u4F7F\u308F\u308C\u307E\u3059\u3002").addText(p=>{var y;p.setPlaceholder("1").setValue(String((y=this.plugin.settings.defaultTweetCustomDays)!=null?y:1)).onChange(async w=>{let v=parseInt(w,10);(isNaN(v)||v<1)&&(v=1),this.plugin.settings.defaultTweetCustomDays=v,await this.plugin.saveSettings()})});let d=s("\u30AB\u30EC\u30F3\u30C0\u30FC\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09",!1);new B.Setting(d.body).setName("\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u30D5\u30A1\u30A4\u30EB\u540D\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\uFF08\u5168\u4F53\uFF09").setDesc("\u4F8B: YYYY-MM-DD, YYYY-MM-DD.md \u306A\u3069\u3002YYYY, MM, DD\u304C\u65E5\u4ED8\u306B\u7F6E\u63DB\u3055\u308C\u307E\u3059\u3002\u30AB\u30EC\u30F3\u30C0\u30FC\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u306B\u306A\u308A\u307E\u3059\u3002Moment.js\u306E\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u30EA\u30D5\u30A1\u30EC\u30F3\u30B9\uFF08https://momentjs.com/docs/#/displaying/format/\uFF09\u306B\u6E96\u62E0\u3002").addText(p=>{p.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.calendarDailyNoteFormat||"YYYY-MM-DD").onChange(async y=>{}),p.inputEl.addEventListener("blur",async()=>{let y=p.inputEl.value.trim();this.plugin.settings.calendarDailyNoteFormat=y||"YYYY-MM-DD",await this.plugin.saveSettings()})});let u=s("\u30DC\u30FC\u30C9\u7BA1\u7406",!1);this.renderBoardManagementUI(u.body);let f=u.body.createDiv({cls:"selected-board-settings-section"});if(this.selectedBoardId)this.renderSelectedBoardSettingsUI(f);else{let p=this.plugin.settings.boards.length===0?"\u5229\u7528\u53EF\u80FD\u306A\u30DC\u30FC\u30C9\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u300C\u30DC\u30FC\u30C9\u7BA1\u7406\u300D\u304B\u3089\u65B0\u3057\u3044\u30DC\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002":"\u8A2D\u5B9A\u3059\u308B\u30DC\u30FC\u30C9\u3092\u300C\u30DC\u30FC\u30C9\u7BA1\u7406\u300D\u304B\u3089\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002";f.createEl("p",{text:p})}let g=s("\u30DC\u30FC\u30C9\u30B0\u30EB\u30FC\u30D7\u7BA1\u7406",!1);this.boardGroupBodyEl=g.body,this.renderBoardGroupManagementUI(this.boardGroupBodyEl)}renderBoardManagementUI(i){i.empty(),new B.Setting(i).setName("\u30DC\u30FC\u30C9\u9078\u629E").setDesc("\u8A2D\u5B9A\u3092\u7DE8\u96C6\u3059\u308B\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002").addDropdown(n=>{this.plugin.settings.boards.length===0?(n.addOption("","\u5229\u7528\u53EF\u80FD\u306A\u30DC\u30FC\u30C9\u304C\u3042\u308A\u307E\u305B\u3093"),n.setDisabled(!0)):(this.plugin.settings.boards.forEach(s=>{n.addOption(s.id,s.name)}),n.setValue(this.selectedBoardId||this.plugin.settings.boards[0].id)),this.boardDropdownEl=n.selectEl,n.onChange(s=>{this.selectedBoardId=s,this.plugin.settings.lastOpenedBoardId=s,this.plugin.saveSettings();let r=this.containerEl.querySelector(".selected-board-settings-section");r&&this.renderSelectedBoardSettingsUI(r)})}),new B.Setting(i).addButton(n=>n.setButtonText("\u65B0\u3057\u3044\u30DC\u30FC\u30C9\u3092\u8FFD\u52A0").setCta().onClick(async()=>{let s="board-"+Date.now(),r={...JSON.parse(JSON.stringify(ni)),id:s,name:`\u65B0\u3057\u3044\u30DC\u30FC\u30C9 ${this.plugin.settings.boards.length+1}`,widgets:[]};if(this.plugin.settings.boards.push(r),this.selectedBoardId=s,this.plugin.settings.lastOpenedBoardId=s,await this.plugin.saveSettings(),this.boardDropdownEl){let a=document.createElement("option");a.value=s,a.textContent=r.name,this.boardDropdownEl.appendChild(a),this.boardDropdownEl.value=s}let o=this.containerEl.querySelector(".selected-board-settings-section");o&&this.renderSelectedBoardSettingsUI(o)}))}renderSelectedBoardSettingsUI(i){let n=i.parentElement;if(n){let g=i.cloneNode(!1);n.replaceChild(g,i),i=g}if(i.empty(),!this.selectedBoardId){let g=this.plugin.settings.boards.length===0?"\u5229\u7528\u53EF\u80FD\u306A\u30DC\u30FC\u30C9\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u300C\u30DC\u30FC\u30C9\u7BA1\u7406\u300D\u304B\u3089\u65B0\u3057\u3044\u30DC\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002":"\u8A2D\u5B9A\u3059\u308B\u30DC\u30FC\u30C9\u3092\u300C\u30DC\u30FC\u30C9\u7BA1\u7406\u300D\u304B\u3089\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002";i.createEl("p",{text:g});return}let s=this.plugin.settings.boards.find(g=>g.id===this.selectedBoardId);if(!s){i.createEl("p",{text:"\u9078\u629E\u3055\u308C\u305F\u30DC\u30FC\u30C9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002"}),this.selectedBoardId=null,this.plugin.settings.lastOpenedBoardId=void 0,this.plugin.saveSettings();return}new B.Setting(i).setName("\u30DC\u30FC\u30C9\u540D").addText(g=>g.setValue(s.name).onChange(async p=>{}).inputEl.addEventListener("blur",async()=>{let p=g.inputEl.value;if(s.name=p,await this.plugin.saveSettings(s.id),this.boardDropdownEl)for(let y of Array.from(this.boardDropdownEl.options))y.value===s.id&&(y.textContent=p)})),new B.Setting(i).setName("\u30C7\u30D5\u30A9\u30EB\u30C8\u8868\u793A\u30E2\u30FC\u30C9").setDesc("\u3053\u306E\u30DC\u30FC\u30C9\u3092\u958B\u3044\u305F\u3068\u304D\u306E\u521D\u671F\u8868\u793A\u30E2\u30FC\u30C9\u3002").addDropdown(g=>{g.addOption(Ot.MODES.LEFT_THIRD,"\u5DE6\u30D1\u30CD\u30EB\uFF0833vw\uFF09"),g.addOption(Ot.MODES.LEFT_HALF,"\u5DE6\u30D1\u30CD\u30EB\uFF0850vw\uFF09"),g.addOption(Ot.MODES.LEFT_TWO_THIRD,"\u5DE6\u30D1\u30CD\u30EB\uFF0866vw\uFF09"),g.addOption(Ot.MODES.CENTER_THIRD,"\u4E2D\u592E\u30D1\u30CD\u30EB\uFF0833vw\uFF09"),g.addOption(Ot.MODES.CENTER_HALF,"\u4E2D\u592E\u30D1\u30CD\u30EB\uFF0850vw\uFF09"),g.addOption(Ot.MODES.RIGHT_THIRD,"\u53F3\u30D1\u30CD\u30EB\uFF0833vw\uFF09"),g.addOption(Ot.MODES.RIGHT_HALF,"\u53F3\u30D1\u30CD\u30EB\uFF0850vw\uFF09"),g.addOption(Ot.MODES.RIGHT_TWO_THIRD,"\u53F3\u30D1\u30CD\u30EB\uFF0866vw\uFF09"),g.addOption("custom-width","\u30AB\u30B9\u30BF\u30E0\u5E45\uFF08vw\uFF09"),g.setValue(s.defaultMode).onChange(async p=>{(Object.values(Ot.MODES).includes(p)||p==="custom-width")&&(s.defaultMode=p,await this.plugin.saveSettings(s.id),p==="custom-width"&&r?r.style.display="":r&&(r.style.display="none"))})});let r=null;r=new B.Setting(i).setName("\u30AB\u30B9\u30BF\u30E0\u5E45\uFF08vw\uFF09").setDesc("\u30D1\u30CD\u30EB\u306E\u5E45\u3092vw\u5358\u4F4D\u3067\u6307\u5B9A\u3057\u307E\u3059\uFF08\u4F8B: 40\uFF09").addText(g=>{g.setPlaceholder("\u4F8B: 40").setValue(s.customWidth?String(s.customWidth):"").onChange(async p=>{}),g.inputEl.addEventListener("blur",async()=>{let p=g.inputEl.value,y=parseFloat(p);isNaN(y)?new B.Notice("\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08vw\u5358\u4F4D\uFF09"):(s.customWidth=y,await this.plugin.saveSettings(s.id),(y<=0||y>100)&&new B.Notice("1\u301C100\u306E\u7BC4\u56F2\u3067vw\u3092\u6307\u5B9A\u3059\u308B\u3053\u3068\u3092\u63A8\u5968\u3057\u307E\u3059\u3002"))})}).settingEl;let a=null;a=new B.Setting(i).setName("\u30AB\u30B9\u30BF\u30E0\u5E45\u306E\u57FA\u6E96\u4F4D\u7F6E").setDesc("\u30AB\u30B9\u30BF\u30E0\u5E45\u30D1\u30CD\u30EB\u306E\u8868\u793A\u57FA\u6E96\uFF08\u5DE6\u30FB\u4E2D\u592E\u30FB\u53F3\uFF09").addDropdown(g=>{g.addOption("right","\u53F3\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8\uFF09"),g.addOption("center","\u4E2D\u592E"),g.addOption("left","\u5DE6"),g.setValue(s.customWidthAnchor||"right").onChange(async p=>{s.customWidthAnchor=p,await this.plugin.saveSettings(s.id)})}).settingEl,s.defaultMode!=="custom-width"&&r&&(r.style.display="none"),s.defaultMode!=="custom-width"&&a&&(a.style.display="none"),new B.Setting(i).addButton(g=>g.setButtonText("\u3053\u306E\u30DC\u30FC\u30C9\u3092\u524A\u9664").setWarning().setDisabled(this.plugin.settings.boards.length<=1).onClick(async()=>{if(!confirm(`\u30DC\u30FC\u30C9\u300C${s.name}\u300D\u3092\u672C\u5F53\u306B\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F`))return;this.plugin.settings.boards=this.plugin.settings.boards.filter(w=>w.id!==this.selectedBoardId);let p=this.plugin.settings.boards.length>0?this.plugin.settings.boards[0].id:null;if(this.selectedBoardId=p,this.plugin.settings.lastOpenedBoardId=p===null?void 0:p,await this.plugin.saveSettings(),this.boardDropdownEl){for(let w of Array.from(this.boardDropdownEl.options))w.value===s.id&&this.boardDropdownEl.removeChild(w);this.boardDropdownEl.value=this.selectedBoardId||""}let y=this.containerEl.querySelector(".selected-board-settings-section");y&&this.renderSelectedBoardSettingsUI(y)})),i.createEl("h4",{text:"\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u7BA1\u7406"});let d=i.createDiv({cls:"widget-add-buttons"}),u=i.createDiv({cls:"widget-settings-list-for-board"}),f=(g,p,y)=>{let w=new B.Setting(d);w.addButton(v=>v.setButtonText(g).setCta().onClick(async()=>{if(!this.selectedBoardId)return;let _=this.plugin.settings.boards.find(D=>D.id===this.selectedBoardId);if(!_)return;let S={id:`${p}-widget-${Date.now()}`,type:p,title:"",settings:{...y}};_.widgets.push(S),await this.plugin.saveSettings(_.id),this.renderWidgetListForBoard(u,_);let M=kl[p]||p;new B.Notice(`\u300C${M}\u300D\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u304C\u30DC\u30FC\u30C9\u300C${_.name}\u300D\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3057\u305F\u3002`)})),w.settingEl.addClass("widget-add-button-setting-item"),w.nameEl.remove(),w.descEl.remove()};f("\u30DD\u30E2\u30C9\u30FC\u30ED\u8FFD\u52A0","pomodoro",se),f("\u30E1\u30E2\u8FFD\u52A0","memo",Ye),f("\u30AB\u30EC\u30F3\u30C0\u30FC\u8FFD\u52A0","calendar",ki),f("\u6700\u8FD1\u7DE8\u96C6\u3057\u305F\u30CE\u30FC\u30C8","recent-notes",Xo),f("\u30C6\u30FC\u30DE\u5207\u308A\u66FF\u3048","theme-switcher",{}),f("\u30BF\u30A4\u30DE\u30FC\uFF0F\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1","timer-stopwatch",{...ve}),f("\u30D5\u30A1\u30A4\u30EB\u30D3\u30E5\u30FC\u30A2\u8FFD\u52A0","file-view-widget",{heightMode:"auto",fixedHeightPx:200}),f("\u3064\u3076\u3084\u304D\u8FFD\u52A0","tweet-widget",ze),f("\u632F\u308A\u8FD4\u308A\u30EC\u30DD\u30FC\u30C8","reflection-widget",Jn),this.renderWidgetListForBoard(u,s)}renderWidgetListForBoard(i,n){i.empty();let s=n.widgets;if(s.length===0){i.createEl("p",{text:"\u3053\u306E\u30DC\u30FC\u30C9\u306B\u306F\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u300C\u8FFD\u52A0\u300D\u30DC\u30BF\u30F3\u3067\u4F5C\u6210\u3067\u304D\u307E\u3059\u3002"});return}s.forEach((r,o)=>{let a=i.createDiv({cls:"widget-setting-container"}),c=kl[r.type]||r.type,d=r.title||`(\u540D\u79F0\u672A\u8A2D\u5B9A ${c})`,u=new B.Setting(a).setName(d).setDesc(`\u7A2E\u985E: ${r.type} | ID: ${r.id.substring(0,8)}...`);u.addText(p=>{p.setPlaceholder("(\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u540D)").setValue(r.title).onChange(async y=>{}),p.inputEl.addEventListener("blur",async()=>{let y=p.inputEl.value;r.title=y.trim(),await this.plugin.saveSettings(n.id);let w=r.title||`(\u540D\u79F0\u672A\u8A2D\u5B9A ${c})`;u.setName(w),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,r.settings)})}),u.addExtraButton(p=>p.setIcon("arrow-up").setTooltip("\u4E0A\u306B\u79FB\u52D5").setDisabled(o===0).onClick(async()=>{if(o>0){let y=n.widgets.splice(o,1)[0];n.widgets.splice(o-1,0,y),await this.plugin.saveSettings(n.id),this.renderWidgetListForBoard(i,n)}})).addExtraButton(p=>p.setIcon("arrow-down").setTooltip("\u4E0B\u306B\u79FB\u52D5").setDisabled(o===s.length-1).onClick(async()=>{if(o<n.widgets.length-1){let y=n.widgets.splice(o,1)[0];n.widgets.splice(o+1,0,y),await this.plugin.saveSettings(n.id),this.renderWidgetListForBoard(i,n)}})).addButton(p=>p.setIcon("trash").setTooltip("\u3053\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u3092\u524A\u9664").setWarning().onClick(async()=>{let y=kl[r.type]||r.type,w=r.title||`(\u540D\u79F0\u672A\u8A2D\u5B9A ${y})`;n.widgets.splice(o,1),await this.plugin.saveSettings(n.id),this.renderWidgetListForBoard(i,n),new B.Notice(`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u300C${w}\u300D\u3092\u30DC\u30FC\u30C9\u300C${n.name}\u300D\u304B\u3089\u524A\u9664\u3057\u307E\u3057\u305F\u3002`)}));let f=a.createDiv({cls:"widget-specific-settings"}),g=(p,y="\u8A73\u7D30\u8A2D\u5B9A")=>{let w=p.createDiv({cls:"wb-accordion"}),v=w.createDiv({cls:"wb-accordion-header"});v.createSpan({cls:"wb-accordion-icon"}).setText("\u25B6"),v.appendText(y);let S=w.createDiv({cls:"wb-accordion-body"});return S.style.display="none",v.addEventListener("click",M=>{if(M.currentTarget!==M.target)return;let D=w.classList.toggle("wb-accordion-open");v.classList.toggle("wb-accordion-open"),S.style.display=D?"":"none"}),{acc:w,header:v,body:S}};if(r.type==="pomodoro"){r.settings={...se,...r.settings||{}};let p=r.settings,{body:y}=g(f,"\u8A73\u7D30\u8A2D\u5B9A"),w=(v,_,S,M)=>{new B.Setting(v).setName(_).setDesc(S).setClass("pomodoro-setting-item").addText(D=>{D.setPlaceholder(String(se[M])).setValue(String(p[M])).onChange(async T=>{}),D.inputEl.addEventListener("blur",async()=>{let T=D.inputEl.value,C=parseInt(T);!isNaN(C)&&C>0?(p[M]=C,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)):(new B.Notice("1\u4EE5\u4E0A\u306E\u534A\u89D2\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),D.setValue(String(p[M])))})})};w(y,"\u4F5C\u696D\u6642\u9593 (\u5206)","\u30DD\u30E2\u30C9\u30FC\u30ED\u306E\u4F5C\u696D\u30D5\u30A7\u30FC\u30BA\u306E\u6642\u9593\u3002","workMinutes"),w(y,"\u77ED\u3044\u4F11\u61A9 (\u5206)","\u77ED\u3044\u4F11\u61A9\u30D5\u30A7\u30FC\u30BA\u306E\u6642\u9593\u3002","shortBreakMinutes"),w(y,"\u9577\u3044\u4F11\u61A9 (\u5206)","\u9577\u3044\u4F11\u61A9\u30D5\u30A7\u30FC\u30BA\u306E\u6642\u9593\u3002","longBreakMinutes"),w(y,"\u30B5\u30A4\u30AF\u30EB\u6570","\u9577\u3044\u4F11\u61A9\u307E\u3067\u306E\u4F5C\u696D\u30DD\u30E2\u30C9\u30FC\u30ED\u56DE\u6570\u3002","pomodorosUntilLongBreak"),new B.Setting(y).setName("\u80CC\u666F\u753B\u50CFURL").setDesc("\u30BF\u30A4\u30DE\u30FC\u306E\u80CC\u666F\u3068\u3057\u3066\u8868\u793A\u3059\u308B\u753B\u50CF\u306EURL\u3002").setClass("pomodoro-setting-item").addText(v=>v.setPlaceholder("\u4F8B: https://example.com/image.jpg").setValue(p.backgroundImageUrl||"").onChange(async _=>{p.backgroundImageUrl=_.trim(),await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)})),new B.Setting(y).setName("\u901A\u77E5\u97F3\u30FB\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F").setDesc("\u3053\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u901A\u77E5\u97F3\u30FB\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u5F62\u5F0F\u306F\u300C\u30DD\u30E2\u30C9\u30FC\u30ED\uFF08\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\uFF09\u300D\u304C\u9069\u7528\u3055\u308C\u307E\u3059\u3002").setDisabled(!0)}else if(r.type==="memo"){r.settings={...Ye,...r.settings||{}};let p=r.settings,{body:y}=g(f,"\u8A73\u7D30\u8A2D\u5B9A");new B.Setting(y).setName("\u30E1\u30E2\u5185\u5BB9 (Markdown)").setDesc("\u30E1\u30E2\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306B\u8868\u793A\u3059\u308B\u5185\u5BB9\u3002\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u5185\u3067\u3082\u7DE8\u96C6\u3067\u304D\u307E\u3059\u3002").setClass("pomodoro-setting-item").addTextArea(_=>{_.setPlaceholder("\u3053\u3053\u306B\u30E1\u30E2\u3092\u8A18\u8FF0...").setValue(p.memoContent||"").onChange(async S=>{}),_.inputEl.addEventListener("blur",async()=>{let S=_.inputEl.value;r.settings&&(r.settings.memoContent=S),await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,r.settings)})});let w=null;new B.Setting(y).setName("\u30E1\u30E2\u30A8\u30EA\u30A2\u306E\u9AD8\u3055\u30E2\u30FC\u30C9").setDesc("\u81EA\u52D5\u8ABF\u6574\uFF08\u5185\u5BB9\u306Bfit\uFF09\u307E\u305F\u306F\u56FA\u5B9A\u9AD8\u3055\u3092\u9078\u629E").addDropdown(_=>{_.addOption("auto","\u81EA\u52D5\uFF08\u5185\u5BB9\u306Bfit\uFF09"),_.addOption("fixed","\u56FA\u5B9A"),_.setValue(p.memoHeightMode||"auto").onChange(async S=>{p.memoHeightMode=S,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p),w&&(w.style.display=S==="fixed"?"":"none")})}),w=new B.Setting(y).setName("\u56FA\u5B9A\u9AD8\u3055(px)").setDesc("\u56FA\u5B9A\u30E2\u30FC\u30C9\u6642\u306E\u9AD8\u3055\uFF08px\uFF09").addText(_=>{var S;_.setPlaceholder("120").setValue(String((S=p.fixedHeightPx)!=null?S:120)).onChange(async M=>{}),_.inputEl.addEventListener("blur",async()=>{var T;let M=_.inputEl.value,D=parseInt(M);!isNaN(D)&&D>0?(p.fixedHeightPx=D,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)):(new B.Notice("1\u4EE5\u4E0A\u306E\u534A\u89D2\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),_.setValue(String((T=p.fixedHeightPx)!=null?T:120)))})}).settingEl,(p.memoHeightMode||"auto")!=="fixed"&&w&&(w.style.display="none")}else if(r.type==="file-view-widget"){let p=r.settings||{},{body:y}=g(f,"\u8A73\u7D30\u8A2D\u5B9A"),w=null;new B.Setting(y).setName("\u8868\u793A\u30A8\u30EA\u30A2\u306E\u9AD8\u3055\u30E2\u30FC\u30C9").setDesc("\u81EA\u52D5\u8ABF\u6574\uFF08\u5185\u5BB9\u306Bfit\uFF09\u307E\u305F\u306F\u56FA\u5B9A\u9AD8\u3055\u3092\u9078\u629E").addDropdown(_=>{_.addOption("auto","\u81EA\u52D5\uFF08\u5185\u5BB9\u306Bfit\uFF09"),_.addOption("fixed","\u56FA\u5B9A"),_.setValue(p.heightMode||"auto").onChange(async S=>{p.heightMode=S,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p),w&&(w.style.display=S==="fixed"?"":"none")})}),w=new B.Setting(y).setName("\u56FA\u5B9A\u9AD8\u3055(px)").setDesc("\u56FA\u5B9A\u30E2\u30FC\u30C9\u6642\u306E\u9AD8\u3055\uFF08px\uFF09").addText(_=>{var S;_.setPlaceholder("200").setValue(String((S=p.fixedHeightPx)!=null?S:200)).onChange(async M=>{}),_.inputEl.addEventListener("blur",async()=>{var T;let M=_.inputEl.value,D=parseInt(M);!isNaN(D)&&D>0?(p.fixedHeightPx=D,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)):(new B.Notice("1\u4EE5\u4E0A\u306E\u534A\u89D2\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),_.setValue(String((T=p.fixedHeightPx)!=null?T:200)))})}).settingEl,(p.heightMode||"auto")!=="fixed"&&w&&(w.style.display="none")}else if(r.type==="calendar"){r.settings={...ki,...r.settings||{}};let{body:p}=g(f,"\u8A73\u7D30\u8A2D\u5B9A");new B.Setting(p).setName("\u30C7\u30A4\u30EA\u30FC\u30CE\u30FC\u30C8\u30D5\u30A1\u30A4\u30EB\u540D\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8").setDesc("\u4F8B: YYYY-MM-DD, YYYY-MM-DD.md \u306A\u3069\u3002YYYY, MM, DD\u304C\u65E5\u4ED8\u306B\u7F6E\u63DB\u3055\u308C\u307E\u3059\u3002Moment.js\u306E\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u30EA\u30D5\u30A1\u30EC\u30F3\u30B9\uFF08https://momentjs.com/docs/#/displaying/format/\uFF09\u306B\u6E96\u62E0\u3002").addText(y=>{y.setPlaceholder("YYYY-MM-DD").setValue(r.settings.dailyNoteFormat||"YYYY-MM-DD").onChange(async w=>{}),y.inputEl.addEventListener("blur",async()=>{let w=y.inputEl.value.trim();r.settings.dailyNoteFormat=w||"YYYY-MM-DD",await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,r.settings)})})}else if(r.type==="timer-stopwatch"){r.settings={...ve,...r.settings||{}};let{body:p}=g(f,"\u8A73\u7D30\u8A2D\u5B9A");new B.Setting(p).setName("\u901A\u77E5\u97F3\uFF08\u5168\u4F53\u8A2D\u5B9A\u304C\u9069\u7528\u3055\u308C\u307E\u3059\uFF09").setDesc("\u3053\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u306E\u901A\u77E5\u97F3\u30FB\u97F3\u91CF\u306F\u300C\u30BF\u30A4\u30DE\u30FC\uFF0F\u30B9\u30C8\u30C3\u30D7\u30A6\u30A9\u30C3\u30C1\u901A\u77E5\u97F3\uFF08\u5168\u4F53\u8A2D\u5B9A\uFF09\u300D\u304C\u4F7F\u308F\u308C\u307E\u3059\u3002").setDisabled(!0)}else if(r.type==="reflection-widget"){r.settings={...Jn,...r.settings||{}};let p=r.settings,{body:y}=g(f,"AI\u307E\u3068\u3081\u8A73\u7D30\u8A2D\u5B9A");new B.Setting(y).setName("AI\u307E\u3068\u3081\u81EA\u52D5\u767A\u706B\u3092\u6709\u52B9\u306B\u3059\u308B").setDesc("ON\u306B\u3059\u308B\u3068\u3001\u6307\u5B9A\u3057\u305F\u9593\u9694\u3067\u81EA\u52D5\u7684\u306BAI\u307E\u3068\u3081\u3092\u751F\u6210\u3057\u307E\u3059\u3002").addToggle(w=>{var v;w.setValue((v=p.aiSummaryAutoEnabled)!=null?v:!1).onChange(async _=>{p.aiSummaryAutoEnabled=_,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)})}),new B.Setting(y).setName("\u81EA\u52D5\u767A\u706B\u306E\u9593\u9694\uFF08\u6642\u9593\uFF09").setDesc("-1\u3067\u81EA\u52D5\u767A\u706B\u3057\u307E\u305B\u3093\u30021\u4EE5\u4E0A\u3067\u4F55\u6642\u9593\u3054\u3068\u306B\u81EA\u52D5\u751F\u6210\u3059\u308B\u304B\u6307\u5B9A\u3002").addText(w=>{var v;w.setPlaceholder("-1").setValue(String((v=p.aiSummaryAutoIntervalHours)!=null?v:-1)).onChange(async _=>{}),w.inputEl.addEventListener("blur",async()=>{let _=parseInt(w.inputEl.value,10);isNaN(_)&&(_=-1),p.aiSummaryAutoIntervalHours=_,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)})}),new B.Setting(y).setName("\u624B\u52D5\u767A\u706B\u30DC\u30BF\u30F3\u3092\u8868\u793A").setDesc("ON\u306B\u3059\u308B\u3068\u3001\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u5185\u306B\u300C\u307E\u3068\u3081\u751F\u6210\u300D\u30DC\u30BF\u30F3\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u3002").addToggle(w=>{var v;w.setValue((v=p.aiSummaryManualEnabled)!=null?v:!0).onChange(async _=>{p.aiSummaryManualEnabled=_,await this.plugin.saveSettings(n.id),this.notifyWidgetInstanceIfBoardOpen(n.id,r.id,r.type,p)})})}})}notifyWidgetInstanceIfBoardOpen(i,n,s,r){var a;let o=(a=this.plugin.widgetBoardModals)==null?void 0:a.get(i);if(o&&o.isOpen){let c=o.uiWidgetReferences.find(d=>{var u;return((u=d.config)==null?void 0:u.id)===n});c&&typeof c.updateExternalSettings=="function"&&c.updateExternalSettings(r,n)}}renderBoardGroupManagementUI(i){i.empty();let n=this.plugin.settings.boardGroups||[];n.forEach((s,r)=>{let o=i.createDiv({cls:"board-group-setting"});new B.Setting(o).setName(s.name).setDesc(`ID: ${s.id}`).addButton(a=>a.setIcon("pencil").setTooltip("\u7DE8\u96C6").onClick(()=>{this.openBoardGroupEditModal(s,r)})).addButton(a=>a.setIcon("trash").setTooltip("\u524A\u9664").setWarning().onClick(async()=>{var c,d;confirm(`\u30B0\u30EB\u30FC\u30D7\u300C${s.name}\u300D\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F`)&&(this.plugin.settings.boardGroups=n.filter((u,f)=>f!==r),await this.plugin.saveSettings(),(d=(c=this.plugin).registerAllBoardCommands)==null||d.call(c),this.renderBoardGroupManagementUI(i))})),o.createEl("div",{text:`\u30DC\u30FC\u30C9: ${s.boardIds.map(a=>{let c=this.plugin.settings.boards.find(d=>d.id===a);return c?c.name:a}).join(", ")}`}),o.createEl("div",{text:`\u30DB\u30C3\u30C8\u30AD\u30FC: ${s.hotkey||"(\u672A\u8A2D\u5B9A)"}`})}),new B.Setting(i).addButton(s=>s.setButtonText("\u65B0\u3057\u3044\u30B0\u30EB\u30FC\u30D7\u3092\u8FFD\u52A0").setCta().onClick(()=>{this.openBoardGroupEditModal()}))}openBoardGroupEditModal(i,n){new Cl(this.app,this.plugin,()=>{this.boardGroupBodyEl&&this.renderBoardGroupManagementUI(this.boardGroupBodyEl)},i,n).open()}};function bf(e,t,i){try{if(t==="off")return;window._testTimerAudio&&(window._testTimerAudio.pause(),window._testTimerAudio=null),window._testTimerAudioCtx&&window._testTimerAudioCtx.state!=="closed"&&(window._testTimerAudioCtx.close(),window._testTimerAudioCtx=null);let n=new(window.AudioContext||window.webkitAudioContext);if(window._testTimerAudioCtx=n,t==="default_beep"){let s=n.createOscillator(),r=n.createGain();s.type="sine",s.frequency.setValueAtTime(880,n.currentTime),r.gain.setValueAtTime(Math.max(1e-4,Math.min(1,i)),n.currentTime),r.gain.exponentialRampToValueAtTime(1e-4,n.currentTime+.7),s.connect(r),r.connect(n.destination),s.start(n.currentTime),s.stop(n.currentTime+.7),s.onended=()=>n.close()}else if(t==="bell"){let s=n.createOscillator(),r=n.createOscillator(),o=n.createGain();s.type="triangle",r.type="triangle",s.frequency.setValueAtTime(880,n.currentTime),r.frequency.setValueAtTime(1320,n.currentTime),o.gain.setValueAtTime(Math.max(1e-4,Math.min(1,i)),n.currentTime),o.gain.exponentialRampToValueAtTime(1e-4,n.currentTime+.8),s.connect(o),r.connect(o),o.connect(n.destination),s.start(n.currentTime),r.start(n.currentTime),s.stop(n.currentTime+.8),r.stop(n.currentTime+.8),r.detune.setValueAtTime(5,n.currentTime+.2),s.onended=()=>n.close()}else if(t==="chime"){let s=[523.25,659.25,784],r=n.currentTime;s.forEach((o,a)=>{let c=n.createOscillator(),d=n.createGain();c.type="sine",c.frequency.setValueAtTime(o,r+a*.18),d.gain.setValueAtTime(Math.max(1e-4,Math.min(1,i)),r+a*.18),d.gain.exponentialRampToValueAtTime(1e-4,r+a*.18+.22),c.connect(d),d.connect(n.destination),c.start(r+a*.18),c.stop(r+a*.18+.22),a===s.length-1&&(c.onended=()=>n.close())})}}catch(n){new B.Notice("\u97F3\u58F0\u306E\u518D\u751F\u306B\u5931\u6557\u3057\u307E\u3057\u305F")}}var Cl=class extends B.Modal{constructor(i,n,s,r,o){super(i);this.plugin=n,this.group=r,this.editIdx=o,this.onSave=s}onOpen(){var c,d;let{contentEl:i}=this;i.empty(),i.createEl("h2",{text:this.group?"\u30B0\u30EB\u30FC\u30D7\u3092\u7DE8\u96C6":"\u65B0\u3057\u3044\u30B0\u30EB\u30FC\u30D7\u3092\u8FFD\u52A0"});let n=((c=this.group)==null?void 0:c.name)||"",s=(d=this.group)!=null&&d.boardIds?[...this.group.boardIds]:[];new B.Setting(i).setName("\u30B0\u30EB\u30FC\u30D7\u540D").addText(u=>u.setValue(n).onChange(f=>{n=f})),i.createEl("div",{text:"\u30B0\u30EB\u30FC\u30D7\u306B\u542B\u3081\u308B\u30DC\u30FC\u30C9\u3092\u9078\u629E",cls:"board-group-boardlist-label",attr:{style:"margin-top:16px;margin-bottom:8px;font-weight:bold;"}});let r=i.createDiv({cls:"board-group-boardlist",attr:{style:"display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;"}}),o=()=>{r.empty(),this.plugin.settings.boards.forEach(u=>{let f=s.includes(u.id),g=r.createEl("button",{cls:f?"selected is-active":""});g.classList.add("mod-cta"),g.style.minWidth="64px",g.style.padding="6px 16px",g.style.borderRadius="6px",g.style.border="none",g.style.cursor="pointer",g.style.fontWeight=f?"bold":"",g.style.background=f?"var(--interactive-accent)":"var(--background-modifier-box)",g.style.color=f?"var(--text-on-accent)":"var(--text-normal)",g.setText(u.name),g.onclick=()=>{f?s=s.filter(p=>p!==u.id):s.push(u.id),o()}})};o(),i.createEl("div",{text:"\u203B\u30B0\u30EB\u30FC\u30D7\u306E\u30DB\u30C3\u30C8\u30AD\u30FC\u8A2D\u5B9A\u306FObsidian\u306E\u300C\u8A2D\u5B9A \u2192 \u30DB\u30C3\u30C8\u30AD\u30FC\u300D\u753B\u9762\u3067\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002",cls:"board-group-hotkey-desc",attr:{style:"margin-top:12px;margin-bottom:8px;font-size:0.95em;color:var(--text-faint);"}});let a=i.createDiv({cls:"modal-button-row",attr:{style:"display:flex;justify-content:flex-end;gap:12px;margin-top:24px;"}});new B.Setting(a).addButton(u=>u.setButtonText("\u4FDD\u5B58").setCta().onClick(async()=>{var g,p,y,w;if(!n.trim()){new B.Notice("\u30B0\u30EB\u30FC\u30D7\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044");return}if(s.length===0){new B.Notice("1\u3064\u4EE5\u4E0A\u306E\u30DC\u30FC\u30C9\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044");return}let f={id:((g=this.group)==null?void 0:g.id)||"group-"+Date.now(),name:n.trim(),boardIds:s,hotkey:(p=this.group)==null?void 0:p.hotkey};this.editIdx!==void 0?this.plugin.settings.boardGroups[this.editIdx]=f:this.plugin.settings.boardGroups=[...this.plugin.settings.boardGroups||[],f],await this.plugin.saveSettings(),(w=(y=this.plugin).registerAllBoardCommands)==null||w.call(y),this.onSave(),this.close()})).addButton(u=>u.setButtonText("\u30AD\u30E3\u30F3\u30BB\u30EB").onClick(()=>this.close()))}};var bo=er(Ml());var ho=class{constructor(){this.providers={}}register(t){this.providers[t.id]=t}getProvider(t){return this.providers[t]}async generateReplyWithDefault(t,i){let n=this.providers.gemini;if(!n)throw new Error("LLM provider not found");return n.generateReply(t,i)}};function Lf(e){return typeof e=="undefined"||e===null}function dS(e){return typeof e=="object"&&e!==null}function hS(e){return Array.isArray(e)?e:Lf(e)?[]:[e]}function uS(e,t){var i,n,s,r;if(t)for(r=Object.keys(t),i=0,n=r.length;i<n;i+=1)s=r[i],e[s]=t[s];return e}function fS(e,t){var i="",n;for(n=0;n<t;n+=1)i+=e;return i}function gS(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var pS=Lf,mS=dS,yS=hS,bS=fS,wS=gS,vS=uS,kt={isNothing:pS,isObject:mS,toArray:yS,repeat:bS,isNegativeZero:wS,extend:vS};function Rf(e,t){var i="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(i+=`

`+e.mark.snippet),n+" "+i):n}function Cs(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Rf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Cs.prototype=Object.create(Error.prototype);Cs.prototype.constructor=Cs;Cs.prototype.toString=function(t){return this.name+": "+Rf(this,t)};var Vt=Cs;function Al(e,t,i,n,s){var r="",o="",a=Math.floor(s/2)-1;return n-t>a&&(r=" ... ",t=n-a+r.length),i-n>a&&(o=" ...",i=n+a-o.length),{str:r+e.slice(t,i).replace(/\t/g,"\u2192")+o,pos:n-t+r.length}}function Il(e,t){return kt.repeat(" ",t-e.length)+e}function xS(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var i=/\r?\n|\r|\0/g,n=[0],s=[],r,o=-1;r=i.exec(e.buffer);)s.push(r.index),n.push(r.index+r[0].length),e.position<=r.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",c,d,u=Math.min(e.line+t.linesAfter,s.length).toString().length,f=t.maxLength-(t.indent+u+3);for(c=1;c<=t.linesBefore&&!(o-c<0);c++)d=Al(e.buffer,n[o-c],s[o-c],e.position-(n[o]-n[o-c]),f),a=kt.repeat(" ",t.indent)+Il((e.line-c+1).toString(),u)+" | "+d.str+`
`+a;for(d=Al(e.buffer,n[o],s[o],e.position,f),a+=kt.repeat(" ",t.indent)+Il((e.line+1).toString(),u)+" | "+d.str+`
`,a+=kt.repeat("-",t.indent+u+3+d.pos)+`^
`,c=1;c<=t.linesAfter&&!(o+c>=s.length);c++)d=Al(e.buffer,n[o+c],s[o+c],e.position-(n[o]-n[o+c]),f),a+=kt.repeat(" ",t.indent)+Il((e.line+c+1).toString(),u)+" | "+d.str+`
`;return a.replace(/\n$/,"")}var _S=xS,SS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ES=["scalar","sequence","mapping"];function MS(e){var t={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(n){t[String(n)]=i})}),t}function TS(e,t){if(t=t||{},Object.keys(t).forEach(function(i){if(SS.indexOf(i)===-1)throw new Vt('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(i){return i},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=MS(t.styleAliases||null),ES.indexOf(this.kind)===-1)throw new Vt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Lt=TS;function wf(e,t){var i=[];return e[t].forEach(function(n){var s=i.length;i.forEach(function(r,o){r.tag===n.tag&&r.kind===n.kind&&r.multi===n.multi&&(s=o)}),i[s]=n}),i}function DS(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,i;function n(s){s.multi?(e.multi[s.kind].push(s),e.multi.fallback.push(s)):e[s.kind][s.tag]=e.fallback[s.tag]=s}for(t=0,i=arguments.length;t<i;t+=1)arguments[t].forEach(n);return e}function Ol(e){return this.extend(e)}Ol.prototype.extend=function(t){var i=[],n=[];if(t instanceof Lt)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(i=i.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Vt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(r){if(!(r instanceof Lt))throw new Vt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new Vt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new Vt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(r){if(!(r instanceof Lt))throw new Vt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Ol.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=wf(s,"implicit"),s.compiledExplicit=wf(s,"explicit"),s.compiledTypeMap=DS(s.compiledImplicit,s.compiledExplicit),s};var Ff=Ol,Bf=new Lt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Wf=new Lt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Nf=new Lt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Hf=new Ff({explicit:[Bf,Wf,Nf]});function kS(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function CS(){return null}function AS(e){return e===null}var Yf=new Lt("tag:yaml.org,2002:null",{kind:"scalar",resolve:kS,construct:CS,predicate:AS,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function IS(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function PS(e){return e==="true"||e==="True"||e==="TRUE"}function OS(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Vf=new Lt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:IS,construct:PS,predicate:OS,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function LS(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function RS(e){return 48<=e&&e<=55}function FS(e){return 48<=e&&e<=57}function BS(e){if(e===null)return!1;var t=e.length,i=0,n=!1,s;if(!t)return!1;if(s=e[i],(s==="-"||s==="+")&&(s=e[++i]),s==="0"){if(i+1===t)return!0;if(s=e[++i],s==="b"){for(i++;i<t;i++)if(s=e[i],s!=="_"){if(s!=="0"&&s!=="1")return!1;n=!0}return n&&s!=="_"}if(s==="x"){for(i++;i<t;i++)if(s=e[i],s!=="_"){if(!LS(e.charCodeAt(i)))return!1;n=!0}return n&&s!=="_"}if(s==="o"){for(i++;i<t;i++)if(s=e[i],s!=="_"){if(!RS(e.charCodeAt(i)))return!1;n=!0}return n&&s!=="_"}}if(s==="_")return!1;for(;i<t;i++)if(s=e[i],s!=="_"){if(!FS(e.charCodeAt(i)))return!1;n=!0}return!(!n||s==="_")}function WS(e){var t=e,i=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(i=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return i*parseInt(t.slice(2),2);if(t[1]==="x")return i*parseInt(t.slice(2),16);if(t[1]==="o")return i*parseInt(t.slice(2),8)}return i*parseInt(t,10)}function NS(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!kt.isNegativeZero(e)}var zf=new Lt("tag:yaml.org,2002:int",{kind:"scalar",resolve:BS,construct:WS,predicate:NS,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),HS=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function YS(e){return!(e===null||!HS.test(e)||e[e.length-1]==="_")}function VS(e){var t,i;return t=e.replace(/_/g,"").toLowerCase(),i=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:i*parseFloat(t,10)}var zS=/^[-+]?[0-9]+e/;function US(e,t){var i;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(kt.isNegativeZero(e))return"-0.0";return i=e.toString(10),zS.test(i)?i.replace("e",".e"):i}function $S(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||kt.isNegativeZero(e))}var Uf=new Lt("tag:yaml.org,2002:float",{kind:"scalar",resolve:YS,construct:VS,predicate:$S,represent:US,defaultStyle:"lowercase"}),$f=Hf.extend({implicit:[Yf,Vf,zf,Uf]}),jf=$f,Gf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),qf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jS(e){return e===null?!1:Gf.exec(e)!==null||qf.exec(e)!==null}function GS(e){var t,i,n,s,r,o,a,c=0,d=null,u,f,g;if(t=Gf.exec(e),t===null&&(t=qf.exec(e)),t===null)throw new Error("Date resolve error");if(i=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(i,n,s));if(r=+t[4],o=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=+t[10],f=+(t[11]||0),d=(u*60+f)*6e4,t[9]==="-"&&(d=-d)),g=new Date(Date.UTC(i,n,s,r,o,a,c)),d&&g.setTime(g.getTime()-d),g}function qS(e){return e.toISOString()}var Kf=new Lt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jS,construct:GS,instanceOf:Date,represent:qS});function KS(e){return e==="<<"||e===null}var Xf=new Lt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:KS}),Wl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function XS(e){if(e===null)return!1;var t,i,n=0,s=e.length,r=Wl;for(i=0;i<s;i++)if(t=r.indexOf(e.charAt(i)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function ZS(e){var t,i,n=e.replace(/[\r\n=]/g,""),s=n.length,r=Wl,o=0,a=[];for(t=0;t<s;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|r.indexOf(n.charAt(t));return i=s%4*6,i===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):i===18?(a.push(o>>10&255),a.push(o>>2&255)):i===12&&a.push(o>>4&255),new Uint8Array(a)}function JS(e){var t="",i=0,n,s,r=e.length,o=Wl;for(n=0;n<r;n++)n%3===0&&n&&(t+=o[i>>18&63],t+=o[i>>12&63],t+=o[i>>6&63],t+=o[i&63]),i=(i<<8)+e[n];return s=r%3,s===0?(t+=o[i>>18&63],t+=o[i>>12&63],t+=o[i>>6&63],t+=o[i&63]):s===2?(t+=o[i>>10&63],t+=o[i>>4&63],t+=o[i<<2&63],t+=o[64]):s===1&&(t+=o[i>>2&63],t+=o[i<<4&63],t+=o[64],t+=o[64]),t}function QS(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Zf=new Lt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:XS,construct:ZS,predicate:QS,represent:JS}),tE=Object.prototype.hasOwnProperty,eE=Object.prototype.toString;function iE(e){if(e===null)return!0;var t=[],i,n,s,r,o,a=e;for(i=0,n=a.length;i<n;i+=1){if(s=a[i],o=!1,eE.call(s)!=="[object Object]")return!1;for(r in s)if(tE.call(s,r))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(r)===-1)t.push(r);else return!1}return!0}function nE(e){return e!==null?e:[]}var Jf=new Lt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:iE,construct:nE}),sE=Object.prototype.toString;function rE(e){if(e===null)return!0;var t,i,n,s,r,o=e;for(r=new Array(o.length),t=0,i=o.length;t<i;t+=1){if(n=o[t],sE.call(n)!=="[object Object]"||(s=Object.keys(n),s.length!==1))return!1;r[t]=[s[0],n[s[0]]]}return!0}function oE(e){if(e===null)return[];var t,i,n,s,r,o=e;for(r=new Array(o.length),t=0,i=o.length;t<i;t+=1)n=o[t],s=Object.keys(n),r[t]=[s[0],n[s[0]]];return r}var Qf=new Lt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:rE,construct:oE}),aE=Object.prototype.hasOwnProperty;function lE(e){if(e===null)return!0;var t,i=e;for(t in i)if(aE.call(i,t)&&i[t]!==null)return!1;return!0}function cE(e){return e!==null?e:{}}var tg=new Lt("tag:yaml.org,2002:set",{kind:"mapping",resolve:lE,construct:cE}),Nl=jf.extend({implicit:[Kf,Xf],explicit:[Zf,Jf,Qf,tg]}),_i=Object.prototype.hasOwnProperty,uo=1,eg=2,ig=3,fo=4,Pl=1,dE=2,vf=3,hE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,uE=/[\x85\u2028\u2029]/,fE=/[,\[\]\{\}]/,ng=/^(?:!|!!|![a-z\-]+!)$/i,sg=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xf(e){return Object.prototype.toString.call(e)}function Ae(e){return e===10||e===13}function Ji(e){return e===9||e===32}function Qt(e){return e===9||e===32||e===10||e===13}function Wn(e){return e===44||e===91||e===93||e===123||e===125}function gE(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function pE(e){return e===120?2:e===117?4:e===85?8:0}function mE(e){return 48<=e&&e<=57?e-48:-1}function _f(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function yE(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var rg=new Array(256),og=new Array(256);for(Zi=0;Zi<256;Zi++)rg[Zi]=_f(Zi)?1:0,og[Zi]=_f(Zi);var Zi;function bE(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Nl,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ag(e,t){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=_S(i),new Vt(t,i)}function H(e,t){throw ag(e,t)}function go(e,t){e.onWarning&&e.onWarning.call(null,ag(e,t))}var Sf={YAML:function(t,i,n){var s,r,o;t.version!==null&&H(t,"duplication of %YAML directive"),n.length!==1&&H(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),s===null&&H(t,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),o=parseInt(s[2],10),r!==1&&H(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&go(t,"unsupported YAML version of the document")},TAG:function(t,i,n){var s,r;n.length!==2&&H(t,"TAG directive accepts exactly two arguments"),s=n[0],r=n[1],ng.test(s)||H(t,"ill-formed tag handle (first argument) of the TAG directive"),_i.call(t.tagMap,s)&&H(t,'there is a previously declared suffix for "'+s+'" tag handle'),sg.test(r)||H(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(o){H(t,"tag prefix is malformed: "+r)}t.tagMap[s]=r}};function xi(e,t,i,n){var s,r,o,a;if(t<i){if(a=e.input.slice(t,i),n)for(s=0,r=a.length;s<r;s+=1)o=a.charCodeAt(s),o===9||32<=o&&o<=1114111||H(e,"expected valid JSON character");else hE.test(a)&&H(e,"the stream contains non-printable characters");e.result+=a}}function Ef(e,t,i,n){var s,r,o,a;for(kt.isObject(i)||H(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(i),o=0,a=s.length;o<a;o+=1)r=s[o],_i.call(t,r)||(t[r]=i[r],n[r]=!0)}function Nn(e,t,i,n,s,r,o,a,c){var d,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),d=0,u=s.length;d<u;d+=1)Array.isArray(s[d])&&H(e,"nested arrays are not supported inside keys"),typeof s=="object"&&xf(s[d])==="[object Object]"&&(s[d]="[object Object]");if(typeof s=="object"&&xf(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(d=0,u=r.length;d<u;d+=1)Ef(e,t,r[d],i);else Ef(e,t,r,i);else!e.json&&!_i.call(i,s)&&_i.call(t,s)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,H(e,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[s]=r,delete i[s];return t}function Hl(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):H(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function St(e,t,i){for(var n=0,s=e.input.charCodeAt(e.position);s!==0;){for(;Ji(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(Ae(s))for(Hl(e),s=e.input.charCodeAt(e.position),n++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return i!==-1&&n!==0&&e.lineIndent<i&&go(e,"deficient indentation"),n}function yo(e){var t=e.position,i;return i=e.input.charCodeAt(t),!!((i===45||i===46)&&i===e.input.charCodeAt(t+1)&&i===e.input.charCodeAt(t+2)&&(t+=3,i=e.input.charCodeAt(t),i===0||Qt(i)))}function Yl(e,t){t===1?e.result+=" ":t>1&&(e.result+=kt.repeat(`
`,t-1))}function wE(e,t,i){var n,s,r,o,a,c,d,u,f=e.kind,g=e.result,p;if(p=e.input.charCodeAt(e.position),Qt(p)||Wn(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(s=e.input.charCodeAt(e.position+1),Qt(s)||i&&Wn(s)))return!1;for(e.kind="scalar",e.result="",r=o=e.position,a=!1;p!==0;){if(p===58){if(s=e.input.charCodeAt(e.position+1),Qt(s)||i&&Wn(s))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),Qt(n))break}else{if(e.position===e.lineStart&&yo(e)||i&&Wn(p))break;if(Ae(p))if(c=e.line,d=e.lineStart,u=e.lineIndent,St(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=d,e.lineIndent=u;break}}a&&(xi(e,r,o,!1),Yl(e,e.line-c),r=o=e.position,a=!1),Ji(p)||(o=e.position+1),p=e.input.charCodeAt(++e.position)}return xi(e,r,o,!1),e.result?!0:(e.kind=f,e.result=g,!1)}function vE(e,t){var i,n,s;if(i=e.input.charCodeAt(e.position),i!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(i=e.input.charCodeAt(e.position))!==0;)if(i===39)if(xi(e,n,e.position,!0),i=e.input.charCodeAt(++e.position),i===39)n=e.position,e.position++,s=e.position;else return!0;else Ae(i)?(xi(e,n,s,!0),Yl(e,St(e,!1,t)),n=s=e.position):e.position===e.lineStart&&yo(e)?H(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);H(e,"unexpected end of the stream within a single quoted scalar")}function xE(e,t){var i,n,s,r,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return xi(e,i,e.position,!0),e.position++,!0;if(a===92){if(xi(e,i,e.position,!0),a=e.input.charCodeAt(++e.position),Ae(a))St(e,!1,t);else if(a<256&&rg[a])e.result+=og[a],e.position++;else if((o=pE(a))>0){for(s=o,r=0;s>0;s--)a=e.input.charCodeAt(++e.position),(o=gE(a))>=0?r=(r<<4)+o:H(e,"expected hexadecimal character");e.result+=yE(r),e.position++}else H(e,"unknown escape sequence");i=n=e.position}else Ae(a)?(xi(e,i,n,!0),Yl(e,St(e,!1,t)),i=n=e.position):e.position===e.lineStart&&yo(e)?H(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}H(e,"unexpected end of the stream within a double quoted scalar")}function _E(e,t){var i=!0,n,s,r,o=e.tag,a,c=e.anchor,d,u,f,g,p,y=Object.create(null),w,v,_,S;if(S=e.input.charCodeAt(e.position),S===91)u=93,p=!1,a=[];else if(S===123)u=125,p=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),S=e.input.charCodeAt(++e.position);S!==0;){if(St(e,!0,t),S=e.input.charCodeAt(e.position),S===u)return e.position++,e.tag=o,e.anchor=c,e.kind=p?"mapping":"sequence",e.result=a,!0;i?S===44&&H(e,"expected the node content, but found ','"):H(e,"missed comma between flow collection entries"),v=w=_=null,f=g=!1,S===63&&(d=e.input.charCodeAt(e.position+1),Qt(d)&&(f=g=!0,e.position++,St(e,!0,t))),n=e.line,s=e.lineStart,r=e.position,Hn(e,t,uo,!1,!0),v=e.tag,w=e.result,St(e,!0,t),S=e.input.charCodeAt(e.position),(g||e.line===n)&&S===58&&(f=!0,S=e.input.charCodeAt(++e.position),St(e,!0,t),Hn(e,t,uo,!1,!0),_=e.result),p?Nn(e,a,y,v,w,_,n,s,r):f?a.push(Nn(e,null,y,v,w,_,n,s,r)):a.push(w),St(e,!0,t),S=e.input.charCodeAt(e.position),S===44?(i=!0,S=e.input.charCodeAt(++e.position)):i=!1}H(e,"unexpected end of the stream within a flow collection")}function SE(e,t){var i,n,s=Pl,r=!1,o=!1,a=t,c=0,d=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Pl===s?s=f===43?vf:dE:H(e,"repeat of a chomping mode identifier");else if((u=mE(f))>=0)u===0?H(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?H(e,"repeat of an indentation width identifier"):(a=t+u-1,o=!0);else break;if(Ji(f)){do f=e.input.charCodeAt(++e.position);while(Ji(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ae(f)&&f!==0)}for(;f!==0;){for(Hl(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Ae(f)){c++;continue}if(e.lineIndent<a){s===vf?e.result+=kt.repeat(`
`,r?1+c:c):s===Pl&&r&&(e.result+=`
`);break}for(n?Ji(f)?(d=!0,e.result+=kt.repeat(`
`,r?1+c:c)):d?(d=!1,e.result+=kt.repeat(`
`,c+1)):c===0?r&&(e.result+=" "):e.result+=kt.repeat(`
`,c):e.result+=kt.repeat(`
`,r?1+c:c),r=!0,o=!0,c=0,i=e.position;!Ae(f)&&f!==0;)f=e.input.charCodeAt(++e.position);xi(e,i,e.position,!1)}return!0}function Mf(e,t){var i,n=e.tag,s=e.anchor,r=[],o,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,H(e,"tab characters must not be used in indentation")),!(c!==45||(o=e.input.charCodeAt(e.position+1),!Qt(o))));){if(a=!0,e.position++,St(e,!0,-1)&&e.lineIndent<=t){r.push(null),c=e.input.charCodeAt(e.position);continue}if(i=e.line,Hn(e,t,ig,!1,!0),r.push(e.result),St(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>t)&&c!==0)H(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=s,e.kind="sequence",e.result=r,!0):!1}function EE(e,t,i){var n,s,r,o,a,c,d=e.tag,u=e.anchor,f={},g=Object.create(null),p=null,y=null,w=null,v=!1,_=!1,S;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),S=e.input.charCodeAt(e.position);S!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,H(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),r=e.line,(S===63||S===58)&&Qt(n))S===63?(v&&(Nn(e,f,g,p,y,null,o,a,c),p=y=w=null),_=!0,v=!0,s=!0):v?(v=!1,s=!0):H(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,S=n;else{if(o=e.line,a=e.lineStart,c=e.position,!Hn(e,i,eg,!1,!0))break;if(e.line===r){for(S=e.input.charCodeAt(e.position);Ji(S);)S=e.input.charCodeAt(++e.position);if(S===58)S=e.input.charCodeAt(++e.position),Qt(S)||H(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Nn(e,f,g,p,y,null,o,a,c),p=y=w=null),_=!0,v=!1,s=!1,p=e.tag,y=e.result;else if(_)H(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=u,!0}else if(_)H(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=u,!0}if((e.line===r||e.lineIndent>t)&&(v&&(o=e.line,a=e.lineStart,c=e.position),Hn(e,t,fo,!0,s)&&(v?y=e.result:w=e.result),v||(Nn(e,f,g,p,y,w,o,a,c),p=y=w=null),St(e,!0,-1),S=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&S!==0)H(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Nn(e,f,g,p,y,null,o,a,c),_&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=f),_}function ME(e){var t,i=!1,n=!1,s,r,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&H(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(i=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,s="!!",o=e.input.charCodeAt(++e.position)):s="!",t=e.position,i){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(r=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):H(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Qt(o);)o===33&&(n?H(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),ng.test(s)||H(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),fE.test(r)&&H(e,"tag suffix cannot contain flow indicator characters")}r&&!sg.test(r)&&H(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(a){H(e,"tag name is malformed: "+r)}return i?e.tag=r:_i.call(e.tagMap,s)?e.tag=e.tagMap[s]+r:s==="!"?e.tag="!"+r:s==="!!"?e.tag="tag:yaml.org,2002:"+r:H(e,'undeclared tag handle "'+s+'"'),!0}function TE(e){var t,i;if(i=e.input.charCodeAt(e.position),i!==38)return!1;for(e.anchor!==null&&H(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!Qt(i)&&!Wn(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&H(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function DE(e){var t,i,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Qt(n)&&!Wn(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&H(e,"name of an alias node must contain at least one character"),i=e.input.slice(t,e.position),_i.call(e.anchorMap,i)||H(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],St(e,!0,-1),!0}function Hn(e,t,i,n,s){var r,o,a,c=1,d=!1,u=!1,f,g,p,y,w,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=o=a=fo===i||ig===i,n&&St(e,!0,-1)&&(d=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;ME(e)||TE(e);)St(e,!0,-1)?(d=!0,a=r,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=d||s),(c===1||fo===i)&&(uo===i||eg===i?w=t:w=t+1,v=e.position-e.lineStart,c===1?a&&(Mf(e,v)||EE(e,v,w))||_E(e,w)?u=!0:(o&&SE(e,w)||vE(e,w)||xE(e,w)?u=!0:DE(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&H(e,"alias node should not have any properties")):wE(e,w,uo===i)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(u=a&&Mf(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&H(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,g=e.implicitTypes.length;f<g;f+=1)if(y=e.implicitTypes[f],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(_i.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,p=e.typeMap.multi[e.kind||"fallback"],f=0,g=p.length;f<g;f+=1)if(e.tag.slice(0,p[f].tag.length)===p[f].tag){y=p[f];break}y||H(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&H(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):H(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function kE(e){var t=e.position,i,n,s,r=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(St(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(r=!0,o=e.input.charCodeAt(++e.position),i=e.position;o!==0&&!Qt(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(i,e.position),s=[],n.length<1&&H(e,"directive name must not be less than one character in length");o!==0;){for(;Ji(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ae(o));break}if(Ae(o))break;for(i=e.position;o!==0&&!Qt(o);)o=e.input.charCodeAt(++e.position);s.push(e.input.slice(i,e.position))}o!==0&&Hl(e),_i.call(Sf,n)?Sf[n](e,n,s):go(e,'unknown document directive "'+n+'"')}if(St(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,St(e,!0,-1)):r&&H(e,"directives end mark is expected"),Hn(e,e.lineIndent-1,fo,!1,!0),St(e,!0,-1),e.checkLineBreaks&&uE.test(e.input.slice(t,e.position))&&go(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&yo(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,St(e,!0,-1));return}if(e.position<e.length-1)H(e,"end of the stream or a document separator is expected");else return}function lg(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var i=new bE(e,t),n=e.indexOf("\0");for(n!==-1&&(i.position=n,H(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)kE(i);return i.documents}function CE(e,t,i){t!==null&&typeof t=="object"&&typeof i=="undefined"&&(i=t,t=null);var n=lg(e,i);if(typeof t!="function")return n;for(var s=0,r=n.length;s<r;s+=1)t(n[s])}function AE(e,t){var i=lg(e,t);if(i.length!==0){if(i.length===1)return i[0];throw new Vt("expected a single document in the stream, but found more")}}var IE=CE,PE=AE,cg={loadAll:IE,load:PE},dg=Object.prototype.toString,hg=Object.prototype.hasOwnProperty,Vl=65279,OE=9,As=10,LE=13,RE=32,FE=33,BE=34,Ll=35,WE=37,NE=38,HE=39,YE=42,ug=44,VE=45,po=58,zE=61,UE=62,$E=63,jE=64,fg=91,gg=93,GE=96,pg=123,qE=124,mg=125,Ht={};Ht[0]="\\0";Ht[7]="\\a";Ht[8]="\\b";Ht[9]="\\t";Ht[10]="\\n";Ht[11]="\\v";Ht[12]="\\f";Ht[13]="\\r";Ht[27]="\\e";Ht[34]='\\"';Ht[92]="\\\\";Ht[133]="\\N";Ht[160]="\\_";Ht[8232]="\\L";Ht[8233]="\\P";var KE=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],XE=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ZE(e,t){var i,n,s,r,o,a,c;if(t===null)return{};for(i={},n=Object.keys(t),s=0,r=n.length;s<r;s+=1)o=n[s],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&hg.call(c.styleAliases,a)&&(a=c.styleAliases[a]),i[o]=a;return i}function JE(e){var t,i,n;if(t=e.toString(16).toUpperCase(),e<=255)i="x",n=2;else if(e<=65535)i="u",n=4;else if(e<=4294967295)i="U",n=8;else throw new Vt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+kt.repeat("0",n-t.length)+t}var QE=1,Is=2;function tM(e){this.schema=e.schema||Nl,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=kt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=ZE(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Is:QE,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Tf(e,t){for(var i=kt.repeat(" ",t),n=0,s=-1,r="",o,a=e.length;n<a;)s=e.indexOf(`
`,n),s===-1?(o=e.slice(n),n=a):(o=e.slice(n,s+1),n=s+1),o.length&&o!==`
`&&(r+=i),r+=o;return r}function Rl(e,t){return`
`+kt.repeat(" ",e.indent*t)}function eM(e,t){var i,n,s;for(i=0,n=e.implicitTypes.length;i<n;i+=1)if(s=e.implicitTypes[i],s.resolve(t))return!0;return!1}function mo(e){return e===RE||e===OE}function Ps(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Vl||65536<=e&&e<=1114111}function Df(e){return Ps(e)&&e!==Vl&&e!==LE&&e!==As}function kf(e,t,i){var n=Df(e),s=n&&!mo(e);return(i?n:n&&e!==ug&&e!==fg&&e!==gg&&e!==pg&&e!==mg)&&e!==Ll&&!(t===po&&!s)||Df(t)&&!mo(t)&&e===Ll||t===po&&s}function iM(e){return Ps(e)&&e!==Vl&&!mo(e)&&e!==VE&&e!==$E&&e!==po&&e!==ug&&e!==fg&&e!==gg&&e!==pg&&e!==mg&&e!==Ll&&e!==NE&&e!==YE&&e!==FE&&e!==qE&&e!==zE&&e!==UE&&e!==HE&&e!==BE&&e!==WE&&e!==jE&&e!==GE}function nM(e){return!mo(e)&&e!==po}function ks(e,t){var i=e.charCodeAt(t),n;return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(i-55296)*1024+n-56320+65536:i}function yg(e){var t=/^\n* /;return t.test(e)}var bg=1,Fl=2,wg=3,vg=4,Bn=5;function sM(e,t,i,n,s,r,o,a){var c,d=0,u=null,f=!1,g=!1,p=n!==-1,y=-1,w=iM(ks(e,0))&&nM(ks(e,e.length-1));if(t||o)for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=ks(e,c),!Ps(d))return Bn;w=w&&kf(d,u,a),u=d}else{for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=ks(e,c),d===As)f=!0,p&&(g=g||c-y-1>n&&e[y+1]!==" ",y=c);else if(!Ps(d))return Bn;w=w&&kf(d,u,a),u=d}g=g||p&&c-y-1>n&&e[y+1]!==" "}return!f&&!g?w&&!o&&!s(e)?bg:r===Is?Bn:Fl:i>9&&yg(e)?Bn:o?r===Is?Bn:Fl:g?vg:wg}function rM(e,t,i,n,s){e.dump=function(){if(t.length===0)return e.quotingType===Is?'""':"''";if(!e.noCompatMode&&(KE.indexOf(t)!==-1||XE.test(t)))return e.quotingType===Is?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,i),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),a=n||e.flowLevel>-1&&i>=e.flowLevel;function c(d){return eM(e,d)}switch(sM(t,a,e.indent,o,c,e.quotingType,e.forceQuotes&&!n,s)){case bg:return t;case Fl:return"'"+t.replace(/'/g,"''")+"'";case wg:return"|"+Cf(t,e.indent)+Af(Tf(t,r));case vg:return">"+Cf(t,e.indent)+Af(Tf(oM(t,o),r));case Bn:return'"'+aM(t)+'"';default:throw new Vt("impossible error: invalid scalar style")}}()}function Cf(e,t){var i=yg(e)?String(t):"",n=e[e.length-1]===`
`,s=n&&(e[e.length-2]===`
`||e===`
`),r=s?"+":n?"":"-";return i+r+`
`}function Af(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function oM(e,t){for(var i=/(\n+)([^\n]*)/g,n=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,i.lastIndex=d,If(e.slice(0,d),t)}(),s=e[0]===`
`||e[0]===" ",r,o;o=i.exec(e);){var a=o[1],c=o[2];r=c[0]===" ",n+=a+(!s&&!r&&c!==""?`
`:"")+If(c,t),s=r}return n}function If(e,t){if(e===""||e[0]===" ")return e;for(var i=/ [^ ]/g,n,s=0,r,o=0,a=0,c="";n=i.exec(e);)a=n.index,a-s>t&&(r=o>s?o:a,c+=`
`+e.slice(s,r),s=r+1),o=a;return c+=`
`,e.length-s>t&&o>s?c+=e.slice(s,o)+`
`+e.slice(o+1):c+=e.slice(s),c.slice(1)}function aM(e){for(var t="",i=0,n,s=0;s<e.length;i>=65536?s+=2:s++)i=ks(e,s),n=Ht[i],!n&&Ps(i)?(t+=e[s],i>=65536&&(t+=e[s+1])):t+=n||JE(i);return t}function lM(e,t,i){var n="",s=e.tag,r,o,a;for(r=0,o=i.length;r<o;r+=1)a=i[r],e.replacer&&(a=e.replacer.call(i,String(r),a)),(Je(e,t,a,!1,!1)||typeof a=="undefined"&&Je(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=s,e.dump="["+n+"]"}function Pf(e,t,i,n){var s="",r=e.tag,o,a,c;for(o=0,a=i.length;o<a;o+=1)c=i[o],e.replacer&&(c=e.replacer.call(i,String(o),c)),(Je(e,t+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Je(e,t+1,null,!0,!0,!1,!0))&&((!n||s!=="")&&(s+=Rl(e,t)),e.dump&&As===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=r,e.dump=s||"[]"}function cM(e,t,i){var n="",s=e.tag,r=Object.keys(i),o,a,c,d,u;for(o=0,a=r.length;o<a;o+=1)u="",n!==""&&(u+=", "),e.condenseFlow&&(u+='"'),c=r[o],d=i[c],e.replacer&&(d=e.replacer.call(i,c,d)),Je(e,t,c,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Je(e,t,d,!1,!1)&&(u+=e.dump,n+=u));e.tag=s,e.dump="{"+n+"}"}function dM(e,t,i,n){var s="",r=e.tag,o=Object.keys(i),a,c,d,u,f,g;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Vt("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)g="",(!n||s!=="")&&(g+=Rl(e,t)),d=o[a],u=i[d],e.replacer&&(u=e.replacer.call(i,d,u)),Je(e,t+1,d,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&As===e.dump.charCodeAt(0)?g+="?":g+="? "),g+=e.dump,f&&(g+=Rl(e,t)),Je(e,t+1,u,!0,f)&&(e.dump&&As===e.dump.charCodeAt(0)?g+=":":g+=": ",g+=e.dump,s+=g));e.tag=r,e.dump=s||"{}"}function Of(e,t,i){var n,s,r,o,a,c;for(s=i?e.explicitTypes:e.implicitTypes,r=0,o=s.length;r<o;r+=1)if(a=s[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(i?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,dg.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(hg.call(a.represent,c))n=a.represent[c](t,c);else throw new Vt("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function Je(e,t,i,n,s,r,o){e.tag=null,e.dump=i,Of(e,i,!1)||Of(e,i,!0);var a=dg.call(e.dump),c=n,d;n&&(n=e.flowLevel<0||e.flowLevel>t);var u=a==="[object Object]"||a==="[object Array]",f,g;if(u&&(f=e.duplicates.indexOf(i),g=f!==-1),(e.tag!==null&&e.tag!=="?"||g||e.indent!==2&&t>0)&&(s=!1),g&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(u&&g&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(dM(e,t,e.dump,s),g&&(e.dump="&ref_"+f+e.dump)):(cM(e,t,e.dump),g&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Pf(e,t-1,e.dump,s):Pf(e,t,e.dump,s),g&&(e.dump="&ref_"+f+e.dump)):(lM(e,t,e.dump),g&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&rM(e,e.dump,t,r,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Vt("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function hM(e,t){var i=[],n=[],s,r;for(Bl(e,i,n),s=0,r=n.length;s<r;s+=1)t.duplicates.push(i[n[s]]);t.usedDuplicates=new Array(r)}function Bl(e,t,i){var n,s,r;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)i.indexOf(s)===-1&&i.push(s);else if(t.push(e),Array.isArray(e))for(s=0,r=e.length;s<r;s+=1)Bl(e[s],t,i);else for(n=Object.keys(e),s=0,r=n.length;s<r;s+=1)Bl(e[n[s]],t,i)}function uM(e,t){t=t||{};var i=new tM(t);i.noRefs||hM(e,i);var n=e;return i.replacer&&(n=i.replacer.call({"":n},"",n)),Je(i,0,n,!0,!0)?i.dump+`
`:""}var fM=uM,gM={dump:fM};function zl(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var pM=Lt,mM=Ff,yM=Hf,bM=$f,wM=jf,vM=Nl,xM=cg.load,_M=cg.loadAll,SM=gM.dump,EM=Vt,MM={binary:Zf,float:Uf,map:Nf,null:Yf,pairs:Qf,set:tg,timestamp:Kf,bool:Vf,int:zf,merge:Xf,omap:Jf,seq:Wf,str:Bf},TM=zl("safeLoad","load"),DM=zl("safeLoadAll","loadAll"),kM=zl("safeDump","dump"),CM={Type:pM,Schema:mM,FAILSAFE_SCHEMA:yM,JSON_SCHEMA:bM,CORE_SCHEMA:wM,DEFAULT_SCHEMA:vM,load:xM,loadAll:_M,dump:SM,YAMLException:EM,types:MM,safeLoad:TM,safeLoadAll:DM,safeDump:kM},xg=CM;var Qi=require("obsidian"),wo=class extends Qe.Plugin{constructor(){super(...arguments);this.widgetBoardModals=new Map;this.isSaving=!1;this.registeredGroupCommandIds=[]}async onload(){yt(this,"Widget Board Plugin: Loading..."),this.llmManager=new ho,this.llmManager.register(dn),await this.loadSettings(),this.registerAllBoardCommands(),this.addRibbonIcon("layout-dashboard","\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u958B\u304F",()=>this.openBoardPicker()),this.addSettingTab(new co(this.app,this)),this.addCommand({id:"hide-all-widget-boards",name:"\u3059\u3079\u3066\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u975E\u8868\u793A",callback:()=>this.hideAllBoards()}),this.registerMarkdownCodeBlockProcessor("widget-board",async(i,n,s)=>{let r;try{r=xg.load(i)}catch(a){n.createEl("pre",{text:`YAML\u30D1\u30FC\u30B9\u30A8\u30E9\u30FC: ${String(a)}`});return}if(!r||typeof r!="object"||!r.type){n.createEl("pre",{text:"\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u8A2D\u5B9A\u304C\u4E0D\u6B63\u3067\u3059\u3002type\u30D5\u30A3\u30FC\u30EB\u30C9\u304C\u5FC5\u8981\u3067\u3059\u3002"});return}r.id||(r.id=`md-widget-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),r.title||(r.title=r.type),r.settings||(r.settings={},r.type==="pomodoro"?r.settings={...se,pomodoroNotificationSound:this.settings.pomodoroNotificationSound,pomodoroNotificationVolume:this.settings.pomodoroNotificationVolume,pomodoroExportFormat:this.settings.pomodoroExportFormat,...r.settings}:r.type==="timer-stopwatch"?r.settings={...ve,timerStopwatchNotificationSound:this.settings.timerStopwatchNotificationSound,timerStopwatchNotificationVolume:this.settings.timerStopwatchNotificationVolume,...r.settings}:r.type==="tweet-widget"?r.settings={...this.settings.tweetWidgetAvatarUrl?{avatarUrl:this.settings.tweetWidgetAvatarUrl}:{},...r.settings}:r.type==="reflection-widget"&&(r.settings={...r.settings}));let o=Jt.get(r.type);if(!o){n.createEl("pre",{text:`\u672A\u5BFE\u5FDC\u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30BF\u30A4\u30D7: ${r.type}`});return}try{let c=new o().create(r,this.app,this);n.appendChild(c)}catch(a){n.createEl("pre",{text:`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u63CF\u753B\u30A8\u30E9\u30FC: ${String(a)}`})}}),this.prewarmAllWidgetMarkdownCache(),yt(this,"Widget Board Plugin: Loaded.")}onunload(){this.widgetBoardModals.forEach(i=>{i.isOpen&&i.close()}),this.widgetBoardModals.clear(),yt(this,"Widget Board Plugin: Unloaded.")}openBoardPicker(){if(this.settings.boards.length===0){new Qe.Notice("\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u304C\u3042\u308A\u307E\u305B\u3093\u3002\u8A2D\u5B9A\u753B\u9762\u304B\u3089\u4F5C\u6210\u3057\u3066\u304F\u3060\u3055\u3044\u3002");return}if(this.settings.boards.length===1){this.openWidgetBoardById(this.settings.boards[0].id);return}new Ul(this.app,this.settings.boards,n=>{this.openWidgetBoardById(n)}).open()}openWidgetBoardById(i){let n=this.widgetBoardModals.get(i);if(n){if(n.isOpen||n.isClosing)return;this.widgetBoardModals.delete(i),n.modalEl&&n.modalEl.parentElement===document.body&&n.modalEl.parentElement.removeChild(n.modalEl)}let s=this.settings.boards.find(c=>c.id===i);if(!s){new Qe.Notice(`ID '${i}' \u306E\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002`);return}Object.values(Ot.MODES).includes(s.defaultMode)||(s.defaultMode=Ot.MODES.RIGHT_THIRD);let o=new Ot(this.app,this,s);this.widgetBoardModals.set(i,o);let a=o.onClose.bind(o);o.onClose=()=>{this.widgetBoardModals.delete(i),a()},o.open()}toggleWidgetBoardById(i){let n=this.widgetBoardModals.get(i);if(n&&n.isOpen){n.close();return}this.openWidgetBoardById(i)}async loadSettings(){let i=await this.loadData();if(i&&!i.boards&&i.widgets){let n={id:ni.id,name:"\u30DE\u30A4\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9 (\u65E7\u8A2D\u5B9A)",defaultMode:i.defaultMode||ni.defaultMode,widgets:i.widgets||[]};this.settings={boards:[n],lastOpenedBoardId:n.id,defaultBoardIdForQuickOpen:n.id}}else i&&i.boards?this.settings=Object.assign({},$o,i):this.settings=(0,bo.default)($o);(!this.settings.boards||!Array.isArray(this.settings.boards))&&(this.settings.boards=[(0,bo.default)(ni)]),this.settings.boards.length===0&&this.settings.boards.push((0,bo.default)(ni)),this.settings.boards.forEach(n=>{(!n.widgets||!Array.isArray(n.widgets))&&(n.widgets=[]),n.widgets.forEach(s=>{s.type==="pomodoro"?s.settings={...se,...s.settings||{}}:s.type==="memo"?s.settings={...Ye,...s.settings||{}}:s.type==="calendar"&&(s.settings={...ki,...s.settings||{}})})})}async saveSettings(i){if(!this.isSaving){this.isSaving=!0;try{if(await this.saveData(this.settings),i){let n=this.widgetBoardModals.get(i);if(n&&n.isOpen&&n.currentBoardConfig){let s=this.settings.boards.find(r=>r.id===i);s?n.updateBoardConfiguration(s):n.close()}}else this.widgetBoardModals.forEach(n=>{if(n.isOpen&&n.currentBoardConfig){let s=n.currentBoardConfig.id,r=this.settings.boards.find(o=>o.id===s);r?n.updateBoardConfiguration(r):n.close()}})}finally{this.isSaving=!1}}}registerAllBoardCommands(){this.app.commands&&typeof this.app.commands.removeCommand=="function"&&this.registeredGroupCommandIds.forEach(i=>{this.app.commands.removeCommand(i)}),this.registeredGroupCommandIds=[],this.settings.boards.map(i=>this.addCommand({id:`toggle-widget-board-${i.id}`,name:`\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u30C8\u30B0\u30EB: ${i.name}`,callback:()=>this.toggleWidgetBoardById(i.id)})),(this.settings.boardGroups||[]).forEach(i=>{let n=[];if(i.hotkey){let r=i.hotkey.split("+");r.length>1?n=[{modifiers:r.slice(0,-1),key:r[r.length-1]}]:n=[{modifiers:[],key:i.hotkey}]}let s=`open-board-group-${i.id}`;this.addCommand({id:s,name:`\u30DC\u30FC\u30C9\u30B0\u30EB\u30FC\u30D7\u3092\u30C8\u30B0\u30EB: ${i.name}`,hotkeys:n,callback:()=>{(i.boardIds||[]).some(o=>{let a=this.widgetBoardModals.get(o);return a&&a.isOpen})?(i.boardIds||[]).filter(o=>{let a=this.widgetBoardModals.get(o);return a&&a.isOpen}).forEach(o=>{let a=this.widgetBoardModals.get(o);a&&a.close()}):(i.boardIds||[]).forEach(o=>{this.openWidgetBoardById(o)})}}),this.registeredGroupCommandIds.push(s)})}hideAllBoards(){this.widgetBoardModals.forEach(i=>{i.isOpen&&i.close()})}async prewarmAllWidgetMarkdownCache(){var i,n;try{new Qe.Notice("\u30AD\u30E3\u30C3\u30B7\u30E5\u4E2D\u2026");let s=this.settings.baseFolder?`${this.settings.baseFolder.replace(/\/$/,"")}/tweets.json`:"tweets.json",a=(await new ri(this.app,s).load()).posts||[],c=[],d=[];for(let L of this.settings.boards)for(let F of L.widgets)F.type==="memo"&&((i=F.settings)!=null&&i.memoContent)&&c.push(F.settings.memoContent),F.type==="file-view-widget"&&((n=F.settings)!=null&&n.fileName)&&d.push(F.settings.fileName);async function u(L,F,V){var X;let J="data.json";try{let U=await V.vault.adapter.read(J),Z=JSON.parse(U);if(Z.reflectionSummaries&&((X=Z.reflectionSummaries[L])==null?void 0:X.date)===F)return Z.reflectionSummaries[L].summary}catch(U){}return null}let f=new Date().toISOString().slice(0,10),g=new Date,p=g.getDay(),w=new Date(g.getFullYear(),g.getMonth(),g.getDate()+(6-p)).toISOString().slice(0,10),v=await u("today",f,this.app),_=await u("week",w,this.app),S=0,M=0,D=0,T=0,C=[v,_].filter(Boolean),A=15,I=L=>{typeof window.requestIdleCallback=="function"?window.requestIdleCallback(L):setTimeout(L,0)},O=async()=>{let L=Math.min(S+A,a.length);for(;S<L;S++){let X=a[S];await Ut(X.text,document.createElement("div"),"",new Qi.Component)}let F=Math.min(M+A,c.length);for(;M<F;M++)await Ut(c[M],document.createElement("div"),"",new Qi.Component);let V=Math.min(D+A,d.length);for(;D<V;D++){let X=this.app.vault.getAbstractFileByPath(d[D]);if(X&&X instanceof Qi.TFile){let U=await this.app.vault.read(X);await Ut(U,document.createElement("div"),X.path,new Qi.Component)}}let J=Math.min(T+A,C.length);for(;T<J;T++)await Ut(C[T],document.createElement("div"),"",new Qi.Component);S<a.length||M<c.length||D<d.length||T<C.length?I(O):new Qe.Notice("\u30AD\u30E3\u30C3\u30B7\u30E5\u5B8C\u4E86")};I(O)}catch(s){console.error("\u30D7\u30EA\u30A6\u30A9\u30FC\u30E0\u4E2D\u306B\u30A8\u30E9\u30FC:",s)}}},Ul=class extends Qe.Modal{constructor(i,n,s){super(i);this.boards=n;this.onChoose=s}onOpen(){let{contentEl:i}=this;i.empty(),i.createEl("h2",{text:"\u30A6\u30A3\u30B8\u30A7\u30C3\u30C8\u30DC\u30FC\u30C9\u3092\u9078\u629E"});let n=i.createDiv({cls:"widget-board-picker-list"});this.boards.forEach(s=>{let r=n.createDiv({cls:"widget-board-picker-item"});r.setText(s.name),r.onClickEvent(()=>{this.onChoose(s.id),this.close()})})}onClose(){this.contentEl.empty()}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
  (*!
   * Chart.js v4.4.9
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chart.js:
  (*!
   * Chart.js v4.4.9
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
